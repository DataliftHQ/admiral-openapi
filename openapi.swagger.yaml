swagger: "2.0"
info:
  title: admiral/api/application/v1/application.proto
  version: version not set
tags:
  - name: ApplicationAPI
  - name: ClusterAPI
  - name: ComponentAPI
  - name: ConnectionAPI
  - name: DeploymentAPI
  - name: EnvironmentAPI
  - name: HealthcheckAPI
  - name: RunnerAPI
  - name: SourceAPI
  - name: StateAPI
  - name: UserAPI
  - name: VariableAPI
consumes:
  - application/json
produces:
  - application/json
paths:
  /healthz:
    get:
      summary: |-
        Healthcheck verifies that the service is running and healthy.
        Returns an empty response on success. Use this endpoint for load balancer
        health checks and monitoring systems.
      operationId: HealthcheckAPI_Healthcheck2
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1HealthcheckResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      tags:
        - HealthcheckAPI
  /v1/agent/revisions/{revisionId}/bundle:
    get:
      summary: |-
        GetRevisionBundle fetches the rendered artifact bundle for a workload
        revision. The K8s agent calls this when it detects a new or updated
        revision that needs to be applied to the cluster.
      description: |-
        The bundle contains pre-rendered Kubernetes manifests (from Helm template,
        kustomize build, or raw manifests) ready for server-side apply. The agent
        does not need to render anything — it applies the bundle as-is.

        The cluster is identified by the agent token's binding. Returns
        PERMISSION_DENIED if the revision's target cluster does not match the
        AGT's cluster binding. Returns NOT_FOUND if the revision does not exist
        or has been cancelled.

        Scope: `cluster:deploy` | Token types: `agt`
      operationId: ClusterAPI_GetRevisionBundle
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetRevisionBundleResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: revisionId
          description: The revision to fetch the bundle for (UUID).
          in: path
          required: true
          type: string
      tags:
        - ClusterAPI
  /v1/agent/revisions/{revisionId}/result:
    post:
      summary: |-
        ReportRevisionResult reports the outcome of applying a workload revision
        to the cluster. The server transitions the parent Revision status
        accordingly (APPLYING → SUCCEEDED or FAILED).
      description: |-
        The cluster is identified by the agent token's binding. Returns
        PERMISSION_DENIED if the revision's target cluster does not match the
        AGT's cluster binding.

        Scope: `cluster:deploy` | Token types: `agt`
      operationId: ClusterAPI_ReportRevisionResult
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ReportRevisionResultResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: revisionId
          description: The revision being reported on (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/ClusterAPIReportRevisionResultBody'
      tags:
        - ClusterAPI
  /v1/agent/status:
    post:
      summary: |-
        ReportClusterStatus receives a combined telemetry snapshot from a K8s agent.
        The payload includes cluster-level metrics, per-workload status, and
        Kubernetes events. Admiral splits this into three storage tiers on receipt.
      description: |-
        The cluster is identified by the agent token — the server resolves the
        cluster from the AGT's binding. No cluster_id is required in the request.

        This endpoint is agent-facing and restricted to agent tokens.

        Scope: `cluster:status` | Token types: `agt`
      operationId: ClusterAPI_ReportClusterStatus
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ReportClusterStatusResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: |-
            ReportClusterStatusRequest contains a combined telemetry payload from a K8s agent.
            Admiral splits this into three storage tiers: current snapshot, time-series
            metrics, and events.

            The cluster is identified by the agent token's binding — no cluster_id is
            required. The server resolves the cluster from the AGT.
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1ReportClusterStatusRequest'
      tags:
        - ClusterAPI
  /v1/applications:
    get:
      summary: |-
        ListApplications returns a paginated list of applications within the
        caller's tenant.
      description: 'Scope: `app:read`'
      operationId: ApplicationAPI_ListApplications
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListApplicationsResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: filter
          description: Filter expression using the PEG filter DSL.
          in: query
          required: false
          type: string
        - name: pageSize
          description: Maximum number of applications to return per page.
          in: query
          required: false
          type: integer
          format: int32
        - name: pageToken
          description: Opaque pagination token from a previous response.
          in: query
          required: false
          type: string
      tags:
        - ApplicationAPI
    post:
      summary: CreateApplication creates a new application within the caller's tenant.
      description: 'Scope: `app:write`'
      operationId: ApplicationAPI_CreateApplication
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1CreateApplicationResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: CreateApplicationRequest contains the parameters for creating a new application.
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1CreateApplicationRequest'
      tags:
        - ApplicationAPI
  /v1/applications/{application.id}:
    patch:
      summary: |-
        UpdateApplication updates an application's mutable fields.
        Use the `update_mask` to specify which fields to update.
      description: 'Scope: `app:write`'
      operationId: ApplicationAPI_UpdateApplication
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1UpdateApplicationResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: application.id
          description: Unique identifier for the application (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/ApplicationAPIUpdateApplicationBody'
      tags:
        - ApplicationAPI
  /v1/applications/{applicationId}:
    get:
      summary: GetApplication retrieves an application by ID.
      description: 'Scope: `app:read`'
      operationId: ApplicationAPI_GetApplication
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetApplicationResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: applicationId
          description: The unique identifier of the application (UUID).
          in: path
          required: true
          type: string
      tags:
        - ApplicationAPI
    delete:
      summary: |-
        DeleteApplication permanently deletes an application and all of its
        associated environments. This action cannot be undone.
      description: 'Scope: `app:write`'
      operationId: ApplicationAPI_DeleteApplication
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1DeleteApplicationResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: applicationId
          description: The unique identifier of the application to delete (UUID).
          in: path
          required: true
          type: string
      tags:
        - ApplicationAPI
  /v1/clusters:
    get:
      summary: ListClusters returns a paginated list of clusters within the caller's tenant.
      description: 'Scope: `cluster:read`'
      operationId: ClusterAPI_ListClusters
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListClustersResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: filter
          description: Filter expression using the PEG filter DSL
          in: query
          required: false
          type: string
        - name: pageSize
          description: Maximum number of clusters to return per page.
          in: query
          required: false
          type: integer
          format: int32
        - name: pageToken
          description: Opaque pagination token from a previous response.
          in: query
          required: false
          type: string
      tags:
        - ClusterAPI
    post:
      summary: |-
        CreateCluster creates a new cluster record within the caller's tenant and
        generates an initial Agent Token (AGT) for the K8s agent. The cluster
        starts in PENDING status until an agent registers against it.
      description: |-
        The response includes a `plain_text_token` — the raw AGT secret shown
        exactly once. Deploy this token to the K8s agent (e.g., via Helm values
        or a Kubernetes Secret). The agent uses it to authenticate with
        AgentAPI.RegisterAgent on first boot.

        Scope: `cluster:write`
      operationId: ClusterAPI_CreateCluster
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1CreateClusterResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: CreateClusterRequest contains the parameters for creating a new cluster.
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1CreateClusterRequest'
      tags:
        - ClusterAPI
  /v1/clusters/{cluster.id}:
    patch:
      summary: |-
        UpdateCluster updates a cluster's mutable fields.
        Use the `update_mask` to specify which fields to update.
      description: 'Scope: `cluster:write`'
      operationId: ClusterAPI_UpdateCluster
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1UpdateClusterResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: cluster.id
          description: Unique identifier for the cluster (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/ClusterAPIUpdateClusterBody'
      tags:
        - ClusterAPI
  /v1/clusters/{clusterId}:
    get:
      summary: GetCluster retrieves a cluster by ID.
      description: |-
        Returns the Cluster record with its server-derived health_status. For
        detailed telemetry (node counts, resource usage, workload summary), use
        GetClusterStatus instead.

        Scope: `cluster:read`
      operationId: ClusterAPI_GetCluster
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetClusterResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: clusterId
          description: The unique identifier of the cluster (UUID).
          in: path
          required: true
          type: string
      tags:
        - ClusterAPI
    delete:
      summary: |-
        DeleteCluster permanently deletes a cluster record and revokes all
        associated agent tokens. This action cannot be undone.
      description: 'Scope: `cluster:write`'
      operationId: ClusterAPI_DeleteCluster
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1DeleteClusterResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: clusterId
          description: |-
            The unique identifier of the cluster to delete (UUID).
            All associated agent tokens will be revoked.
          in: path
          required: true
          type: string
      tags:
        - ClusterAPI
  /v1/clusters/{clusterId}/status:
    get:
      summary: |-
        GetClusterStatus retrieves the current telemetry snapshot for a cluster.
        Returns the latest metrics pushed by the agent, along with server-derived
        health status and workload summary counts.
      description: |-
        Returns NOT_FOUND if the cluster does not exist. If the cluster exists but
        no agent has reported telemetry yet, the response will have health_status
        PENDING and no status message.

        Scope: `cluster:read`
      operationId: ClusterAPI_GetClusterStatus
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetClusterStatusResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: clusterId
          description: The unique identifier of the cluster (UUID).
          in: path
          required: true
          type: string
      tags:
        - ClusterAPI
  /v1/clusters/{clusterId}/tokens:
    get:
      summary: |-
        ListClusterTokens returns a paginated list of AGTs bound to the specified
        cluster. Token secrets are never included.
      description: 'Scope: `cluster:read`'
      operationId: ClusterAPI_ListClusterTokens
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListClusterTokensResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: clusterId
          description: The cluster to list tokens for (UUID).
          in: path
          required: true
          type: string
        - name: filter
          description: Filter expression using the PEG filter DSL.
          in: query
          required: false
          type: string
        - name: pageSize
          description: Maximum number of tokens to return per page.
          in: query
          required: false
          type: integer
          format: int32
        - name: pageToken
          description: Opaque pagination token from a previous response.
          in: query
          required: false
          type: string
      tags:
        - ClusterAPI
    post:
      summary: |-
        CreateClusterToken creates a new Agent Token (AGT) bound to the specified
        cluster. Scopes are auto-assigned and cannot be overridden. The response
        includes the raw token secret, which is shown exactly once.
      description: |-
        Use this to create additional AGTs for an existing cluster (e.g., for
        zero-downtime token rotation). The initial AGT is created automatically
        by CreateCluster.

        Scope: `cluster:write`
      operationId: ClusterAPI_CreateClusterToken
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1CreateClusterTokenResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: clusterId
          description: The cluster to bind this token to (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/ClusterAPICreateClusterTokenBody'
      tags:
        - ClusterAPI
  /v1/clusters/{clusterId}/tokens/{tokenId}:
    get:
      summary: |-
        GetClusterToken retrieves a single AGT by ID.
        Returns metadata only — the token secret is never included.
      description: 'Scope: `cluster:read`'
      operationId: ClusterAPI_GetClusterToken
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetClusterTokenResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: clusterId
          description: The cluster the token belongs to (UUID).
          in: path
          required: true
          type: string
        - name: tokenId
          description: The unique identifier of the token (UUID).
          in: path
          required: true
          type: string
      tags:
        - ClusterAPI
  /v1/clusters/{clusterId}/tokens/{tokenId}/revoke:
    post:
      summary: |-
        RevokeClusterToken permanently revokes an AGT bound to this cluster.
        The agent will receive a 401 on its next request. If this is the only
        active AGT for the cluster, the agent will become disconnected.
      description: 'Scope: `cluster:write`'
      operationId: ClusterAPI_RevokeClusterToken
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1RevokeClusterTokenResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: clusterId
          description: The cluster the token belongs to (UUID).
          in: path
          required: true
          type: string
        - name: tokenId
          description: The unique identifier of the token to revoke (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/ClusterAPIRevokeClusterTokenBody'
      tags:
        - ClusterAPI
  /v1/clusters/{clusterId}/workloads:
    get:
      summary: ListWorkloads returns a paginated list of workloads running in a specific cluster.
      description: 'Scope: `cluster:read`'
      operationId: ClusterAPI_ListWorkloads
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListWorkloadsResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: clusterId
          description: The cluster whose workloads to list (UUID).
          in: path
          required: true
          type: string
        - name: filter
          description: Filter expression using the PEG filter DSL
          in: query
          required: false
          type: string
        - name: pageSize
          description: Maximum number of workloads to return per page.
          in: query
          required: false
          type: integer
          format: int32
        - name: pageToken
          description: Opaque pagination token from a previous response.
          in: query
          required: false
          type: string
      tags:
        - ClusterAPI
  /v1/clusters/{clusterId}/workloads/status:
    post:
      summary: |-
        ReportWorkloadStatus receives workload-only telemetry from a K8s agent.
        Used for incremental workload updates between full cluster status pushes.
      description: |-
        This endpoint is agent-facing and restricted to agent tokens.

        Scope: `cluster:status` | Token types: `agt`
      operationId: ClusterAPI_ReportWorkloadStatus
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ReportWorkloadStatusResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: clusterId
          description: The cluster these workloads belong to (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/ClusterAPIReportWorkloadStatusBody'
      tags:
        - ClusterAPI
  /v1/components:
    get:
      summary: ListComponents returns a paginated list of components.
      description: |-
        The response behavior depends on the filter:
          - Filter by `application_id` only: returns application-level component
            definitions (defaults).
          - Filter by `application_id` + `environment_id`: returns the resolved
            view with environment overrides applied. Disabled components are
            included with `disabled=true`. The `has_override` field indicates
            whether the component differs from its application-level default.

        Scope: `app:read`
      operationId: ComponentAPI_ListComponents
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListComponentsResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: filter
          description: |-
            Filter expression using the PEG filter DSL.

            Common filter fields:
              - `application_id` — scope to an application (required for meaningful
                results since components always belong to an application).
              - `environment_id` — when present, triggers the resolved view with
                environment overrides applied to each component.
              - `category` — filter by component category (INFRASTRUCTURE, WORKLOAD).
              - `name` — filter by component name.
          in: query
          required: false
          type: string
        - name: pageSize
          description: Maximum number of components to return per page.
          in: query
          required: false
          type: integer
          format: int32
        - name: pageToken
          description: Opaque pagination token from a previous response.
          in: query
          required: false
          type: string
      tags:
        - ComponentAPI
    post:
      summary: CreateComponent adds a new component to an application.
      description: |-
        The component name must be unique within the application. The source must
        exist and be accessible to the caller's tenant.

        Scope: `app:write`
      operationId: ComponentAPI_CreateComponent
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1CreateComponentResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: |-
            CreateComponentRequest contains the parameters for adding a component to
            an application.
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1CreateComponentRequest'
      tags:
        - ComponentAPI
  /v1/components/{component.id}:
    patch:
      summary: |-
        UpdateComponent updates a component's mutable fields.
        Use the `update_mask` to specify which fields to update.
      description: |-
        When renaming a component, the server validates that no other components
        reference the old name in their values_template expressions and rejects
        the rename if references exist.

        Scope: `app:write`
      operationId: ComponentAPI_UpdateComponent
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1UpdateComponentResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: component.id
          description: Unique identifier for the component (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/ComponentAPIUpdateComponentBody'
      tags:
        - ComponentAPI
  /v1/components/{componentId}:
    get:
      summary: GetComponent retrieves a component by ID.
      description: 'Scope: `app:read`'
      operationId: ComponentAPI_GetComponent
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetComponentResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: componentId
          description: The unique identifier of the component (UUID).
          in: path
          required: true
          type: string
      tags:
        - ComponentAPI
    delete:
      summary: |-
        DeleteComponent removes a component from an application. Fails if other
        components depend on this component (via depends_on or output references
        in values_template) — remove or update those dependencies first. Also
        removes all environment overrides for this component.
        This action cannot be undone.
      description: 'Scope: `app:write`'
      operationId: ComponentAPI_DeleteComponent
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1DeleteComponentResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: componentId
          description: |-
            The unique identifier of the component to delete (UUID).
            Fails if other components depend on this component (via depends_on
            or output references in values_template).
          in: path
          required: true
          type: string
      tags:
        - ComponentAPI
  /v1/components/{componentId}/overrides:
    get:
      summary: |-
        ListComponentOverrides returns all environment-level overrides for a
        component across all environments.
      description: 'Scope: `env:read`'
      operationId: ComponentAPI_ListComponentOverrides
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListComponentOverridesResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: componentId
          description: The component to list overrides for (UUID).
          in: path
          required: true
          type: string
        - name: pageSize
          description: Maximum number of overrides to return per page.
          in: query
          required: false
          type: integer
          format: int32
        - name: pageToken
          description: Opaque pagination token from a previous response.
          in: query
          required: false
          type: string
      tags:
        - ComponentAPI
  /v1/components/{componentId}/overrides/{environmentId}:
    get:
      summary: |-
        GetComponentOverride retrieves the environment-level override for a
        component, if one exists.
      description: 'Scope: `env:read`'
      operationId: ComponentAPI_GetComponentOverride
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetComponentOverrideResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: componentId
          description: The component (UUID).
          in: path
          required: true
          type: string
        - name: environmentId
          description: The environment (UUID).
          in: path
          required: true
          type: string
      tags:
        - ComponentAPI
    delete:
      summary: |-
        DeleteComponentOverride removes an environment-level override, reverting
        the component to its application-level defaults for that environment.
      description: 'Scope: `env:write`'
      operationId: ComponentAPI_DeleteComponentOverride
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1DeleteComponentOverrideResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: componentId
          description: The component (UUID).
          in: path
          required: true
          type: string
        - name: environmentId
          description: The environment (UUID).
          in: path
          required: true
          type: string
      tags:
        - ComponentAPI
    put:
      summary: |-
        SetComponentOverride creates or replaces an environment-level override for
        a component. Overrides allow an environment to use a different source,
        version, values template, or to disable the component entirely.
      description: |-
        For example, a "redis" component might use a Helm chart source in dev but
        a Terraform ElastiCache module in prod.

        This is an upsert — if an override already exists for this component +
        environment combination, it is replaced.

        Scope: `env:write`
      operationId: ComponentAPI_SetComponentOverride
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1SetComponentOverrideResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: componentId
          description: The component to override (UUID).
          in: path
          required: true
          type: string
        - name: environmentId
          description: The environment this override applies to (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/ComponentAPISetComponentOverrideBody'
      tags:
        - ComponentAPI
  /v1/connections:
    get:
      summary: |-
        ListConnections returns a paginated list of connections within the caller's
        tenant. Sensitive credential fields are never included.
      description: 'Scope: `connection:read`'
      operationId: ConnectionAPI_ListConnections
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListConnectionsResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: filter
          description: Filter expression using the PEG filter DSL.
          in: query
          required: false
          type: string
        - name: pageSize
          description: Maximum number of connections to return per page.
          in: query
          required: false
          type: integer
          format: int32
        - name: pageToken
          description: Opaque pagination token from a previous response.
          in: query
          required: false
          type: string
      tags:
        - ConnectionAPI
    post:
      summary: CreateConnection creates a new connection within the caller's tenant.
      description: |-
        The connection type and auth config must match — for example, a GIT_TOKEN
        connection requires a GitTokenAuth config. The server validates connectivity
        on creation when possible and sets the initial status accordingly.

        Scope: `connection:write`
      operationId: ConnectionAPI_CreateConnection
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1CreateConnectionResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: CreateConnectionRequest contains the parameters for creating a new connection.
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1CreateConnectionRequest'
      tags:
        - ConnectionAPI
  /v1/connections/{connection.id}:
    patch:
      summary: |-
        UpdateConnection updates a connection's mutable fields.
        Use the `update_mask` to specify which fields to update.
      description: |-
        When updating auth_config, the entire auth config is replaced — partial
        updates within the auth config oneof are not supported. Omitting auth_config
        from the update_mask leaves credentials unchanged.

        Scope: `connection:write`
      operationId: ConnectionAPI_UpdateConnection
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1UpdateConnectionResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: connection.id
          description: Unique identifier for the connection (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/ConnectionAPIUpdateConnectionBody'
      tags:
        - ConnectionAPI
  /v1/connections/{connectionId}:
    get:
      summary: GetConnection retrieves a connection by ID.
      description: |-
        Returns connection metadata and status. Sensitive credential fields are
        never included in the response.

        Scope: `connection:read`
      operationId: ConnectionAPI_GetConnection
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetConnectionResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: connectionId
          description: The unique identifier of the connection (UUID).
          in: path
          required: true
          type: string
      tags:
        - ConnectionAPI
    delete:
      summary: |-
        DeleteConnection permanently deletes a connection. Fails if any sources
        still reference this connection — remove or reassign those sources first.
        This action cannot be undone.
      description: 'Scope: `connection:write`'
      operationId: ConnectionAPI_DeleteConnection
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1DeleteConnectionResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: connectionId
          description: |-
            The unique identifier of the connection to delete (UUID).
            Fails if any sources still reference this connection.
          in: path
          required: true
          type: string
      tags:
        - ConnectionAPI
  /v1/connections/{connectionId}/test:
    post:
      summary: |-
        TestConnection validates that the stored credentials can successfully
        authenticate to the remote system. Updates the connection's status and
        last_tested_at fields based on the result.
      description: |-
        This operation makes a network call to the external system and may take
        several seconds depending on the remote endpoint.

        Scope: `connection:write`
      operationId: ConnectionAPI_TestConnection
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1TestConnectionResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: connectionId
          description: The unique identifier of the connection to test (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/ConnectionAPITestConnectionBody'
      tags:
        - ConnectionAPI
  /v1/deployments:
    get:
      summary: ListDeployments returns a paginated list of deployments.
      description: |-
        Common filter fields: `application_id`, `environment_id`, `status`,
        `trigger_type`. Use to view deployment history for an environment.

        Scope: `deploy:read`
      operationId: DeploymentAPI_ListDeployments
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListDeploymentsResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: filter
          description: |-
            Filter expression using the PEG filter DSL.

            Common filter fields:
              - `application_id` — deployments for a specific application.
              - `environment_id` — deployments to a specific environment.
              - `status` — filter by deployment status.
              - `trigger_type` — filter by trigger type (MANUAL, CI, DESTROY).
          in: query
          required: false
          type: string
        - name: pageSize
          description: Maximum number of deployments to return per page.
          in: query
          required: false
          type: integer
          format: int32
        - name: pageToken
          description: Opaque pagination token from a previous response.
          in: query
          required: false
          type: string
      tags:
        - DeploymentAPI
    post:
      summary: |-
        CreateDeployment triggers a new deployment of an application to an
        environment.
      description: |-
        The server resolves all components (with environment overrides applied),
        builds the dependency DAG, and begins rendering and executing revisions.

        To destroy all resources in an environment (e.g., before deleting the
        environment), set `destroy` to true. This runs Terraform destroy for
        infrastructure components and deletes workload resources from the cluster,
        in reverse dependency order.

        Concurrency: only one deployment can be active per application+environment
        at a time. If a deployment is already in progress (PENDING or RUNNING),
        the new deployment is queued and will start automatically when the
        current deployment completes or is cancelled.

        Scope: `deploy:write`
      operationId: DeploymentAPI_CreateDeployment
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1CreateDeploymentResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: CreateDeploymentRequest triggers a new deployment.
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1CreateDeploymentRequest'
      tags:
        - DeploymentAPI
  /v1/deployments/{deploymentId}:
    get:
      summary: |-
        GetDeployment retrieves a deployment by ID, including its composite
        status derived from all component revisions.
      description: 'Scope: `deploy:read`'
      operationId: DeploymentAPI_GetDeployment
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetDeploymentResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: deploymentId
          description: The unique identifier of the deployment (UUID).
          in: path
          required: true
          type: string
      tags:
        - DeploymentAPI
  /v1/deployments/{deploymentId}/cancel:
    post:
      summary: |-
        CancelDeployment cancels an in-progress deployment. Revisions that are
        already SUCCEEDED remain applied — cancellation only stops pending and
        queued revisions from proceeding. The deployment status becomes CANCELLED.
      description: 'Scope: `deploy:write`'
      operationId: DeploymentAPI_CancelDeployment
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1CancelDeploymentResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: deploymentId
          description: The deployment to cancel (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/DeploymentAPICancelDeploymentBody'
      tags:
        - DeploymentAPI
  /v1/deployments/{deploymentId}/revisions:
    get:
      summary: ListRevisions returns all component revisions for a deployment.
      description: 'Scope: `deploy:read`'
      operationId: DeploymentAPI_ListRevisions
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListRevisionsResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: deploymentId
          description: The deployment to list revisions for (UUID).
          in: path
          required: true
          type: string
        - name: pageSize
          description: Maximum number of revisions to return per page.
          in: query
          required: false
          type: integer
          format: int32
        - name: pageToken
          description: Opaque pagination token from a previous response.
          in: query
          required: false
          type: string
      tags:
        - DeploymentAPI
  /v1/deployments/{deploymentId}/revisions/{revisionId}:
    get:
      summary: GetRevision retrieves a single component revision within a deployment.
      description: 'Scope: `deploy:read`'
      operationId: DeploymentAPI_GetRevision
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetRevisionResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: deploymentId
          description: The deployment (UUID).
          in: path
          required: true
          type: string
        - name: revisionId
          description: The revision (UUID).
          in: path
          required: true
          type: string
      tags:
        - DeploymentAPI
  /v1/deployments/{deploymentId}/revisions/{revisionId}/retry:
    post:
      summary: |-
        RetryRevision retries a failed component revision. A new execution
        attempt is made using the same rendered artifacts. The retry count
        is incremented. Only applicable to revisions in FAILED status.
      description: 'Scope: `deploy:write`'
      operationId: DeploymentAPI_RetryRevision
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1RetryRevisionResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: deploymentId
          description: The deployment (UUID).
          in: path
          required: true
          type: string
        - name: revisionId
          description: The revision to retry (UUID). Must be in FAILED status.
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/DeploymentAPIRetryRevisionBody'
      tags:
        - DeploymentAPI
  /v1/environments:
    get:
      summary: |-
        ListEnvironments returns a paginated list of environments. Use the filter
        to scope by application, runtime type, or labels.
      description: 'Scope: `env:read`'
      operationId: EnvironmentAPI_ListEnvironments
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListEnvironmentsResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: filter
          description: Filter expression using the PEG filter DSL.
          in: query
          required: false
          type: string
        - name: pageSize
          description: Maximum number of environments to return per page.
          in: query
          required: false
          type: integer
          format: int32
        - name: pageToken
          description: Opaque pagination token from a previous response.
          in: query
          required: false
          type: string
      tags:
        - EnvironmentAPI
    post:
      summary: CreateEnvironment creates a new environment for the specified application.
      description: 'Scope: `env:write`'
      operationId: EnvironmentAPI_CreateEnvironment
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1CreateEnvironmentResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: CreateEnvironmentRequest contains the parameters for creating a new environment.
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1CreateEnvironmentRequest'
      tags:
        - EnvironmentAPI
  /v1/environments/{environment.id}:
    patch:
      summary: |-
        UpdateEnvironment updates an environment's mutable fields.
        Use the `update_mask` to specify which fields to update.
      description: 'Scope: `env:write`'
      operationId: EnvironmentAPI_UpdateEnvironment
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1UpdateEnvironmentResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: environment.id
          description: Unique identifier for the environment (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/EnvironmentAPIUpdateEnvironmentBody'
      tags:
        - EnvironmentAPI
  /v1/environments/{environmentId}:
    get:
      summary: GetEnvironment retrieves an environment by ID.
      description: 'Scope: `env:read`'
      operationId: EnvironmentAPI_GetEnvironment
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetEnvironmentResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: environmentId
          description: The unique identifier of the environment (UUID).
          in: path
          required: true
          type: string
      tags:
        - EnvironmentAPI
    delete:
      summary: |-
        DeleteEnvironment permanently deletes an environment. Fails if the
        environment has an active deployment (last deployment status is SUCCEEDED
        with resources running). To delete an environment with deployed resources,
        first run a destroy deployment to tear down all components, then delete
        the environment record. This action cannot be undone.
      description: 'Scope: `env:write`'
      operationId: EnvironmentAPI_DeleteEnvironment
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1DeleteEnvironmentResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: environmentId
          description: The unique identifier of the environment to delete (UUID).
          in: path
          required: true
          type: string
      tags:
        - EnvironmentAPI
  /v1/healthcheck:
    get:
      summary: |-
        Healthcheck verifies that the service is running and healthy.
        Returns an empty response on success. Use this endpoint for load balancer
        health checks and monitoring systems.
      operationId: HealthcheckAPI_Healthcheck
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1HealthcheckResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      tags:
        - HealthcheckAPI
  /v1/runner/heartbeat:
    post:
      summary: |-
        Heartbeat reports that the runner is alive and includes current capacity
        metrics. The server uses heartbeat recency to derive health status.
      description: |-
        The runner is identified by the agent token — the server resolves the
        runner from the AGT's binding. No runner_id is required in the request.

        This endpoint is runner-facing and restricted to agent tokens.

        Scope: `runner:exec` | Token types: `agt`
      operationId: RunnerAPI_Heartbeat
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1HeartbeatResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: |-
            HeartbeatRequest contains the runner's alive signal and current capacity.
            The runner is identified by the AGT's binding — no runner_id is required.
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1HeartbeatRequest'
      tags:
        - RunnerAPI
  /v1/runner/jobs/claim:
    post:
      summary: |-
        ClaimJob polls for the next job assigned to this runner. Returns the job
        metadata if work is available, or an empty response if no jobs are
        pending. The runner should call this on a polling interval.
      description: |-
        The runner is identified by the agent token — no runner_id is required.

        This endpoint is runner-facing and restricted to agent tokens.

        Scope: `runner:exec` | Token types: `agt`
      operationId: RunnerAPI_ClaimJob
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ClaimJobResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: |-
            ClaimJobRequest is sent by the runner to poll for available work.
            The runner is identified by the AGT's binding — no runner_id is required.
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1ClaimJobRequest'
      tags:
        - RunnerAPI
  /v1/runner/jobs/{jobId}/bundle:
    get:
      summary: |-
        GetJobBundle fetches the rendered artifacts for a claimed job. Separated
        from ClaimJob to keep the claim response lightweight — the runner first
        claims a job, then fetches the (potentially large) artifact bundle.
      description: |-
        The bundle contains everything the runner needs to execute the Terraform
        operation: rendered .tf files, resolved variables, provider configuration,
        backend configuration, and the required Terraform version.

        This endpoint is runner-facing and restricted to agent tokens.

        Scope: `runner:exec` | Token types: `agt`
      operationId: RunnerAPI_GetJobBundle
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetJobBundleResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: jobId
          description: The job to fetch the bundle for (UUID).
          in: path
          required: true
          type: string
      tags:
        - RunnerAPI
  /v1/runner/jobs/{jobId}/result:
    post:
      summary: |-
        ReportJobResult reports the outcome of a completed job. The runner sends
        plan output (for plan jobs), apply results, error messages, and log
        references. The server transitions the parent Revision status accordingly
        (e.g., PLANNING→APPLYING, APPLYING→SUCCEEDED/FAILED).
      description: |-
        This endpoint is runner-facing and restricted to agent tokens.

        Scope: `runner:exec` | Token types: `agt`
      operationId: RunnerAPI_ReportJobResult
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ReportJobResultResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: jobId
          description: The job being reported on (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/RunnerAPIReportJobResultBody'
      tags:
        - RunnerAPI
  /v1/runner/jobs/{jobId}/state:
    get:
      summary: |-
        GetState fetches the current state for a job's component + environment.
        Returns empty data if no state exists yet (fresh init — Terraform
        handles this gracefully).
      description: |-
        The server validates that the AGT's runner binding matches the runner
        assigned to this job. Returns PERMISSION_DENIED if they do not match.
        Returns NOT_FOUND if the job does not exist or has been cancelled.

        Maps to Terraform HTTP backend GET on the state address.

        Scope: `state:read` | Token types: `agt`
      operationId: StateAPI_GetState
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetStateResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: jobId
          description: |-
            The job to fetch state for (UUID). The server resolves the component
            and environment from the job's binding.
          in: path
          required: true
          type: string
      tags:
        - StateAPI
    post:
      summary: |-
        PushState stores a new state version after a successful apply. The server
        validates the serial number (must be greater than current) and lineage
        (must match if state already exists). Creates the state record on first
        push.
      description: |-
        The server validates that the AGT's runner binding matches the runner
        assigned to this job. Returns PERMISSION_DENIED if they do not match.
        Returns FAILED_PRECONDITION if the serial is not greater than the current
        serial. Returns INVALID_ARGUMENT if the lineage does not match the
        existing state record.

        Maps to Terraform HTTP backend POST on the state address.

        Scope: `state:write` | Token types: `agt`
      operationId: StateAPI_PushState
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1PushStateResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: jobId
          description: The job pushing state (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/StateAPIPushStateBody'
      tags:
        - StateAPI
  /v1/runner/jobs/{jobId}/state/lock:
    post:
      summary: |-
        LockState acquires an exclusive lock for the job's state. Terraform calls
        this before plan/apply to prevent concurrent modifications.
      description: |-
        The server validates that the AGT's runner binding matches the runner
        assigned to this job. Returns PERMISSION_DENIED if they do not match.
        Returns FAILED_PRECONDITION if the state is already locked by a different
        operation. The lock_id is generated by Terraform and must be passed to
        UnlockState.

        Maps to Terraform HTTP backend POST on the lock address.

        Scope: `state:write` | Token types: `agt`
      operationId: StateAPI_LockState
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1LockStateResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: jobId
          description: The job requesting the lock (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/StateAPILockStateBody'
      tags:
        - StateAPI
  /v1/runner/jobs/{jobId}/state/unlock:
    post:
      summary: |-
        UnlockState releases the exclusive lock on the job's state. The lock_id
        must match the one used during LockState.
      description: |-
        The server validates that the AGT's runner binding matches the runner
        assigned to this job. Returns PERMISSION_DENIED if they do not match.
        Returns FAILED_PRECONDITION if the lock_id does not match the currently
        held lock. Returns NOT_FOUND if no lock is held.

        Maps to Terraform HTTP backend POST on the unlock address.

        Scope: `state:write` | Token types: `agt`
      operationId: StateAPI_UnlockState
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1UnlockStateResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: jobId
          description: The job releasing the lock (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/StateAPIUnlockStateBody'
      tags:
        - StateAPI
  /v1/runners:
    get:
      summary: ListRunners returns a paginated list of runners within the caller's tenant.
      description: 'Scope: `runner:read`'
      operationId: RunnerAPI_ListRunners
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListRunnersResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: filter
          description: Filter expression using the PEG filter DSL.
          in: query
          required: false
          type: string
        - name: pageSize
          description: Maximum number of runners to return per page.
          in: query
          required: false
          type: integer
          format: int32
        - name: pageToken
          description: Opaque pagination token from a previous response.
          in: query
          required: false
          type: string
      tags:
        - RunnerAPI
    post:
      summary: |-
        CreateRunner creates a new runner record within the caller's tenant and
        generates an initial Agent Token (AGT). The runner starts in PENDING
        health status until it begins heartbeating.
      description: |-
        The response includes a `plain_text_token` — the raw AGT secret shown
        exactly once. Deploy this token to the runner binary for authentication.

        Scope: `runner:write`
      operationId: RunnerAPI_CreateRunner
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1CreateRunnerResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: CreateRunnerRequest contains the parameters for creating a new runner.
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1CreateRunnerRequest'
      tags:
        - RunnerAPI
  /v1/runners/{runner.id}:
    patch:
      summary: |-
        UpdateRunner updates a runner's mutable fields.
        Use the `update_mask` to specify which fields to update.
      description: 'Scope: `runner:write`'
      operationId: RunnerAPI_UpdateRunner
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1UpdateRunnerResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: runner.id
          description: Unique identifier for the runner (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/RunnerAPIUpdateRunnerBody'
      tags:
        - RunnerAPI
  /v1/runners/{runnerId}:
    get:
      summary: GetRunner retrieves a runner by ID.
      description: |-
        Returns the Runner record with its server-derived health_status. For
        detailed telemetry (active jobs, capacity), use GetRunnerStatus instead.

        Scope: `runner:read`
      operationId: RunnerAPI_GetRunner
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetRunnerResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: runnerId
          description: The unique identifier of the runner (UUID).
          in: path
          required: true
          type: string
      tags:
        - RunnerAPI
    delete:
      summary: |-
        DeleteRunner permanently deletes a runner record and revokes all
        associated agent tokens. Any jobs assigned to this runner that are
        not yet completed will be failed. This action cannot be undone.
      description: 'Scope: `runner:write`'
      operationId: RunnerAPI_DeleteRunner
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1DeleteRunnerResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: runnerId
          description: |-
            The unique identifier of the runner to delete (UUID).
            All associated agent tokens will be revoked.
          in: path
          required: true
          type: string
      tags:
        - RunnerAPI
  /v1/runners/{runnerId}/jobs:
    get:
      summary: |-
        ListRunnerJobs returns a paginated list of jobs assigned to a runner.
        Provides admin read-only visibility into runner workload.
      description: 'Scope: `runner:read`'
      operationId: RunnerAPI_ListRunnerJobs
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListRunnerJobsResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: runnerId
          description: The runner whose jobs to list (UUID).
          in: path
          required: true
          type: string
        - name: filter
          description: |-
            Filter expression using the PEG filter DSL.

            Common filter fields:
              - `status` — filter by job status.
              - `job_type` — filter by job type (PLAN, APPLY, etc.).
              - `deployment_id` — jobs for a specific deployment.
          in: query
          required: false
          type: string
        - name: pageSize
          description: Maximum number of jobs to return per page.
          in: query
          required: false
          type: integer
          format: int32
        - name: pageToken
          description: Opaque pagination token from a previous response.
          in: query
          required: false
          type: string
      tags:
        - RunnerAPI
  /v1/runners/{runnerId}/status:
    get:
      summary: |-
        GetRunnerStatus retrieves the current telemetry snapshot for a runner.
        Returns the latest capacity metrics reported via Heartbeat.
      description: |-
        Returns NOT_FOUND if the runner does not exist. If the runner exists but
        has not heartbeated yet, health_status will be PENDING and status will
        be absent.

        Scope: `runner:read`
      operationId: RunnerAPI_GetRunnerStatus
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetRunnerStatusResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: runnerId
          description: The unique identifier of the runner (UUID).
          in: path
          required: true
          type: string
      tags:
        - RunnerAPI
  /v1/runners/{runnerId}/tokens:
    get:
      summary: |-
        ListRunnerTokens returns a paginated list of AGTs bound to the specified
        runner. Token secrets are never included.
      description: 'Scope: `runner:read`'
      operationId: RunnerAPI_ListRunnerTokens
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListRunnerTokensResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: runnerId
          description: The runner to list tokens for (UUID).
          in: path
          required: true
          type: string
        - name: filter
          description: Filter expression using the PEG filter DSL.
          in: query
          required: false
          type: string
        - name: pageSize
          description: Maximum number of tokens to return per page.
          in: query
          required: false
          type: integer
          format: int32
        - name: pageToken
          description: Opaque pagination token from a previous response.
          in: query
          required: false
          type: string
      tags:
        - RunnerAPI
    post:
      summary: |-
        CreateRunnerToken creates a new Agent Token (AGT) bound to the specified
        runner. Scopes are auto-assigned and cannot be overridden. The response
        includes the raw token secret, which is shown exactly once.
      description: |-
        Use this to create additional AGTs for an existing runner (e.g., for
        zero-downtime token rotation). The initial AGT is created automatically
        by CreateRunner.

        Scope: `runner:write`
      operationId: RunnerAPI_CreateRunnerToken
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1CreateRunnerTokenResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: runnerId
          description: The runner to bind this token to (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/RunnerAPICreateRunnerTokenBody'
      tags:
        - RunnerAPI
  /v1/runners/{runnerId}/tokens/{tokenId}:
    get:
      summary: |-
        GetRunnerToken retrieves a single AGT by ID.
        Returns metadata only — the token secret is never included.
      description: 'Scope: `runner:read`'
      operationId: RunnerAPI_GetRunnerToken
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetRunnerTokenResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: runnerId
          description: The runner the token belongs to (UUID).
          in: path
          required: true
          type: string
        - name: tokenId
          description: The unique identifier of the token (UUID).
          in: path
          required: true
          type: string
      tags:
        - RunnerAPI
  /v1/runners/{runnerId}/tokens/{tokenId}/revoke:
    post:
      summary: |-
        RevokeRunnerToken permanently revokes an AGT bound to this runner.
        The runner will receive a 401 on its next request. If this is the only
        active AGT for the runner, the runner will become disconnected.
      description: 'Scope: `runner:write`'
      operationId: RunnerAPI_RevokeRunnerToken
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1RevokeRunnerTokenResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: runnerId
          description: The runner the token belongs to (UUID).
          in: path
          required: true
          type: string
        - name: tokenId
          description: The unique identifier of the token to revoke (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/RunnerAPIRevokeRunnerTokenBody'
      tags:
        - RunnerAPI
  /v1/sources:
    get:
      summary: |-
        ListSources returns a paginated list of sources within the caller's tenant.
        Use the filter to scope by type, catalog status, or labels.
      description: 'Scope: `source:read`'
      operationId: SourceAPI_ListSources
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListSourcesResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: filter
          description: Filter expression using the PEG filter DSL.
          in: query
          required: false
          type: string
        - name: pageSize
          description: Maximum number of sources to return per page.
          in: query
          required: false
          type: integer
          format: int32
        - name: pageToken
          description: Opaque pagination token from a previous response.
          in: query
          required: false
          type: string
      tags:
        - SourceAPI
    post:
      summary: CreateSource creates a new source definition within the caller's tenant.
      description: |-
        The source type and source_config must match — for example, a
        TERRAFORM_REGISTRY source requires a TerraformRegistryConfig.

        Scope: `source:write`
      operationId: SourceAPI_CreateSource
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1CreateSourceResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: CreateSourceRequest contains the parameters for creating a new source.
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1CreateSourceRequest'
      tags:
        - SourceAPI
  /v1/sources/{source.id}:
    patch:
      summary: |-
        UpdateSource updates a source's mutable fields.
        Use the `update_mask` to specify which fields to update.
      description: 'Scope: `source:write`'
      operationId: SourceAPI_UpdateSource
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1UpdateSourceResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: source.id
          description: Unique identifier for the source (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/SourceAPIUpdateSourceBody'
      tags:
        - SourceAPI
  /v1/sources/{sourceId}:
    get:
      summary: GetSource retrieves a source by ID.
      description: 'Scope: `source:read`'
      operationId: SourceAPI_GetSource
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetSourceResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: sourceId
          description: The unique identifier of the source (UUID).
          in: path
          required: true
          type: string
      tags:
        - SourceAPI
    delete:
      summary: |-
        DeleteSource permanently deletes a source definition. Fails if any
        application components still reference this source — remove or reassign
        those components first. This action cannot be undone.
      description: 'Scope: `source:write`'
      operationId: SourceAPI_DeleteSource
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1DeleteSourceResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: sourceId
          description: |-
            The unique identifier of the source to delete (UUID).
            Fails if any application components still reference this source.
          in: path
          required: true
          type: string
      tags:
        - SourceAPI
  /v1/sources/{sourceId}/inputs:
    get:
      summary: |-
        GetSourceInputs fetches the source artifact at a specific version and
        parses its inputs (configurable parameters).
      description: |-
        For Terraform modules, this parses HCL variable blocks using
        terraform-config-inspect. For Helm charts, this extracts values.yaml and
        optionally values.schema.json. For Kustomize and raw manifests, inputs
        are not discoverable and the response will be empty.

        This operation fetches and parses the external artifact in real time and
        may take several seconds.

        Scope: `source:read`
      operationId: SourceAPI_GetSourceInputs
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetSourceInputsResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: sourceId
          description: The source to inspect (UUID).
          in: path
          required: true
          type: string
        - name: version
          description: |-
            The version to inspect. For registry sources, a semver string. For Git
            sources, a tag, branch, or commit SHA. Required.
          in: query
          required: false
          type: string
      tags:
        - SourceAPI
  /v1/sources/{sourceId}/outputs:
    get:
      summary: |-
        GetSourceOutputs fetches the source artifact at a specific version and
        parses its outputs (values produced after apply).
      description: |-
        Only meaningful for Terraform modules, which declare formal output blocks.
        Helm charts, Kustomize, and raw manifests do not have formal outputs —
        workload component outputs are user-declared, not discovered.

        This operation queries the external system in real time and may take
        several seconds.

        Scope: `source:read`
      operationId: SourceAPI_GetSourceOutputs
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetSourceOutputsResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: sourceId
          description: The source to inspect (UUID).
          in: path
          required: true
          type: string
        - name: version
          description: The version to inspect. Required.
          in: query
          required: false
          type: string
      tags:
        - SourceAPI
  /v1/sources/{sourceId}/sync:
    post:
      summary: |-
        SyncSource triggers a refresh of the source's cached metadata — version
        list, discovered inputs/outputs, and connectivity status.
      description: |-
        Use this after updating credentials on the referenced connection, or to
        force a refresh when you know the upstream has changed.

        This operation queries the external system in real time and may take
        several seconds.

        Scope: `source:write`
      operationId: SourceAPI_SyncSource
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1SyncSourceResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: sourceId
          description: The source to sync (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/SourceAPISyncSourceBody'
      tags:
        - SourceAPI
  /v1/sources/{sourceId}/versions:
    get:
      summary: |-
        ListSourceVersions queries the external system for available versions of
        this source's artifact.
      description: |-
        For Terraform registry sources, this calls the Module Registry Protocol's
        version listing endpoint. For Helm repositories, it parses the index.yaml.
        For OCI sources, it lists tags. For Git sources, it lists tags via
        ls-remote.

        This operation queries the external system in real time and may take
        several seconds.

        Scope: `source:read`
      operationId: SourceAPI_ListSourceVersions
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListSourceVersionsResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: sourceId
          description: The source to query versions for (UUID).
          in: path
          required: true
          type: string
        - name: pageSize
          description: Maximum number of versions to return. Defaults to 50.
          in: query
          required: false
          type: integer
          format: int32
        - name: pageToken
          description: Opaque pagination token for fetching additional versions.
          in: query
          required: false
          type: string
      tags:
        - SourceAPI
  /v1/states:
    get:
      summary: |-
        ListStates returns a paginated list of state records within the caller's
        tenant. Use filters to scope by component, environment, or application.
        Returns metadata only — use GetCurrentState to fetch full state data.
      description: 'Scope: `state:read`'
      operationId: StateAPI_ListStates
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListStatesResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: filter
          description: |-
            Filter expression using the PEG filter DSL.

            Common filter fields:
              - `component_id` — states for a specific component (UUID).
              - `environment_id` — states for a specific environment (UUID).
              - `application_id` — states for all components belonging to an
                application (UUID). The server resolves the application's components
                and returns states for all of them. Can be combined with
                `environment_id`.
          in: query
          required: false
          type: string
        - name: pageSize
          description: Maximum number of states to return per page.
          in: query
          required: false
          type: integer
          format: int32
        - name: pageToken
          description: Opaque pagination token from a previous response.
          in: query
          required: false
          type: string
      tags:
        - StateAPI
  /v1/states/{stateId}:
    get:
      summary: |-
        GetCurrentState retrieves the current state and lock info for a state
        record. Returns the latest state data, serial, lineage, and any active
        lock.
      description: |-
        Returns NOT_FOUND if the state record does not exist.

        Scope: `state:read`
      operationId: StateAPI_GetCurrentState
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetCurrentStateResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: stateId
          description: The unique identifier of the state record (UUID).
          in: path
          required: true
          type: string
      tags:
        - StateAPI
    delete:
      summary: |-
        DeleteState permanently deletes a state record and all its version
        history. Fails if the state is currently locked — force-unlock first.
        This action cannot be undone.
      description: |-
        Returns NOT_FOUND if the state record does not exist.
        Returns FAILED_PRECONDITION if the state is currently locked.

        Scope: `state:admin`
      operationId: StateAPI_DeleteState
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1DeleteStateResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: stateId
          description: |-
            The unique identifier of the state record to delete (UUID).
            Fails if the state is currently locked — force-unlock first.
          in: path
          required: true
          type: string
      tags:
        - StateAPI
  /v1/states/{stateId}/force-unlock:
    post:
      summary: |-
        ForceUnlockState forcefully releases a stuck lock on a state record.
        Use this when a runner has crashed or become unreachable while holding
        a lock, preventing subsequent deployments from proceeding.
      description: |-
        Returns NOT_FOUND if the state record does not exist.
        Returns FAILED_PRECONDITION if the state has no active lock.
        This action is logged in the audit trail.

        Scope: `state:admin`
      operationId: StateAPI_ForceUnlockState
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ForceUnlockStateResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: stateId
          description: The state record to force-unlock (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/StateAPIForceUnlockStateBody'
      tags:
        - StateAPI
  /v1/states/{stateId}/versions:
    get:
      summary: |-
        ListStateVersions returns a paginated history of state versions for a
        state record. Returns metadata only (serial, md5, size) — use
        GetStateVersion to fetch the full state data at a specific serial.
      description: |-
        Returns NOT_FOUND if the state record does not exist.

        Scope: `state:read`
      operationId: StateAPI_ListStateVersions
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListStateVersionsResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: stateId
          description: The state record to list versions for (UUID).
          in: path
          required: true
          type: string
        - name: pageSize
          description: Maximum number of versions to return per page.
          in: query
          required: false
          type: integer
          format: int32
        - name: pageToken
          description: Opaque pagination token from a previous response.
          in: query
          required: false
          type: string
      tags:
        - StateAPI
  /v1/states/{stateId}/versions/{serial}:
    get:
      summary: |-
        GetStateVersion retrieves the full state data at a historical serial
        number. Use ListStateVersions to discover available serials.
      description: |-
        Returns NOT_FOUND if the state record does not exist or if no version
        with the specified serial exists for that state record.

        Scope: `state:read`
      operationId: StateAPI_GetStateVersion
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetStateVersionResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: stateId
          description: The state record (UUID).
          in: path
          required: true
          type: string
        - name: serial
          description: The serial number of the version to retrieve.
          in: path
          required: true
          type: string
          format: int64
      tags:
        - StateAPI
  /v1/user:
    get:
      summary: |-
        GetUser retrieves the profile of the currently authenticated user.
        The user is identified by the authentication token provided in the request.
      operationId: UserAPI_GetUser
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetUserResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      tags:
        - UserAPI
  /v1/user/tokens:
    get:
      summary: |-
        ListPersonalAccessTokens returns a paginated list of the authenticated
        user's PATs. Token secrets are never included.
      description: 'Scope: `token:read`'
      operationId: UserAPI_ListPersonalAccessTokens
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListPersonalAccessTokensResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: filter
          description: |-
            Filter expression using the PEG filter DSL
            (e.g., `status == "active"` or `name == "ci-*"`).
          in: query
          required: false
          type: string
        - name: pageSize
          description: Maximum number of tokens to return per page.
          in: query
          required: false
          type: integer
          format: int32
        - name: pageToken
          description: Opaque pagination token from a previous response.
          in: query
          required: false
          type: string
      tags:
        - UserAPI
    post:
      summary: |-
        CreatePersonalAccessToken creates a new PAT for the authenticated user.
        The response includes the raw token secret, which is shown exactly once
        and cannot be retrieved again.
      description: 'Scope: `token:write`'
      operationId: UserAPI_CreatePersonalAccessToken
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1CreatePersonalAccessTokenResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: CreatePersonalAccessTokenRequest contains the parameters for creating a new PAT.
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1CreatePersonalAccessTokenRequest'
      tags:
        - UserAPI
  /v1/user/tokens/{tokenId}:
    get:
      summary: |-
        GetPersonalAccessToken retrieves a single PAT by ID.
        Returns metadata only — the token secret is never included.
      description: 'Scope: `token:read`'
      operationId: UserAPI_GetPersonalAccessToken
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetPersonalAccessTokenResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: tokenId
          description: The unique identifier of the token (UUID).
          in: path
          required: true
          type: string
      tags:
        - UserAPI
  /v1/user/tokens/{tokenId}/revoke:
    post:
      summary: |-
        RevokePersonalAccessToken permanently revokes a PAT. The token becomes
        immediately unusable and cannot be restored.
      description: 'Scope: `token:write`'
      operationId: UserAPI_RevokePersonalAccessToken
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1RevokePersonalAccessTokenResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: tokenId
          description: The unique identifier of the token to revoke (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/UserAPIRevokePersonalAccessTokenBody'
      tags:
        - UserAPI
  /v1/variables:
    get:
      summary: ListVariables returns a merged, paginated list of variables.
      description: |-
        The returned list is a resolved view based on the provided filters:
          - No application_id or environment_id: global variables only.
          - application_id only: global + app-level variables merged.
          - application_id + environment_id: global + app + environment variables merged.

        When variables with the same key exist at multiple levels, all are returned
        so clients can determine precedence.

        Scope: `var:read`
      operationId: VariableAPI_ListVariables
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1ListVariablesResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: filter
          description: |-
            Filter expression using the PEG filter DSL.

            Common filter fields:
              - `application_id` — scope to an application (triggers merge with
                app-level variables alongside global variables).
              - `environment_id` — scope to an environment (requires application_id;
                triggers merge with environment-level variables).
              - `sensitive` — filter by sensitivity.
              - `type` — filter by variable type.
              - `key` — filter by variable key (supports prefix matching).
          in: query
          required: false
          type: string
        - name: pageSize
          description: Maximum number of variables to return per page.
          in: query
          required: false
          type: integer
          format: int32
        - name: pageToken
          description: Opaque pagination token from a previous response.
          in: query
          required: false
          type: string
      tags:
        - VariableAPI
    post:
      summary: CreateVariable creates a new variable.
      description: |-
        Fails if a variable with the same key already exists at the same level
        (same key + application_id + environment_id combination).

        Scope: `var:write`
      operationId: VariableAPI_CreateVariable
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1CreateVariableResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: body
          description: |-
            CreateVariableRequest contains the parameters for creating a new variable.
            The variable's scope is derived from the presence of application_id and
            environment_id: neither means global, application_id only means app-scoped,
            both means environment-scoped.
          in: body
          required: true
          schema:
            $ref: '#/definitions/v1CreateVariableRequest'
      tags:
        - VariableAPI
  /v1/variables/{variable.id}:
    patch:
      summary: |-
        UpdateVariable updates a variable's mutable fields.
        Use the `update_mask` to specify which fields to update.
        Only `value` and `sensitive` are mutable — key is immutable.
      description: 'Scope: `var:write`'
      operationId: VariableAPI_UpdateVariable
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1UpdateVariableResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: variable.id
          description: Unique identifier for the variable (UUID).
          in: path
          required: true
          type: string
        - name: body
          in: body
          required: true
          schema:
            $ref: '#/definitions/VariableAPIUpdateVariableBody'
      tags:
        - VariableAPI
  /v1/variables/{variableId}:
    get:
      summary: GetVariable retrieves a variable by ID.
      description: |-
        Sensitive variable values are masked in the response.

        Scope: `var:read`
      operationId: VariableAPI_GetVariable
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1GetVariableResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: variableId
          description: The unique identifier of the variable (UUID).
          in: path
          required: true
          type: string
      tags:
        - VariableAPI
    delete:
      summary: DeleteVariable permanently deletes a variable. This action cannot be undone.
      description: 'Scope: `var:write`'
      operationId: VariableAPI_DeleteVariable
      responses:
        "200":
          description: A successful response.
          schema:
            $ref: '#/definitions/v1DeleteVariableResponse'
        default:
          description: An unexpected error response.
          schema:
            $ref: '#/definitions/rpcStatus'
      parameters:
        - name: variableId
          description: The unique identifier of the variable to delete (UUID).
          in: path
          required: true
          type: string
      tags:
        - VariableAPI
definitions:
  ApplicationAPIUpdateApplicationBody:
    type: object
    properties:
      application:
        type: object
        properties:
          tenantId:
            type: string
            description: Tenant this application belongs to (UUID).
          name:
            type: string
            description: |-
              URL-safe, human-readable identifier (e.g., "billing-api"). Unique within
              the tenant. Lowercase alphanumeric and hyphens only, must start with a
              letter and end with an alphanumeric character (1-63 chars).
          description:
            type: string
            description: |-
              Optional longer-form description of the application's purpose
              (e.g., "Handles invoice generation and payment processing").
          labels:
            type: object
            additionalProperties:
              type: string
            description: |-
              Arbitrary key-value labels for organizing and filtering applications
              (e.g., `{"team": "payments", "tier": "critical"}`).
          createdBy:
            type: string
            description: User ID who created this application (UUID, server-populated from token).
          updatedBy:
            type: string
            description: User ID who last updated this application (UUID, server-populated from token).
          createdAt:
            type: string
            format: date-time
            description: When the application was created.
          updatedAt:
            type: string
            format: date-time
            description: When the application was last updated.
        description: |-
          The application with updated fields. The `id` field is required.
          Only fields specified in `update_mask` are updated.
      updateMask:
        type: string
        description: |-
          The set of fields to update. If unset, all mutable fields are updated.
          Supported fields: `name`, `description`, `labels`.
    description: UpdateApplicationRequest contains the application fields to update.
  ClusterAPICreateClusterTokenBody:
    type: object
    properties:
      name:
        type: string
        description: |-
          URL-safe, human-readable identifier for the token (e.g., "prod-agent-key").
          Must be unique within the cluster's tokens. Lowercase alphanumeric and
          hyphens only.
      expiresAt:
        type: string
        format: date-time
        description: Optional expiration time. If unset, the token does not expire.
    description: |-
      CreateClusterTokenRequest contains the parameters for creating a new AGT
      bound to a cluster.
  ClusterAPIReportRevisionResultBody:
    type: object
    properties:
      result:
        $ref: '#/definitions/v1RevisionResult'
        description: The result of applying the revision.
    description: |-
      ReportRevisionResultRequest contains the outcome of applying a workload
      revision to the cluster.
  ClusterAPIReportWorkloadStatusBody:
    type: object
    properties:
      workloads:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1WorkloadStatus'
        description: Per-workload status snapshots.
      reportedAt:
        type: string
        format: date-time
        description: When the agent generated this report.
    description: ReportWorkloadStatusRequest contains incremental workload telemetry from a K8s agent.
  ClusterAPIRevokeClusterTokenBody:
    type: object
    description: RevokeClusterTokenRequest identifies a cluster AGT to revoke.
  ClusterAPIUpdateClusterBody:
    type: object
    properties:
      cluster:
        type: object
        properties:
          tenantId:
            type: string
            description: Tenant this cluster belongs to (UUID).
          name:
            type: string
            description: |-
              URL-safe, human-readable identifier (e.g., "prod-us-east-1"). Unique
              within the tenant. Lowercase alphanumeric and hyphens only, must start
              with a letter and end with an alphanumeric character (1-63 chars).
          description:
            type: string
            description: |-
              Optional longer-form description of the cluster's purpose
              (e.g., "Primary production cluster serving US East traffic").
          labels:
            type: object
            additionalProperties:
              type: string
            description: |-
              Arbitrary key-value labels for organizing and filtering clusters
              (e.g., `{"region": "us-east-1", "cloud": "aws"}`).
          clusterUid:
            type: string
            description: |-
              The Kubernetes kube-system namespace UID, bound at agent registration
              using a first-write-wins strategy. Used to detect when a token is
              accidentally deployed to a different physical cluster.
          healthStatus:
            $ref: '#/definitions/v1ClusterHealthStatus'
            description: Derived health status based on agent connectivity and workload state.
          createdBy:
            type: string
            description: User ID who created this cluster (UUID, server-populated from token).
          updatedBy:
            type: string
            description: User ID who last updated this cluster (UUID, server-populated from token).
          createdAt:
            type: string
            format: date-time
            description: When the cluster record was created.
          updatedAt:
            type: string
            format: date-time
            description: When the cluster record was last updated.
        description: |-
          The cluster with updated fields. The `id` field is required.
          Only fields specified in `update_mask` are updated.
      updateMask:
        type: string
        description: |-
          The set of fields to update. If unset, all mutable fields are updated.
          Supported fields: `name`, `description`, `labels`.
    description: UpdateClusterRequest contains the cluster fields to update.
  ComponentAPISetComponentOverrideBody:
    type: object
    properties:
      disabled:
        type: boolean
        description: When true, the component is not deployed in this environment.
      sourceId:
        type: string
        description: Override source (UUID). When set, replaces the component's default source.
      version:
        type: string
        description: Override version. When set, replaces the component's default version.
      valuesTemplate:
        type: string
        description: |-
          Override values template. When set, completely replaces the component's
          default values template (no merge).
      dependsOn:
        type: array
        items:
          type: string
        description: |-
          Override depends_on (component UUIDs). When set, replaces the component's
          default depends_on.
      outputs:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1ComponentOutput'
        description: Override outputs. When set, replaces the component's declared outputs.
    description: SetComponentOverrideRequest creates or replaces an environment-level override.
  ComponentAPIUpdateComponentBody:
    type: object
    properties:
      component:
        type: object
        properties:
          applicationId:
            type: string
            description: The application this component belongs to (UUID).
          name:
            type: string
            description: |-
              Human-readable name for this component within the application
              (e.g., "vpc", "redis", "api-server"). Unique within the application.
              Lowercase alphanumeric and hyphens only (1-63 chars). This name is used
              in template expressions: `{{ .component.<name>.<output> }}`.
          description:
            type: string
            description: |-
              Optional description of the component's purpose
              (e.g., "Primary VPC for all environments" or "Redis cache layer").
          category:
            $ref: '#/definitions/v1ComponentCategory'
            description: |-
              Whether this is an infrastructure or workload component. Derived from
              the source type when the component is created, but stored explicitly
              for filtering and to determine execution behavior.
          sourceId:
            type: string
            description: |-
              The source artifact this component deploys (UUID). References a Source
              defined via the SourceAPI.
          version:
            type: string
            description: |-
              Pinned version of the source artifact. For registry sources, a semver
              string (e.g., "1.2.3"). For Git sources, a tag, branch, or commit SHA.
              Required — components always pin a version. Use UpdateComponent to
              change the version (rolling update).
          valuesTemplate:
            type: string
            description: |-
              Values template that maps configuration into the source's expected inputs.
              This is a JSON-encoded object where keys are the source input names and
              values are either literal values or template expressions.

              Template expressions can reference:
                - Variables: `{{ .var.DATABASE_URL }}`
                - Component outputs: `{{ .component.vpc.vpc_id }}`
                - Environment metadata: `{{ .env.name }}`

              Example for a Terraform RDS module:
                {
                  "vpc_id": "{{ .component.vpc.vpc_id }}",
                  "subnet_ids": "{{ .component.vpc.private_subnet_ids }}",
                  "instance_class": "{{ .var.RDS_INSTANCE_CLASS }}",
                  "engine_version": "15.4"
                }

              Example for a Helm chart:
                {
                  "replicaCount": "{{ .var.REPLICA_COUNT }}",
                  "image.repository": "myorg/api-server",
                  "image.tag": "{{ .var.IMAGE_TAG }}"
                }

              The rendering engine resolves all expressions at deployment time using
              the environment's variables and the outputs of upstream components.
          dependsOn:
            type: array
            items:
              type: string
            description: |-
              Component IDs that must complete successfully before this component can
              be deployed (UUIDs). Must reference components within the same
              application. The deployment engine uses these, combined with implicit
              dependencies from template expressions, to build the execution DAG.

              Explicit depends_on is useful when there is a deployment-order dependency
              that is not captured by output references (e.g., cert-manager must be
              installed before any workload that uses TLS certificates).
          outputs:
            type: array
            items:
              type: object
              $ref: '#/definitions/v1ComponentOutput'
            description: |-
              Declared outputs for this component. For infrastructure components
              (Terraform), outputs are auto-discovered from the module and this field
              is ignored. For workload components, outputs must be declared here to
              be available for template expressions in other components.

              See ComponentOutput for examples.
          disabled:
            type: boolean
            description: |-
              Whether this component is disabled in the resolved environment context.
              Always false on the application-level component. Set to true when
              ListComponents is called with an environment_id and the component has
              a disabled override for that environment.
          hasOverride:
            type: boolean
            description: |-
              Whether any field on this component has been overridden in the resolved
              environment context. Always false when ListComponents is called without
              an environment_id.
          createdBy:
            type: string
            description: User ID who created this component (UUID, server-populated from token).
          updatedBy:
            type: string
            description: User ID who last updated this component (UUID, server-populated from token).
          createdAt:
            type: string
            format: date-time
            description: When the component was created.
          updatedAt:
            type: string
            format: date-time
            description: When the component was last updated.
        description: |-
          The component with updated fields. The `id` field is required.
          Only fields specified in `update_mask` are updated.
      updateMask:
        type: string
        description: |-
          The set of fields to update. If unset, all mutable fields are updated.
          Supported fields: `name`, `description`, `source_id`, `version`,
          `values_template`, `depends_on`, `outputs`.
    description: UpdateComponentRequest contains the component fields to update.
  ConnectionAPITestConnectionBody:
    type: object
    description: TestConnectionRequest identifies a connection to validate.
  ConnectionAPIUpdateConnectionBody:
    type: object
    properties:
      connection:
        type: object
        properties:
          tenantId:
            type: string
            description: Tenant this connection belongs to (UUID).
          name:
            type: string
            description: |-
              URL-safe, human-readable identifier (e.g., "github-org", "ecr-prod").
              Unique within the tenant. Lowercase alphanumeric and hyphens only, must
              start with a letter and end with an alphanumeric character (1-63 chars).
          description:
            type: string
            description: |-
              Optional longer-form description of what this connection is for
              (e.g., "Read-only access to the platform team's GitHub org").
          type:
            $ref: '#/definitions/v1ConnectionType'
            description: The type of external system and authentication mechanism.
          gitToken:
            $ref: '#/definitions/v1GitTokenAuth'
            description: Git HTTPS token (for CONNECTION_TYPE_GIT_TOKEN).
          gitSsh:
            $ref: '#/definitions/v1GitSSHAuth'
            description: Git SSH key (for CONNECTION_TYPE_GIT_SSH).
          gitGithubApp:
            $ref: '#/definitions/v1GitHubAppAuth'
            description: GitHub App credentials (for CONNECTION_TYPE_GIT_GITHUB_APP).
          helmHttp:
            $ref: '#/definitions/v1HelmHTTPAuth'
            description: Helm HTTP basic auth (for CONNECTION_TYPE_HELM_HTTP).
          ociBasic:
            $ref: '#/definitions/v1BasicAuth'
            description: OCI registry basic auth (for CONNECTION_TYPE_OCI_BASIC).
          awsFederation:
            $ref: '#/definitions/v1AWSFederationConfig'
            description: AWS OIDC federation (for CONNECTION_TYPE_CLOUD_AWS).
          gcpFederation:
            $ref: '#/definitions/v1GCPFederationConfig'
            description: GCP Workload Identity (for CONNECTION_TYPE_CLOUD_GCP).
          azureFederation:
            $ref: '#/definitions/v1AzureFederationConfig'
            description: Azure Federated Credential (for CONNECTION_TYPE_CLOUD_AZURE).
          awsStatic:
            $ref: '#/definitions/v1AWSStaticAuth'
            description: AWS static credentials (for CONNECTION_TYPE_CLOUD_AWS_STATIC, deprecated).
          gcpStatic:
            $ref: '#/definitions/v1GCPStaticAuth'
            description: GCP static credentials (for CONNECTION_TYPE_CLOUD_GCP_STATIC, deprecated).
          azureStatic:
            $ref: '#/definitions/v1AzureStaticAuth'
            description: Azure static credentials (for CONNECTION_TYPE_CLOUD_AZURE_STATIC, deprecated).
          bearerToken:
            $ref: '#/definitions/v1BearerTokenAuth'
            description: Bearer token (for CONNECTION_TYPE_TERRAFORM_REGISTRY).
          status:
            $ref: '#/definitions/v1ConnectionStatus'
            description: Current health status of the connection's credentials.
          statusMessage:
            type: string
            description: |-
              Human-readable message when status is ERROR (e.g., "401 Unauthorized:
              token expired"). Empty when status is ACTIVE or UNTESTED.
          labels:
            type: object
            additionalProperties:
              type: string
            description: |-
              Arbitrary key-value labels for organizing and filtering connections
              (e.g., `{"team": "platform", "environment": "prod"}`).
          createdBy:
            type: string
            description: User ID who created this connection (UUID, server-populated from token).
          updatedBy:
            type: string
            description: User ID who last updated this connection (UUID, server-populated from token).
          createdAt:
            type: string
            format: date-time
            description: When the connection was created.
          updatedAt:
            type: string
            format: date-time
            description: When the connection was last updated.
          lastTestedAt:
            type: string
            format: date-time
            description: |-
              When the connection was last tested (via TestConnection or auto-validation).
              Absent if never tested.
        description: |-
          The connection with updated fields. The `id` field is required.
          Only fields specified in `update_mask` are updated.

          When updating auth_config, the entire auth config is replaced.
          Omitting auth_config from the update_mask leaves credentials unchanged.
      updateMask:
        type: string
        description: |-
          The set of fields to update. If unset, all mutable fields are updated.
          Supported fields: `name`, `description`, `auth_config`, `labels`.
    description: UpdateConnectionRequest contains the connection fields to update.
  DeploymentAPICancelDeploymentBody:
    type: object
    properties:
      reason:
        type: string
        description: Optional reason for cancellation.
    description: CancelDeploymentRequest cancels an in-progress deployment.
  DeploymentAPIRetryRevisionBody:
    type: object
    description: RetryRevisionRequest retries a failed revision.
  EnvironmentAPIUpdateEnvironmentBody:
    type: object
    properties:
      environment:
        type: object
        properties:
          applicationId:
            type: string
            description: The application this environment belongs to (UUID).
          name:
            type: string
            description: |-
              URL-safe, human-readable identifier (e.g., "prod", "staging-us-east").
              Unique within the application. Lowercase alphanumeric and hyphens only,
              must start with a letter and end with an alphanumeric character (1-63 chars).
          description:
            type: string
            description: |-
              Optional longer-form description of the environment's purpose
              (e.g., "US East production serving live traffic" or
              "Shared staging for QA validation before prod promotion").
          runtimeType:
            $ref: '#/definitions/v1RuntimeType'
            description: |-
              The kind of runtime this environment targets. Optional — can be assigned
              after creation.
          kubernetes:
            $ref: '#/definitions/v1KubernetesConfig'
            description: Kubernetes-specific settings (cluster, namespace).
          labels:
            type: object
            additionalProperties:
              type: string
            description: |-
              Arbitrary key-value labels for organizing and filtering environments
              (e.g., `{"region": "us-east-1", "tier": "production"}`).
          infrastructure:
            $ref: '#/definitions/v1InfrastructureConfig'
            description: |-
              Infrastructure execution settings (runner assignment). If unset,
              infrastructure components in this environment cannot be deployed.
          hasPendingChanges:
            type: boolean
            description: |-
              Whether the environment has configuration changes that have not yet been
              deployed. Server-derived by comparing current resolved config (variables,
              component settings, overrides, source versions) against the last
              successful deployment's snapshot. False if no successful deployment
              exists yet (a fresh environment with no deployments returns false —
              use `last_deployed_at` to distinguish "clean" from "never deployed").
          lastDeployedAt:
            type: string
            format: date-time
            description: |-
              When the last successful deployment to this environment completed.
              Absent if no successful deployment has occurred yet.
          createdBy:
            type: string
            description: User ID who created this environment (UUID, server-populated from token).
          updatedBy:
            type: string
            description: User ID who last updated this environment (UUID, server-populated from token).
          createdAt:
            type: string
            format: date-time
            description: When the environment was created.
          updatedAt:
            type: string
            format: date-time
            description: When the environment was last updated.
        description: |-
          The environment with updated fields. The `id` field is required.
          Only fields specified in `update_mask` are updated.
      updateMask:
        type: string
        description: |-
          The set of fields to update. If unset, all mutable fields are updated.
          Supported fields: `name`, `description`, `runtime_type`, `kubernetes`,
          `labels`, `infrastructure`.
    description: UpdateEnvironmentRequest contains the environment fields to update.
  RunnerAPICreateRunnerTokenBody:
    type: object
    properties:
      name:
        type: string
        description: |-
          URL-safe, human-readable identifier for the token (e.g., "prod-runner-key").
          Must be unique within the runner's tokens. Lowercase alphanumeric and
          hyphens only.
      expiresAt:
        type: string
        format: date-time
        description: Optional expiration time. If unset, the token does not expire.
    description: |-
      CreateRunnerTokenRequest contains the parameters for creating a new AGT
      bound to a runner.
  RunnerAPIReportJobResultBody:
    type: object
    properties:
      result:
        $ref: '#/definitions/v1JobResult'
        description: The job result with status, outputs, and error information.
    description: ReportJobResultRequest contains the outcome of a completed job.
  RunnerAPIRevokeRunnerTokenBody:
    type: object
    description: RevokeRunnerTokenRequest identifies a runner AGT to revoke.
  RunnerAPIUpdateRunnerBody:
    type: object
    properties:
      runner:
        type: object
        properties:
          tenantId:
            type: string
            description: Tenant this runner belongs to (UUID).
          name:
            type: string
            description: |-
              URL-safe, human-readable identifier (e.g., "prod-terraform-runner").
              Unique within the tenant. Lowercase alphanumeric and hyphens only,
              must start with a letter and end with an alphanumeric character (1-63 chars).
          description:
            type: string
            description: |-
              Optional longer-form description of the runner's purpose
              (e.g., "Terraform runner for production AWS infrastructure").
          kind:
            $ref: '#/definitions/v1RunnerKind'
            description: The type of operations this runner executes.
          labels:
            type: object
            additionalProperties:
              type: string
            description: |-
              Arbitrary key-value labels for organizing and filtering runners
              (e.g., `{"cloud": "aws", "team": "platform"}`).
          healthStatus:
            $ref: '#/definitions/v1RunnerHealthStatus'
            description: Derived health status based on heartbeat recency and capacity.
          createdBy:
            type: string
            description: User ID who created this runner (UUID, server-populated from token).
          updatedBy:
            type: string
            description: User ID who last updated this runner (UUID, server-populated from token).
          createdAt:
            type: string
            format: date-time
            description: When the runner record was created.
          updatedAt:
            type: string
            format: date-time
            description: When the runner record was last updated.
        description: |-
          The runner with updated fields. The `id` field is required.
          Only fields specified in `update_mask` are updated.
      updateMask:
        type: string
        description: |-
          The set of fields to update. If unset, all mutable fields are updated.
          Supported fields: `name`, `description`, `labels`.
    description: UpdateRunnerRequest contains the runner fields to update.
  SourceAPISyncSourceBody:
    type: object
    description: SyncSourceRequest triggers a metadata refresh for a source.
  SourceAPIUpdateSourceBody:
    type: object
    properties:
      source:
        type: object
        properties:
          tenantId:
            type: string
            description: Tenant this source belongs to (UUID).
          name:
            type: string
            description: |-
              URL-safe, human-readable identifier (e.g., "corporate-rds", "nginx-chart").
              Unique within the tenant. Lowercase alphanumeric and hyphens only, must
              start with a letter and end with an alphanumeric character (1-63 chars).
          description:
            type: string
            description: |-
              Optional longer-form description of the source's purpose
              (e.g., "Corporate-approved RDS module with encryption and backups").
          type:
            $ref: '#/definitions/v1SourceType'
            description: The kind of artifact and fetch protocol.
          url:
            type: string
            title: |-
              Base URL for the source. The meaning varies by source type:
                - TERRAFORM_REGISTRY: registry hostname (e.g., "registry.terraform.io")
                - TERRAFORM_GIT, HELM_GIT, KUSTOMIZE_GIT, MANIFEST_GIT: Git repo URL
                - HELM_REPOSITORY: Helm repo URL (e.g., "https://charts.bitnami.com/bitnami")
                - HELM_OCI: OCI registry URL (e.g., "oci://ghcr.io")
                - ARCHIVE: HTTP/S3/GCS URL to the archive
          connectionId:
            type: string
            description: |-
              Reference to the connection providing credentials for this source (UUID).
              Optional — null for public sources that require no authentication
              (e.g., public Terraform registry, public Helm repos).
          catalog:
            type: boolean
            description: |-
              Whether this source is a curated catalog entry. Catalog sources are managed
              by platform engineers and may be the only sources available to developers
              if the organization enforces catalog-only policy.
          terraformRegistry:
            $ref: '#/definitions/v1TerraformRegistryConfig'
            description: Terraform Registry Protocol config (for SOURCE_TYPE_TERRAFORM_REGISTRY).
          terraformGit:
            $ref: '#/definitions/v1TerraformGitConfig'
            description: Terraform Git module config (for SOURCE_TYPE_TERRAFORM_GIT).
          helmRepository:
            $ref: '#/definitions/v1HelmRepositoryConfig'
            description: Helm HTTP repository config (for SOURCE_TYPE_HELM_REPOSITORY).
          helmOci:
            $ref: '#/definitions/v1HelmOCIConfig'
            description: Helm OCI config (for SOURCE_TYPE_HELM_OCI).
          helmGit:
            $ref: '#/definitions/v1HelmGitConfig'
            description: Helm Git config (for SOURCE_TYPE_HELM_GIT).
          kustomizeGit:
            $ref: '#/definitions/v1KustomizeGitConfig'
            description: Kustomize Git config (for SOURCE_TYPE_KUSTOMIZE_GIT).
          manifestGit:
            $ref: '#/definitions/v1ManifestGitConfig'
            description: Raw manifest Git config (for SOURCE_TYPE_MANIFEST_GIT).
          archive:
            $ref: '#/definitions/v1ArchiveConfig'
            description: Archive config (for SOURCE_TYPE_ARCHIVE).
          labels:
            type: object
            additionalProperties:
              type: string
            description: |-
              Arbitrary key-value labels for organizing and filtering sources
              (e.g., `{"team": "platform", "category": "database"}`).
          createdBy:
            type: string
            description: User ID who created this source (UUID, server-populated from token).
          updatedBy:
            type: string
            description: User ID who last updated this source (UUID, server-populated from token).
          lastSyncedAt:
            type: string
            format: date-time
            description: |-
              When the source metadata was last synced from the external system
              (registry, Git, Helm repo). Updated by SyncSource and by automatic
              background refresh when discovery RPCs encounter stale cached data.
              Absent if no sync has occurred yet.
          createdAt:
            type: string
            format: date-time
            description: When the source was created.
          updatedAt:
            type: string
            format: date-time
            description: When the source was last updated.
        description: |-
          The source with updated fields. The `id` field is required.
          Only fields specified in `update_mask` are updated.
      updateMask:
        type: string
        description: |-
          The set of fields to update. If unset, all mutable fields are updated.
          Supported fields: `name`, `description`, `url`, `connection_id`, `catalog`,
          `source_config`, `labels`.
    description: UpdateSourceRequest contains the source fields to update.
  StateAPIForceUnlockStateBody:
    type: object
    properties:
      reason:
        type: string
        description: |-
          Reason for force-unlocking (audited). Recommended to provide context
          for why the lock is being broken (e.g., "runner crashed during apply").
    description: ForceUnlockStateRequest identifies a state to force-unlock.
  StateAPILockStateBody:
    type: object
    properties:
      lockId:
        type: string
        description: Terraform-generated lock ID (UUID).
      operation:
        type: string
        description: The Terraform operation requesting the lock.
      who:
        type: string
        description: Identifier of who is requesting the lock.
      version:
        type: string
        description: Terraform/OpenTofu version of the client requesting the lock.
    description: LockStateRequest acquires an exclusive lock on the job's state.
  StateAPIPushStateBody:
    type: object
    properties:
      data:
        type: string
        format: byte
        description: The raw Terraform state data (JSON-encoded). Maximum 64 MiB.
      md5:
        type: string
        description: MD5 hash of the state data.
      serial:
        type: string
        format: int64
        description: Terraform state serial number. Must be greater than the current serial.
      lineage:
        type: string
        description: |-
          Terraform state lineage. Must match the existing lineage if the state
          record already exists.
    description: PushStateRequest stores a new state version.
  StateAPIUnlockStateBody:
    type: object
    properties:
      lockId:
        type: string
        description: The lock_id to release (UUID). Must match the currently held lock.
    description: UnlockStateRequest releases the lock on the job's state.
  UserAPIRevokePersonalAccessTokenBody:
    type: object
    description: RevokePersonalAccessTokenRequest identifies a PAT to revoke.
  VariableAPIUpdateVariableBody:
    type: object
    properties:
      variable:
        type: object
        properties:
          tenantId:
            type: string
            description: Tenant this variable belongs to (UUID).
          key:
            type: string
            description: |-
              The variable name. Must be a valid environment variable identifier
              (e.g., "DATABASE_URL", "API_KEY"). Alphanumeric and underscores
              (uppercase conventional but lowercase accepted), must start with a letter
              or underscore (max 255 chars).
          value:
            type: string
            description: |-
              The variable value. Always stored as a string — use `type` to indicate
              how to interpret it. Masked or empty for sensitive variables in responses.

              For COMPLEX type, this is a JSON-encoded string (e.g., '["a","b"]' or
              '{"key":"value"}'). The rendering engine converts it to the target format
              (HCL for Terraform, YAML for Helm).
          sensitive:
            type: boolean
            description: Whether the variable value is encrypted at rest and masked in API responses.
          type:
            $ref: '#/definitions/v1VariableType'
            description: |-
              How the value should be interpreted by the rendering engine and displayed
              in the UI. Defaults to STRING if not specified.
          description:
            type: string
            description: |-
              Optional description of the variable's purpose (e.g., "Maximum replica
              count for production scaling" or "RDS instance class per environment").
          applicationId:
            type: string
            description: |-
              The application this variable is scoped to (UUID). When set, the variable
              is scoped to this application. When both application_id and environment_id
              are set, the variable is scoped to that specific environment.
              Absent means the variable is global (tenant-wide).
          environmentId:
            type: string
            description: |-
              The environment this variable is scoped to (UUID). Requires application_id.
              When set alongside application_id, the variable applies only to this
              specific environment within the application.
          createdBy:
            type: string
            description: User ID who created this variable (UUID, server-populated from token).
          updatedBy:
            type: string
            description: User ID who last updated this variable (UUID, server-populated from token).
          createdAt:
            type: string
            format: date-time
            description: When the variable was created.
          updatedAt:
            type: string
            format: date-time
            description: When the variable was last updated.
        description: |-
          The variable with updated fields. The `id` field is required.
          Only fields specified in `update_mask` are updated.
      updateMask:
        type: string
        description: |-
          The set of fields to update. If unset, all mutable fields are updated.
          Supported fields: `value`, `sensitive`, `type`, `description`.
    description: UpdateVariableRequest contains the variable fields to update.
  protobufAny:
    type: object
    properties:
      '@type':
        type: string
        description: |-
          A URL/resource name that uniquely identifies the type of the serialized
          protocol buffer message. This string must contain at least
          one "/" character. The last segment of the URL's path must represent
          the fully qualified name of the type (as in
          `path/google.protobuf.Duration`). The name should be in a canonical form
          (e.g., leading "." is not accepted).

          In practice, teams usually precompile into the binary all types that they
          expect it to use in the context of Any. However, for URLs which use the
          scheme `http`, `https`, or no scheme, one can optionally set up a type
          server that maps type URLs to message definitions as follows:

          * If no scheme is provided, `https` is assumed.
          * An HTTP GET on the URL must yield a [google.protobuf.Type][]
            value in binary format, or produce an error.
          * Applications are allowed to cache lookup results based on the
            URL, or have them precompiled into a binary to avoid any
            lookup. Therefore, binary compatibility needs to be preserved
            on changes to types. (Use versioned type names to manage
            breaking changes.)

          Note: this functionality is not currently available in the official
          protobuf release, and it is not used for type URLs beginning with
          type.googleapis.com. As of May 2023, there are no widely used type server
          implementations and no plans to implement one.

          Schemes other than `http`, `https` (or the empty scheme) might be
          used with implementation specific semantics.
    additionalProperties: {}
    description: |-
      `Any` contains an arbitrary serialized protocol buffer message along with a
      URL that describes the type of the serialized message.

      Protobuf library provides support to pack/unpack Any values in the form
      of utility functions or additional generated methods of the Any type.

      Example 1: Pack and unpack a message in C++.

          Foo foo = ...;
          Any any;
          any.PackFrom(foo);
          ...
          if (any.UnpackTo(&foo)) {
            ...
          }

      Example 2: Pack and unpack a message in Java.

          Foo foo = ...;
          Any any = Any.pack(foo);
          ...
          if (any.is(Foo.class)) {
            foo = any.unpack(Foo.class);
          }
          // or ...
          if (any.isSameTypeAs(Foo.getDefaultInstance())) {
            foo = any.unpack(Foo.getDefaultInstance());
          }

       Example 3: Pack and unpack a message in Python.

          foo = Foo(...)
          any = Any()
          any.Pack(foo)
          ...
          if any.Is(Foo.DESCRIPTOR):
            any.Unpack(foo)
            ...

       Example 4: Pack and unpack a message in Go

           foo := &pb.Foo{...}
           any, err := anypb.New(foo)
           if err != nil {
             ...
           }
           ...
           foo := &pb.Foo{}
           if err := any.UnmarshalTo(foo); err != nil {
             ...
           }

      The pack methods provided by protobuf library will by default use
      'type.googleapis.com/full.type.name' as the type URL and the unpack
      methods only use the fully qualified type name after the last '/'
      in the type URL, for example "foo.bar.com/x/y.z" will yield type
      name "y.z".

      JSON
      ====
      The JSON representation of an `Any` value uses the regular
      representation of the deserialized, embedded message, with an
      additional field `@type` which contains the type URL. Example:

          package google.profile;
          message Person {
            string first_name = 1;
            string last_name = 2;
          }

          {
            "@type": "type.googleapis.com/google.profile.Person",
            "firstName": <string>,
            "lastName": <string>
          }

      If the embedded message type is well-known and has a custom JSON
      representation, that representation will be embedded adding a field
      `value` which holds the custom JSON in addition to the `@type`
      field. Example (for message [google.protobuf.Duration][]):

          {
            "@type": "type.googleapis.com/google.protobuf.Duration",
            "value": "1.212s"
          }
  rpcStatus:
    type: object
    properties:
      code:
        type: integer
        format: int32
      message:
        type: string
      details:
        type: array
        items:
          type: object
          $ref: '#/definitions/protobufAny'
  v1AWSFederationConfig:
    type: object
    properties:
      roleArn:
        type: string
        description: The ARN of the IAM Role to assume (e.g., "arn:aws:iam::123456789012:role/admiral-ecr").
      externalId:
        type: string
        description: Optional external ID for additional assume-role protection.
      region:
        type: string
        description: AWS region for regional service endpoints (e.g., "us-east-1").
    description: |-
      AWSFederationConfig holds the IAM role configuration for OIDC-based
      authentication to AWS services (ECR, S3, Terraform provider).

      Setup: Create an IAM Role with a trust policy that accepts Admiral's OIDC
      issuer (https://oidc.admiral.io) and conditions on the `tenant_id` claim
      matching your Admiral tenant.
  v1AWSStaticAuth:
    type: object
    properties:
      accessKeyId:
        type: string
        description: AWS access key ID.
      secretAccessKey:
        type: string
        description: |-
          AWS secret access key.
          Write-only: masked in responses.
      region:
        type: string
        description: AWS region for regional service endpoints.
    description: |-
      AWSStaticAuth holds static AWS credentials. Prefer AWSFederationConfig
      (OIDC) instead. Static credentials require manual rotation and present a
      security risk if compromised.
  v1AccessToken:
    type: object
    properties:
      id:
        type: string
        description: Unique identifier for the token (UUID).
      tenantId:
        type: string
        description: Tenant this token belongs to (UUID).
      name:
        type: string
        description: |-
          URL-safe, human-readable identifier for the token (e.g., "ci-deploy-key").
          Unique within the parent resource. Lowercase alphanumeric and hyphens only,
          must start with a letter and end with an alphanumeric character (1-63 chars).
      tokenType:
        $ref: '#/definitions/v1TokenType'
        description: The category of this token.
      scopes:
        type: array
        items:
          type: string
        description: |-
          The scopes granted to this token. For PATs, these are user-selected.
          For AGTs, these are auto-assigned based on the resource type.
      status:
        $ref: '#/definitions/v1AccessTokenStatus'
        description: Current lifecycle status of the token.
      bindingType:
        $ref: '#/definitions/v1BindingType'
        description: The kind of resource this token is bound to.
      bindingId:
        type: string
        description: The ID of the resource this token is bound to (UUID).
      createdBy:
        type: string
        description: |-
          The user who created this token (UUID). For PATs, this is the token owner.
          For AGTs, this is the administrator who issued the token.
      expiresAt:
        type: string
        format: date-time
        description: When the token expires. If unset, the token does not expire.
      lastUsedAt:
        type: string
        format: date-time
        description: When the token was last used to authenticate an API request.
      createdAt:
        type: string
        format: date-time
        description: When the token was created.
      revokedAt:
        type: string
        format: date-time
        description: When the token was revoked. Only set when status is REVOKED.
    description: |-
      AccessToken contains token metadata common to all token types (PAT, AGT).
      The raw token secret is never included in this message — it is only returned
      once at creation time via the `plain_text_token` field in Create responses.

      Token CRUD is managed by each parent resource's API:
        - PATs:         UserAPI    (/v1/user/tokens)
        - Cluster AGTs: ClusterAPI (/v1/clusters/{id}/tokens)
        - Runner AGTs:  RunnerAPI  (/v1/runners/{id}/tokens)
  v1AccessTokenStatus:
    type: string
    enum:
      - ACCESS_TOKEN_STATUS_UNSPECIFIED
      - ACCESS_TOKEN_STATUS_ACTIVE
      - ACCESS_TOKEN_STATUS_REVOKED
      - ACCESS_TOKEN_STATUS_ROTATING
    default: ACCESS_TOKEN_STATUS_UNSPECIFIED
    description: |-
      AccessTokenStatus represents the lifecycle state of an access token.

       - ACCESS_TOKEN_STATUS_UNSPECIFIED: Default value. Must not be used.
       - ACCESS_TOKEN_STATUS_ACTIVE: The token is valid and can be used for authentication.
       - ACCESS_TOKEN_STATUS_REVOKED: The token has been permanently revoked and cannot be used.
       - ACCESS_TOKEN_STATUS_ROTATING: The token is being rotated. Both old and new tokens are valid
      until the grace period expires.
  v1ActiveJobInfo:
    type: object
    properties:
      jobId:
        type: string
        description: The job being executed (UUID).
      phase:
        $ref: '#/definitions/v1JobPhase'
        description: Current execution phase reported by the worker thread.
      startedAt:
        type: string
        format: date-time
        description: When execution of this job started (when the runner claimed it).
    description: |-
      ActiveJobInfo summarizes a job currently being executed by a runner instance.
      Included in RunnerStatus to provide real-time job progress via heartbeat.
  v1Application:
    type: object
    properties:
      id:
        type: string
        description: Unique identifier for the application (UUID).
      tenantId:
        type: string
        description: Tenant this application belongs to (UUID).
      name:
        type: string
        description: |-
          URL-safe, human-readable identifier (e.g., "billing-api"). Unique within
          the tenant. Lowercase alphanumeric and hyphens only, must start with a
          letter and end with an alphanumeric character (1-63 chars).
      description:
        type: string
        description: |-
          Optional longer-form description of the application's purpose
          (e.g., "Handles invoice generation and payment processing").
      labels:
        type: object
        additionalProperties:
          type: string
        description: |-
          Arbitrary key-value labels for organizing and filtering applications
          (e.g., `{"team": "payments", "tier": "critical"}`).
      createdBy:
        type: string
        description: User ID who created this application (UUID, server-populated from token).
      updatedBy:
        type: string
        description: User ID who last updated this application (UUID, server-populated from token).
      createdAt:
        type: string
        format: date-time
        description: When the application was created.
      updatedAt:
        type: string
        format: date-time
        description: When the application was last updated.
    description: |-
      Application represents a deployable unit within a tenant. An application
      groups manifests, dependencies, and environment configuration into a single
      entity that Admiral orchestrates across environments.
  v1ArchiveConfig:
    type: object
    properties:
      path:
        type: string
        description: Subdirectory within the extracted archive to use. Empty means archive root.
      checksum:
        type: string
        description: |-
          Expected checksum for integrity verification (e.g., "sha256:abc123...").
          When set, the fetched archive is verified against this checksum before
          extraction.
    description: |-
      ArchiveConfig provides additional parameters for archive sources
      (tar.gz, zip) fetched via HTTP, S3, or GCS.
  v1AzureFederationConfig:
    type: object
    properties:
      azureTenantId:
        type: string
        description: Azure AD tenant ID (directory ID).
      clientId:
        type: string
        description: Application (client) ID of the Azure AD app registration.
    description: |-
      AzureFederationConfig holds the federated credential configuration for
      OIDC-based authentication to Azure services (ACR, Terraform).

      Setup: Create a Federated Identity Credential on your Azure AD app
      registration that trusts Admiral's OIDC issuer with your tenant_id claim.
  v1AzureStaticAuth:
    type: object
    properties:
      azureTenantId:
        type: string
        description: Azure AD tenant ID (directory ID).
      clientId:
        type: string
        description: Application (client) ID.
      clientSecret:
        type: string
        description: |-
          Client secret.
          Write-only: masked in responses.
    description: |-
      AzureStaticAuth holds static Azure service principal credentials. Prefer
      AzureFederationConfig (Federated Credential) instead.
  v1BasicAuth:
    type: object
    properties:
      username:
        type: string
        description: Username for authentication.
      password:
        type: string
        description: |-
          Password or token for authentication.
          Write-only: masked in responses.
    description: |-
      BasicAuth holds username/password credentials for OCI registries and other
      systems that use basic authentication.
  v1BearerTokenAuth:
    type: object
    properties:
      token:
        type: string
        description: |-
          Bearer token value.
          Write-only: masked in responses.
    description: |-
      BearerTokenAuth holds a bearer token for systems that use token-based
      authentication (e.g., private Terraform registries).
  v1BindingType:
    type: string
    enum:
      - BINDING_TYPE_UNSPECIFIED
      - BINDING_TYPE_USER
      - BINDING_TYPE_CLUSTER
      - BINDING_TYPE_RUNNER
    default: BINDING_TYPE_UNSPECIFIED
    description: |-
      BindingType identifies the kind of resource an access token is bound to.

       - BINDING_TYPE_UNSPECIFIED: Default value. Must not be used.
       - BINDING_TYPE_USER: Token is bound to a user (PATs).
       - BINDING_TYPE_CLUSTER: Token is bound to a cluster (AGTs).
       - BINDING_TYPE_RUNNER: Token is bound to a runner (AGTs).
  v1CancelDeploymentResponse:
    type: object
    properties:
      deployment:
        $ref: '#/definitions/v1Deployment'
        description: The cancelled deployment.
    description: CancelDeploymentResponse contains the updated deployment.
  v1ClaimJobRequest:
    type: object
    description: |-
      ClaimJobRequest is sent by the runner to poll for available work.
      The runner is identified by the AGT's binding — no runner_id is required.
  v1ClaimJobResponse:
    type: object
    properties:
      job:
        $ref: '#/definitions/v1Job'
        description: |-
          The job to execute. Absent if no work is available — the runner should
          wait and poll again after its configured interval.
    description: ClaimJobResponse contains the next job to execute, if any.
  v1Cluster:
    type: object
    properties:
      id:
        type: string
        description: Unique identifier for the cluster (UUID).
      tenantId:
        type: string
        description: Tenant this cluster belongs to (UUID).
      name:
        type: string
        description: |-
          URL-safe, human-readable identifier (e.g., "prod-us-east-1"). Unique
          within the tenant. Lowercase alphanumeric and hyphens only, must start
          with a letter and end with an alphanumeric character (1-63 chars).
      description:
        type: string
        description: |-
          Optional longer-form description of the cluster's purpose
          (e.g., "Primary production cluster serving US East traffic").
      labels:
        type: object
        additionalProperties:
          type: string
        description: |-
          Arbitrary key-value labels for organizing and filtering clusters
          (e.g., `{"region": "us-east-1", "cloud": "aws"}`).
      clusterUid:
        type: string
        description: |-
          The Kubernetes kube-system namespace UID, bound at agent registration
          using a first-write-wins strategy. Used to detect when a token is
          accidentally deployed to a different physical cluster.
      healthStatus:
        $ref: '#/definitions/v1ClusterHealthStatus'
        description: Derived health status based on agent connectivity and workload state.
      createdBy:
        type: string
        description: User ID who created this cluster (UUID, server-populated from token).
      updatedBy:
        type: string
        description: User ID who last updated this cluster (UUID, server-populated from token).
      createdAt:
        type: string
        format: date-time
        description: When the cluster record was created.
      updatedAt:
        type: string
        format: date-time
        description: When the cluster record was last updated.
    description: Cluster represents a registered Kubernetes cluster within a tenant.
  v1ClusterHealthStatus:
    type: string
    enum:
      - CLUSTER_HEALTH_STATUS_UNSPECIFIED
      - CLUSTER_HEALTH_STATUS_PENDING
      - CLUSTER_HEALTH_STATUS_HEALTHY
      - CLUSTER_HEALTH_STATUS_DEGRADED
      - CLUSTER_HEALTH_STATUS_ERROR
      - CLUSTER_HEALTH_STATUS_UNREACHABLE
    default: CLUSTER_HEALTH_STATUS_UNSPECIFIED
    description: |-
      ClusterHealthStatus represents the derived health state of a cluster.
      The status is computed from agent connectivity, node readiness, and workload health.

       - CLUSTER_HEALTH_STATUS_UNSPECIFIED: Default value. Must not be used.
       - CLUSTER_HEALTH_STATUS_PENDING: Cluster record exists but no agent has registered yet.
       - CLUSTER_HEALTH_STATUS_HEALTHY: Agent connected, all nodes ready, less than 10% workloads degraded.
       - CLUSTER_HEALTH_STATUS_DEGRADED: Agent connected, some nodes not ready or workloads in error/degraded state.
       - CLUSTER_HEALTH_STATUS_ERROR: Agent connected, more than 25% nodes not ready or workloads in error state.
       - CLUSTER_HEALTH_STATUS_UNREACHABLE: No heartbeat received within 3x the heartbeat interval.
  v1ClusterStatus:
    type: object
    properties:
      k8sVersion:
        type: string
        description: Kubernetes version reported by the agent (e.g., "1.29.2").
      nodeCount:
        type: integer
        format: int32
        description: Total number of nodes in the cluster.
      nodesReady:
        type: integer
        format: int32
        description: Number of nodes in Ready condition.
      podCapacity:
        type: integer
        format: int32
        description: Maximum number of pods the cluster can schedule.
      podCount:
        type: integer
        format: int32
        description: Total number of pods across all namespaces.
      podsRunning:
        type: integer
        format: int32
        description: Number of pods in Running phase.
      podsPending:
        type: integer
        format: int32
        description: Number of pods in Pending phase.
      podsFailed:
        type: integer
        format: int32
        description: Number of pods in Failed phase.
      cpuCapacityMillicores:
        type: string
        format: int64
        description: Total CPU capacity across all nodes, in millicores.
      cpuUsedMillicores:
        type: string
        format: int64
        description: Current CPU usage across all nodes, in millicores.
      memoryCapacityBytes:
        type: string
        format: int64
        description: Total memory capacity across all nodes, in bytes.
      memoryUsedBytes:
        type: string
        format: int64
        description: Current memory usage across all nodes, in bytes.
      workloadsTotal:
        type: integer
        format: int32
        description: Total number of tracked workloads.
      workloadsHealthy:
        type: integer
        format: int32
        description: Number of workloads in healthy state.
      workloadsDegraded:
        type: integer
        format: int32
        description: Number of workloads in degraded state.
      workloadsError:
        type: integer
        format: int32
        description: Number of workloads in error state.
    description: |-
      ClusterStatus contains the raw telemetry metrics for a cluster, as reported
      by the K8s agent. This message is used in both the push payload
      (ReportClusterStatusRequest) and the read response (GetClusterStatusResponse).

      Server-derived fields (health_status, agent connectivity) are NOT included
      here — they live on the Cluster and Agent records respectively, and are
      returned alongside this message in GetClusterStatusResponse.
  v1Component:
    type: object
    properties:
      id:
        type: string
        description: Unique identifier for the component (UUID).
      applicationId:
        type: string
        description: The application this component belongs to (UUID).
      name:
        type: string
        description: |-
          Human-readable name for this component within the application
          (e.g., "vpc", "redis", "api-server"). Unique within the application.
          Lowercase alphanumeric and hyphens only (1-63 chars). This name is used
          in template expressions: `{{ .component.<name>.<output> }}`.
      description:
        type: string
        description: |-
          Optional description of the component's purpose
          (e.g., "Primary VPC for all environments" or "Redis cache layer").
      category:
        $ref: '#/definitions/v1ComponentCategory'
        description: |-
          Whether this is an infrastructure or workload component. Derived from
          the source type when the component is created, but stored explicitly
          for filtering and to determine execution behavior.
      sourceId:
        type: string
        description: |-
          The source artifact this component deploys (UUID). References a Source
          defined via the SourceAPI.
      version:
        type: string
        description: |-
          Pinned version of the source artifact. For registry sources, a semver
          string (e.g., "1.2.3"). For Git sources, a tag, branch, or commit SHA.
          Required — components always pin a version. Use UpdateComponent to
          change the version (rolling update).
      valuesTemplate:
        type: string
        description: |-
          Values template that maps configuration into the source's expected inputs.
          This is a JSON-encoded object where keys are the source input names and
          values are either literal values or template expressions.

          Template expressions can reference:
            - Variables: `{{ .var.DATABASE_URL }}`
            - Component outputs: `{{ .component.vpc.vpc_id }}`
            - Environment metadata: `{{ .env.name }}`

          Example for a Terraform RDS module:
            {
              "vpc_id": "{{ .component.vpc.vpc_id }}",
              "subnet_ids": "{{ .component.vpc.private_subnet_ids }}",
              "instance_class": "{{ .var.RDS_INSTANCE_CLASS }}",
              "engine_version": "15.4"
            }

          Example for a Helm chart:
            {
              "replicaCount": "{{ .var.REPLICA_COUNT }}",
              "image.repository": "myorg/api-server",
              "image.tag": "{{ .var.IMAGE_TAG }}"
            }

          The rendering engine resolves all expressions at deployment time using
          the environment's variables and the outputs of upstream components.
      dependsOn:
        type: array
        items:
          type: string
        description: |-
          Component IDs that must complete successfully before this component can
          be deployed (UUIDs). Must reference components within the same
          application. The deployment engine uses these, combined with implicit
          dependencies from template expressions, to build the execution DAG.

          Explicit depends_on is useful when there is a deployment-order dependency
          that is not captured by output references (e.g., cert-manager must be
          installed before any workload that uses TLS certificates).
      outputs:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1ComponentOutput'
        description: |-
          Declared outputs for this component. For infrastructure components
          (Terraform), outputs are auto-discovered from the module and this field
          is ignored. For workload components, outputs must be declared here to
          be available for template expressions in other components.

          See ComponentOutput for examples.
      disabled:
        type: boolean
        description: |-
          Whether this component is disabled in the resolved environment context.
          Always false on the application-level component. Set to true when
          ListComponents is called with an environment_id and the component has
          a disabled override for that environment.
      hasOverride:
        type: boolean
        description: |-
          Whether any field on this component has been overridden in the resolved
          environment context. Always false when ListComponents is called without
          an environment_id.
      createdBy:
        type: string
        description: User ID who created this component (UUID, server-populated from token).
      updatedBy:
        type: string
        description: User ID who last updated this component (UUID, server-populated from token).
      createdAt:
        type: string
        format: date-time
        description: When the component was created.
      updatedAt:
        type: string
        format: date-time
        description: When the component was last updated.
    description: |-
      Component represents a named, deployable unit within an application. It
      binds a source artifact to an application with configuration (values
      template) that maps variables and other component outputs into the source's
      expected inputs.

      Components are the nodes in Admiral's dependency graph. Infrastructure
      components produce auto-discovered outputs (Terraform outputs). Workload
      components declare outputs explicitly. Other components consume these via
      template expressions. The deployment engine resolves this DAG to determine
      execution order.
  v1ComponentCategory:
    type: string
    enum:
      - COMPONENT_CATEGORY_UNSPECIFIED
      - COMPONENT_CATEGORY_INFRASTRUCTURE
      - COMPONENT_CATEGORY_WORKLOAD
    default: COMPONENT_CATEGORY_UNSPECIFIED
    description: |-
      ComponentCategory indicates whether the component provisions infrastructure
      or deploys workloads. This is derived from the source type but stored
      explicitly for filtering and to determine rendering and execution behavior.

       - COMPONENT_CATEGORY_UNSPECIFIED: Default value. Must not be used.
       - COMPONENT_CATEGORY_INFRASTRUCTURE: Infrastructure component backed by a Terraform source. Follows the
      plan → approve → apply lifecycle. Produces outputs that are
      auto-discovered from the Terraform module's output blocks. Each
      component gets its own Terraform state.
       - COMPONENT_CATEGORY_WORKLOAD: Workload component backed by a Kubernetes source (Helm, Kustomize, raw
      manifests). Applied to the target cluster via the K8s agent. CRD ordering
      is handled within the rendered bundle. Outputs must be declared explicitly
      via the component's `outputs` field.
  v1ComponentOutput:
    type: object
    properties:
      name:
        type: string
        description: |-
          Output name used in template references. Must be a valid identifier
          (lowercase alphanumeric and underscores, e.g., "service_host",
          "connection_string"). Other components reference this as
          `{{ .component.<component_name>.<output_name> }}`.
      valueTemplate:
        type: string
        description: |-
          Template expression that resolves to the output value after deployment.
          Can reference environment metadata and the component's own release info.

          Examples:
            "{{ .release.name }}-redis-master.{{ .env.namespace }}.svc.cluster.local"
            "{{ .release.name }}-redis:6379"
            "http://{{ .release.name }}-grafana.{{ .env.namespace }}:3000"
      description:
        type: string
        description: Optional description of the output's purpose.
    description: |-
      ComponentOutput declares a named output value produced by a component.

      For infrastructure components (Terraform), outputs are auto-discovered from
      the module's output blocks and this field is ignored — do not declare
      outputs manually for Terraform components.

      For workload components (Helm, Kustomize, manifests), outputs must be
      declared explicitly here to make them available for template expressions
      in other components (e.g., `{{ .component.cache.service_host }}`).

      Output values are template expressions resolved after the component is
      deployed. They typically reference well-known patterns from the deployed
      resources (e.g., Kubernetes service DNS names, ConfigMap keys).
  v1ComponentOverride:
    type: object
    properties:
      componentId:
        type: string
        description: The component this override applies to (UUID).
      environmentId:
        type: string
        description: The environment this override applies to (UUID).
      disabled:
        type: boolean
        description: |-
          When true, the component is not deployed in this environment.
          All other override fields are ignored when disabled.
      sourceId:
        type: string
        description: |-
          Override source for this environment (UUID). When set, this source is
          used instead of the component's default source. This may also change the
          component's effective category (e.g., switching from a Helm source to a
          Terraform source changes the component from workload to infrastructure
          in this environment).
      version:
        type: string
        description: |-
          Override version for this environment. When set, this version is used
          instead of the component's default version.
      valuesTemplate:
        type: string
        description: |-
          Override values template for this environment. When set, this template
          completely replaces the component's default values template — there is
          no merge.
      dependsOn:
        type: array
        items:
          type: string
        description: |-
          Override depends_on for this environment (component UUIDs). When set,
          replaces the component's default depends_on list for this environment.
      outputs:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1ComponentOutput'
        description: |-
          Override outputs for this environment. When set, replaces the component's
          declared outputs. Useful when an override changes the source type
          (e.g., Helm → Terraform) and the output templates need to change.
      createdBy:
        type: string
        description: User ID who created this override (UUID, server-populated from token).
      updatedBy:
        type: string
        description: User ID who last updated this override (UUID, server-populated from token).
      createdAt:
        type: string
        format: date-time
        description: When the override was created.
      updatedAt:
        type: string
        format: date-time
        description: When the override was last updated.
    description: |-
      ComponentOverride provides environment-level customization for a component.
      When an override exists for a component + environment combination, the
      override fields take precedence over the application-level component
      defaults during deployment.

      This enables patterns like:
        - Different sources per environment (Helm Redis in dev, Terraform
          ElastiCache in prod)
        - Different versions per environment (canary version in staging)
        - Different values per environment (smaller instance in dev)
        - Disabling a component in certain environments
  v1Connection:
    type: object
    properties:
      id:
        type: string
        description: Unique identifier for the connection (UUID).
      tenantId:
        type: string
        description: Tenant this connection belongs to (UUID).
      name:
        type: string
        description: |-
          URL-safe, human-readable identifier (e.g., "github-org", "ecr-prod").
          Unique within the tenant. Lowercase alphanumeric and hyphens only, must
          start with a letter and end with an alphanumeric character (1-63 chars).
      description:
        type: string
        description: |-
          Optional longer-form description of what this connection is for
          (e.g., "Read-only access to the platform team's GitHub org").
      type:
        $ref: '#/definitions/v1ConnectionType'
        description: The type of external system and authentication mechanism.
      gitToken:
        $ref: '#/definitions/v1GitTokenAuth'
        description: Git HTTPS token (for CONNECTION_TYPE_GIT_TOKEN).
      gitSsh:
        $ref: '#/definitions/v1GitSSHAuth'
        description: Git SSH key (for CONNECTION_TYPE_GIT_SSH).
      gitGithubApp:
        $ref: '#/definitions/v1GitHubAppAuth'
        description: GitHub App credentials (for CONNECTION_TYPE_GIT_GITHUB_APP).
      helmHttp:
        $ref: '#/definitions/v1HelmHTTPAuth'
        description: Helm HTTP basic auth (for CONNECTION_TYPE_HELM_HTTP).
      ociBasic:
        $ref: '#/definitions/v1BasicAuth'
        description: OCI registry basic auth (for CONNECTION_TYPE_OCI_BASIC).
      awsFederation:
        $ref: '#/definitions/v1AWSFederationConfig'
        description: AWS OIDC federation (for CONNECTION_TYPE_CLOUD_AWS).
      gcpFederation:
        $ref: '#/definitions/v1GCPFederationConfig'
        description: GCP Workload Identity (for CONNECTION_TYPE_CLOUD_GCP).
      azureFederation:
        $ref: '#/definitions/v1AzureFederationConfig'
        description: Azure Federated Credential (for CONNECTION_TYPE_CLOUD_AZURE).
      awsStatic:
        $ref: '#/definitions/v1AWSStaticAuth'
        description: AWS static credentials (for CONNECTION_TYPE_CLOUD_AWS_STATIC, deprecated).
      gcpStatic:
        $ref: '#/definitions/v1GCPStaticAuth'
        description: GCP static credentials (for CONNECTION_TYPE_CLOUD_GCP_STATIC, deprecated).
      azureStatic:
        $ref: '#/definitions/v1AzureStaticAuth'
        description: Azure static credentials (for CONNECTION_TYPE_CLOUD_AZURE_STATIC, deprecated).
      bearerToken:
        $ref: '#/definitions/v1BearerTokenAuth'
        description: Bearer token (for CONNECTION_TYPE_TERRAFORM_REGISTRY).
      status:
        $ref: '#/definitions/v1ConnectionStatus'
        description: Current health status of the connection's credentials.
      statusMessage:
        type: string
        description: |-
          Human-readable message when status is ERROR (e.g., "401 Unauthorized:
          token expired"). Empty when status is ACTIVE or UNTESTED.
      labels:
        type: object
        additionalProperties:
          type: string
        description: |-
          Arbitrary key-value labels for organizing and filtering connections
          (e.g., `{"team": "platform", "environment": "prod"}`).
      createdBy:
        type: string
        description: User ID who created this connection (UUID, server-populated from token).
      updatedBy:
        type: string
        description: User ID who last updated this connection (UUID, server-populated from token).
      createdAt:
        type: string
        format: date-time
        description: When the connection was created.
      updatedAt:
        type: string
        format: date-time
        description: When the connection was last updated.
      lastTestedAt:
        type: string
        format: date-time
        description: |-
          When the connection was last tested (via TestConnection or auto-validation).
          Absent if never tested.
    description: |-
      Connection represents stored credentials for accessing an external system.
      Connections are tenant-scoped and referenced by sources when fetching artifacts.

      Sensitive fields within auth_config are write-only — they are accepted on
      create and update but never returned in API responses.
  v1ConnectionStatus:
    type: string
    enum:
      - CONNECTION_STATUS_UNSPECIFIED
      - CONNECTION_STATUS_ACTIVE
      - CONNECTION_STATUS_ERROR
      - CONNECTION_STATUS_UNTESTED
    default: CONNECTION_STATUS_UNSPECIFIED
    description: |-
      ConnectionStatus represents the health state of a connection's credentials.

       - CONNECTION_STATUS_UNSPECIFIED: Default value. Must not be used.
       - CONNECTION_STATUS_ACTIVE: Connection has been tested and credentials are valid.
       - CONNECTION_STATUS_ERROR: Connection has been tested and the test failed (invalid credentials,
      unreachable endpoint, etc.). See status_message for details.
       - CONNECTION_STATUS_UNTESTED: Connection has never been tested. Created but not yet validated.
  v1ConnectionType:
    type: string
    enum:
      - CONNECTION_TYPE_UNSPECIFIED
      - CONNECTION_TYPE_GIT_TOKEN
      - CONNECTION_TYPE_GIT_SSH
      - CONNECTION_TYPE_GIT_GITHUB_APP
      - CONNECTION_TYPE_HELM_HTTP
      - CONNECTION_TYPE_OCI_BASIC
      - CONNECTION_TYPE_CLOUD_AWS
      - CONNECTION_TYPE_CLOUD_GCP
      - CONNECTION_TYPE_CLOUD_AZURE
      - CONNECTION_TYPE_CLOUD_AWS_STATIC
      - CONNECTION_TYPE_CLOUD_GCP_STATIC
      - CONNECTION_TYPE_CLOUD_AZURE_STATIC
      - CONNECTION_TYPE_TERRAFORM_REGISTRY
      - CONNECTION_TYPE_S3
      - CONNECTION_TYPE_GCS
    default: CONNECTION_TYPE_UNSPECIFIED
    description: |-
      ConnectionType identifies the kind of external system and authentication
      mechanism a connection uses.

       - CONNECTION_TYPE_UNSPECIFIED: Default value. Must not be used.
       - CONNECTION_TYPE_GIT_TOKEN: HTTPS personal access token or OAuth token for Git operations.
       - CONNECTION_TYPE_GIT_SSH: SSH private key for Git operations.
       - CONNECTION_TYPE_GIT_GITHUB_APP: GitHub App credentials (app ID, installation ID, private key).
      Preferred over personal tokens for GitHub — provides granular permissions
      and a better audit trail.
       - CONNECTION_TYPE_HELM_HTTP: Basic auth (username + password) for classic HTTP/S Helm chart repositories.
       - CONNECTION_TYPE_OCI_BASIC: Username and password for OCI-compliant registries (Docker Hub, Harbor,
      GHCR, self-hosted registries).
       - CONNECTION_TYPE_CLOUD_AWS: AWS IAM Role via OIDC federation. Stores the Role ARN only.
      Used for ECR access and Terraform provider authentication.
       - CONNECTION_TYPE_CLOUD_GCP: GCP Workload Identity Federation. Stores project/pool/provider config only.
      Used for Artifact Registry / GCR access and Terraform provider authentication.
       - CONNECTION_TYPE_CLOUD_AZURE: Azure Federated Credential. Stores tenant ID and client ID only.
      Used for ACR access and Terraform provider authentication.
       - CONNECTION_TYPE_CLOUD_AWS_STATIC: AWS access key and secret key. Prefer CLOUD_AWS (OIDC) instead.
       - CONNECTION_TYPE_CLOUD_GCP_STATIC: GCP service account key JSON. Prefer CLOUD_GCP (OIDC) instead.
       - CONNECTION_TYPE_CLOUD_AZURE_STATIC: Azure service principal client secret. Prefer CLOUD_AZURE (OIDC) instead.
       - CONNECTION_TYPE_TERRAFORM_REGISTRY: Bearer token for private Terraform module registries (HCP Terraform,
      Terraform Enterprise, custom registries).
       - CONNECTION_TYPE_S3: AWS S3 credentials for fetching modules or archives from S3 buckets.
       - CONNECTION_TYPE_GCS: GCP Cloud Storage credentials for fetching modules or archives from GCS.
  v1ContainerStatus:
    type: object
    properties:
      name:
        type: string
        description: Container name within the pod spec.
      image:
        type: string
        description: Container image reference (e.g., "registry.example.com/api:v2.1.4").
      restartCount:
        type: integer
        format: int32
        description: Cumulative number of container restarts.
      state:
        type: string
        description: Current container state (e.g., "running", "waiting", "terminated").
      ready:
        type: boolean
        description: Whether the container's readiness probe is passing.
    description: ContainerStatus describes the current state of a single container.
  v1CreateApplicationRequest:
    type: object
    properties:
      name:
        type: string
        description: |-
          URL-safe, human-readable identifier (e.g., "billing-api"). Must be unique
          within the tenant. Lowercase alphanumeric and hyphens only.
      description:
        type: string
        description: Optional longer-form description of the application's purpose.
      labels:
        type: object
        additionalProperties:
          type: string
        description: Arbitrary key-value labels for organizing and filtering applications.
    description: CreateApplicationRequest contains the parameters for creating a new application.
  v1CreateApplicationResponse:
    type: object
    properties:
      application:
        $ref: '#/definitions/v1Application'
        description: The created application.
    description: CreateApplicationResponse contains the newly created application.
  v1CreateClusterRequest:
    type: object
    properties:
      name:
        type: string
        description: |-
          URL-safe, human-readable identifier (e.g., "prod-us-east-1"). Must be
          unique within the tenant. Lowercase alphanumeric and hyphens only.
      description:
        type: string
        description: Optional longer-form description of the cluster's purpose.
      labels:
        type: object
        additionalProperties:
          type: string
        description: |-
          Arbitrary key-value labels for organizing and filtering clusters
          (e.g., `{"region": "us-east-1", "cloud": "aws"}`).
    description: CreateClusterRequest contains the parameters for creating a new cluster.
  v1CreateClusterResponse:
    type: object
    properties:
      cluster:
        $ref: '#/definitions/v1Cluster'
        description: |-
          The created cluster. Health status will be PENDING until an agent connects
          and calls AgentAPI.RegisterAgent.
      plainTextToken:
        type: string
        description: |-
          The raw Agent Token secret (e.g., "adm_agt_pL2mN5oQ8rS1..."). This value
          is shown exactly once and cannot be retrieved again. Deploy this token to
          the K8s agent for authentication.

          To create additional tokens (e.g., for rotation), use
          CreateClusterToken (POST /v1/clusters/{cluster_id}/tokens).
    description: |-
      CreateClusterResponse contains the newly created cluster and its initial
      Agent Token (AGT).
  v1CreateClusterTokenResponse:
    type: object
    properties:
      accessToken:
        $ref: '#/definitions/v1AccessToken'
        description: The created token metadata. Scopes are auto-assigned for cluster AGTs.
      plainTextToken:
        type: string
        description: |-
          The raw token secret (e.g., "adm_agt_pL2mN5oQ8rS1..."). This value is
          shown exactly once and cannot be retrieved again. Store it securely.
    description: CreateClusterTokenResponse contains the newly created AGT.
  v1CreateComponentRequest:
    type: object
    properties:
      applicationId:
        type: string
        description: The application to add this component to (UUID).
      name:
        type: string
        description: |-
          Human-readable name for this component. Must be unique within the
          application. This name is used in template expressions.
      description:
        type: string
        description: Optional description of the component's purpose.
      sourceId:
        type: string
        description: The source artifact for this component (UUID).
      version:
        type: string
        description: Pinned version of the source artifact.
      valuesTemplate:
        type: string
        description: |-
          Values template mapping configuration into the source's inputs.
          See Component.values_template for template expression syntax.
      dependsOn:
        type: array
        items:
          type: string
        description: Explicit deployment-order dependencies (component UUIDs).
      outputs:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1ComponentOutput'
        description: |-
          Declared outputs for workload components.
          Ignored for infrastructure components (Terraform outputs are
          auto-discovered).
    description: |-
      CreateComponentRequest contains the parameters for adding a component to
      an application.
  v1CreateComponentResponse:
    type: object
    properties:
      component:
        $ref: '#/definitions/v1Component'
        description: The created component.
    description: CreateComponentResponse contains the newly created component.
  v1CreateConnectionRequest:
    type: object
    properties:
      name:
        type: string
        description: |-
          URL-safe, human-readable identifier (e.g., "github-org", "ecr-prod").
          Must be unique within the tenant.
      description:
        type: string
        description: Optional description of the connection's purpose.
      type:
        $ref: '#/definitions/v1ConnectionType'
        description: The type of external system and authentication mechanism.
      gitToken:
        $ref: '#/definitions/v1GitTokenAuth'
      gitSsh:
        $ref: '#/definitions/v1GitSSHAuth'
      gitGithubApp:
        $ref: '#/definitions/v1GitHubAppAuth'
      helmHttp:
        $ref: '#/definitions/v1HelmHTTPAuth'
      ociBasic:
        $ref: '#/definitions/v1BasicAuth'
      awsFederation:
        $ref: '#/definitions/v1AWSFederationConfig'
      gcpFederation:
        $ref: '#/definitions/v1GCPFederationConfig'
      azureFederation:
        $ref: '#/definitions/v1AzureFederationConfig'
      awsStatic:
        $ref: '#/definitions/v1AWSStaticAuth'
      gcpStatic:
        $ref: '#/definitions/v1GCPStaticAuth'
      azureStatic:
        $ref: '#/definitions/v1AzureStaticAuth'
      bearerToken:
        $ref: '#/definitions/v1BearerTokenAuth'
      labels:
        type: object
        additionalProperties:
          type: string
        description: Arbitrary key-value labels for organizing and filtering connections.
    description: CreateConnectionRequest contains the parameters for creating a new connection.
  v1CreateConnectionResponse:
    type: object
    properties:
      connection:
        $ref: '#/definitions/v1Connection'
        description: The created connection. Auth config sensitive fields are masked.
    description: CreateConnectionResponse contains the newly created connection.
  v1CreateDeploymentRequest:
    type: object
    properties:
      applicationId:
        type: string
        description: The application to deploy (UUID).
      environmentId:
        type: string
        description: The target environment (UUID).
      message:
        type: string
        description: Optional message describing this deployment.
      destroy:
        type: boolean
        description: |-
          Destroy all resources in the environment. Runs Terraform destroy for
          infra components and deletes workload resources from the cluster, in
          reverse dependency order. Required before deleting an environment that
          has active resources.
    description: CreateDeploymentRequest triggers a new deployment.
  v1CreateDeploymentResponse:
    type: object
    properties:
      deployment:
        $ref: '#/definitions/v1Deployment'
        description: The created deployment. Status will be PENDING initially.
    description: CreateDeploymentResponse contains the newly created deployment.
  v1CreateEnvironmentRequest:
    type: object
    properties:
      applicationId:
        type: string
        description: The application to create this environment for (UUID).
      name:
        type: string
        description: |-
          URL-safe, human-readable identifier (e.g., "prod", "staging-us-east").
          Must be unique within the application. Lowercase alphanumeric and hyphens only.
      description:
        type: string
        description: Optional longer-form description of the environment's purpose.
      runtimeType:
        $ref: '#/definitions/v1RuntimeType'
        description: |-
          The kind of runtime this environment targets. Optional — can be assigned
          later via UpdateEnvironment.
      kubernetes:
        $ref: '#/definitions/v1KubernetesConfig'
        description: Kubernetes-specific settings (cluster, namespace).
      labels:
        type: object
        additionalProperties:
          type: string
        description: Arbitrary key-value labels for organizing and filtering environments.
      infrastructure:
        $ref: '#/definitions/v1InfrastructureConfig'
        description: Infrastructure execution settings (runner assignment).
    description: CreateEnvironmentRequest contains the parameters for creating a new environment.
  v1CreateEnvironmentResponse:
    type: object
    properties:
      environment:
        $ref: '#/definitions/v1Environment'
        description: The created environment.
    description: CreateEnvironmentResponse contains the newly created environment.
  v1CreatePersonalAccessTokenRequest:
    type: object
    properties:
      name:
        type: string
        description: |-
          URL-safe, human-readable identifier for the token (e.g., "postman-testing").
          Must be unique per user within the tenant. Lowercase alphanumeric and
          hyphens only.
      scopes:
        type: array
        items:
          type: string
        description: |-
          The scopes to grant this token. Must be valid scopes allowed for PATs.
          The server enforces that issued scopes are a subset of the caller's own
          scopes — a token cannot grant more access than the user holds.
      expiresAt:
        type: string
        format: date-time
        description: |-
          Optional expiration time. If unset, the token does not expire.
          Tenant policies may enforce a maximum lifetime.
    description: CreatePersonalAccessTokenRequest contains the parameters for creating a new PAT.
  v1CreatePersonalAccessTokenResponse:
    type: object
    properties:
      accessToken:
        $ref: '#/definitions/v1AccessToken'
        description: The created token metadata.
      plainTextToken:
        type: string
        description: |-
          The raw token secret (e.g., "adm_pat_7kH3mNqR2xFb..."). This value is
          shown exactly once and cannot be retrieved again. Store it securely.
    description: CreatePersonalAccessTokenResponse contains the newly created PAT.
  v1CreateRunnerRequest:
    type: object
    properties:
      name:
        type: string
        description: |-
          URL-safe, human-readable identifier (e.g., "prod-terraform-runner").
          Must be unique within the tenant. Lowercase alphanumeric and hyphens only.
      description:
        type: string
        description: Optional longer-form description of the runner's purpose.
      kind:
        $ref: '#/definitions/v1RunnerKind'
        description: The type of operations this runner executes.
      labels:
        type: object
        additionalProperties:
          type: string
        description: Arbitrary key-value labels for organizing and filtering runners.
    description: CreateRunnerRequest contains the parameters for creating a new runner.
  v1CreateRunnerResponse:
    type: object
    properties:
      runner:
        $ref: '#/definitions/v1Runner'
        description: |-
          The created runner. Health status will be PENDING until the runner
          begins heartbeating.
      plainTextToken:
        type: string
        description: |-
          The raw Agent Token secret (e.g., "adm_agt_pL2mN5oQ8rS1..."). This value
          is shown exactly once and cannot be retrieved again. Deploy this token to
          the runner binary for authentication.

          To create additional tokens (e.g., for rotation), use
          CreateRunnerToken (POST /v1/runners/{runner_id}/tokens).
    description: |-
      CreateRunnerResponse contains the newly created runner and its initial
      Agent Token (AGT).
  v1CreateRunnerTokenResponse:
    type: object
    properties:
      accessToken:
        $ref: '#/definitions/v1AccessToken'
        description: The created token metadata. Scopes are auto-assigned for runner AGTs.
      plainTextToken:
        type: string
        description: |-
          The raw token secret (e.g., "adm_agt_pL2mN5oQ8rS1..."). This value is
          shown exactly once and cannot be retrieved again. Store it securely.
    description: CreateRunnerTokenResponse contains the newly created AGT.
  v1CreateSourceRequest:
    type: object
    properties:
      name:
        type: string
        description: URL-safe, human-readable identifier. Must be unique within the tenant.
      description:
        type: string
        description: Optional description of the source's purpose.
      type:
        $ref: '#/definitions/v1SourceType'
        description: The kind of artifact and fetch protocol.
      url:
        type: string
        description: Base URL for the source (see Source.url for per-type semantics).
      connectionId:
        type: string
        description: |-
          Reference to the connection providing credentials (UUID). Optional for
          public sources.
      catalog:
        type: boolean
        description: Whether this is a curated catalog entry.
      terraformRegistry:
        $ref: '#/definitions/v1TerraformRegistryConfig'
      terraformGit:
        $ref: '#/definitions/v1TerraformGitConfig'
      helmRepository:
        $ref: '#/definitions/v1HelmRepositoryConfig'
      helmOci:
        $ref: '#/definitions/v1HelmOCIConfig'
      helmGit:
        $ref: '#/definitions/v1HelmGitConfig'
      kustomizeGit:
        $ref: '#/definitions/v1KustomizeGitConfig'
      manifestGit:
        $ref: '#/definitions/v1ManifestGitConfig'
      archive:
        $ref: '#/definitions/v1ArchiveConfig'
      labels:
        type: object
        additionalProperties:
          type: string
        description: Arbitrary key-value labels.
    description: CreateSourceRequest contains the parameters for creating a new source.
  v1CreateSourceResponse:
    type: object
    properties:
      source:
        $ref: '#/definitions/v1Source'
        description: The created source.
    description: CreateSourceResponse contains the newly created source.
  v1CreateVariableRequest:
    type: object
    properties:
      key:
        type: string
        description: |-
          The variable name. Must be a valid environment variable identifier
          (e.g., "DATABASE_URL", "API_KEY").
      value:
        type: string
        description: The variable value. For COMPLEX type, must be valid JSON.
      sensitive:
        type: boolean
        description: |-
          Whether the variable value should be encrypted at rest and masked in
          API responses.
      type:
        $ref: '#/definitions/v1VariableType'
        description: How the value should be interpreted. Defaults to STRING if not specified.
      description:
        type: string
        description: Optional description of the variable's purpose.
      applicationId:
        type: string
        description: |-
          The application to scope this variable to (UUID). When set without
          environment_id, the variable applies to all environments in the app.
      environmentId:
        type: string
        description: |-
          The environment to scope this variable to (UUID). Requires application_id.
          When set, the variable applies only to this specific environment.
    description: |-
      CreateVariableRequest contains the parameters for creating a new variable.
      The variable's scope is derived from the presence of application_id and
      environment_id: neither means global, application_id only means app-scoped,
      both means environment-scoped.
  v1CreateVariableResponse:
    type: object
    properties:
      variable:
        $ref: '#/definitions/v1Variable'
        description: The created variable.
    description: CreateVariableResponse contains the newly created variable.
  v1DeleteApplicationResponse:
    type: object
    description: DeleteApplicationResponse is empty on success.
  v1DeleteClusterResponse:
    type: object
    description: DeleteClusterResponse is empty on success.
  v1DeleteComponentOverrideResponse:
    type: object
    description: DeleteComponentOverrideResponse is empty on success.
  v1DeleteComponentResponse:
    type: object
    description: DeleteComponentResponse is empty on success.
  v1DeleteConnectionResponse:
    type: object
    description: DeleteConnectionResponse is empty on success.
  v1DeleteEnvironmentResponse:
    type: object
    description: DeleteEnvironmentResponse is empty on success.
  v1DeleteRunnerResponse:
    type: object
    description: DeleteRunnerResponse is empty on success.
  v1DeleteSourceResponse:
    type: object
    description: DeleteSourceResponse is empty on success.
  v1DeleteStateResponse:
    type: object
    description: DeleteStateResponse is empty on success.
  v1DeleteVariableResponse:
    type: object
    description: DeleteVariableResponse is empty on success.
  v1Deployment:
    type: object
    properties:
      id:
        type: string
        description: Unique identifier for the deployment (UUID).
      applicationId:
        type: string
        description: The application being deployed (UUID).
      environmentId:
        type: string
        description: The target environment (UUID).
      status:
        $ref: '#/definitions/v1DeploymentStatus'
        description: Composite status derived from all component revisions.
      triggerType:
        $ref: '#/definitions/v1DeploymentTriggerType'
        description: What triggered this deployment.
      triggeredBy:
        type: string
        description: UUID of the user that triggered the deployment.
      message:
        type: string
        description: |-
          Optional message describing the deployment (e.g., "Deploying v2.1.0
          with new caching layer" or "Rolling back to stable after API errors").
      destroy:
        type: boolean
        description: |-
          Whether this is a destroy deployment. Destroy deployments tear down all
          resources in the environment: Terraform destroy for infra components,
          resource deletion for workload components. Executed in reverse dependency
          order. Required before an environment with active resources can be deleted.
      revisionSummary:
        $ref: '#/definitions/v1RevisionSummary'
        description: Summary counts for quick status display.
      createdAt:
        type: string
        format: date-time
        description: When the deployment was created.
      completedAt:
        type: string
        format: date-time
        description: |-
          When the deployment finished (all revisions completed, failed, or
          cancelled). Absent while the deployment is in progress.
    description: |-
      Deployment represents a single deployment of an application to an
      environment. Each deployment produces one Revision per component. The
      deployment tracks the composite status across all revisions and provides
      the audit trail for what was deployed, when, and by whom.
  v1DeploymentStatus:
    type: string
    enum:
      - DEPLOYMENT_STATUS_UNSPECIFIED
      - DEPLOYMENT_STATUS_PENDING
      - DEPLOYMENT_STATUS_QUEUED
      - DEPLOYMENT_STATUS_RUNNING
      - DEPLOYMENT_STATUS_SUCCEEDED
      - DEPLOYMENT_STATUS_PARTIALLY_FAILED
      - DEPLOYMENT_STATUS_FAILED
      - DEPLOYMENT_STATUS_CANCELLED
    default: DEPLOYMENT_STATUS_UNSPECIFIED
    description: |-
      DeploymentStatus represents the composite status of a deployment, derived
      from the statuses of all its component revisions.

       - DEPLOYMENT_STATUS_UNSPECIFIED: Default value. Must not be used.
       - DEPLOYMENT_STATUS_PENDING: The deployment has been created and is being initialized (resolving
      components, building dependency graph).
       - DEPLOYMENT_STATUS_QUEUED: The deployment is queued behind another active deployment for the same
      application+environment. It will start automatically when the preceding
      deployment completes or is cancelled.
       - DEPLOYMENT_STATUS_RUNNING: At least one revision is actively being processed (planning, applying).
       - DEPLOYMENT_STATUS_SUCCEEDED: All revisions completed successfully.
       - DEPLOYMENT_STATUS_PARTIALLY_FAILED: Some revisions succeeded but at least one failed or is blocked. No
      revisions are still running.
       - DEPLOYMENT_STATUS_FAILED: All non-independent revisions failed or were blocked. No revisions are
      still running.
       - DEPLOYMENT_STATUS_CANCELLED: The deployment was cancelled by a user. Already-succeeded revisions
      remain applied.
  v1DeploymentTriggerType:
    type: string
    enum:
      - DEPLOYMENT_TRIGGER_TYPE_UNSPECIFIED
      - DEPLOYMENT_TRIGGER_TYPE_MANUAL
      - DEPLOYMENT_TRIGGER_TYPE_CI
      - DEPLOYMENT_TRIGGER_TYPE_DESTROY
    default: DEPLOYMENT_TRIGGER_TYPE_UNSPECIFIED
    description: |-
      DeploymentTriggerType indicates what initiated the deployment.

       - DEPLOYMENT_TRIGGER_TYPE_UNSPECIFIED: Default value. Must not be used.
       - DEPLOYMENT_TRIGGER_TYPE_MANUAL: Manually triggered by a user via API, CLI, or UI.
       - DEPLOYMENT_TRIGGER_TYPE_CI: Triggered by a CI/CD pipeline (via API with a PAT).
       - DEPLOYMENT_TRIGGER_TYPE_DESTROY: Triggered as a destroy operation to tear down all resources in the
      environment. Runs Terraform destroy for infra components and deletes
      workload resources from the cluster, in reverse dependency order.
  v1Environment:
    type: object
    properties:
      id:
        type: string
        description: Unique identifier for the environment (UUID).
      applicationId:
        type: string
        description: The application this environment belongs to (UUID).
      name:
        type: string
        description: |-
          URL-safe, human-readable identifier (e.g., "prod", "staging-us-east").
          Unique within the application. Lowercase alphanumeric and hyphens only,
          must start with a letter and end with an alphanumeric character (1-63 chars).
      description:
        type: string
        description: |-
          Optional longer-form description of the environment's purpose
          (e.g., "US East production serving live traffic" or
          "Shared staging for QA validation before prod promotion").
      runtimeType:
        $ref: '#/definitions/v1RuntimeType'
        description: |-
          The kind of runtime this environment targets. Optional — can be assigned
          after creation.
      kubernetes:
        $ref: '#/definitions/v1KubernetesConfig'
        description: Kubernetes-specific settings (cluster, namespace).
      labels:
        type: object
        additionalProperties:
          type: string
        description: |-
          Arbitrary key-value labels for organizing and filtering environments
          (e.g., `{"region": "us-east-1", "tier": "production"}`).
      infrastructure:
        $ref: '#/definitions/v1InfrastructureConfig'
        description: |-
          Infrastructure execution settings (runner assignment). If unset,
          infrastructure components in this environment cannot be deployed.
      hasPendingChanges:
        type: boolean
        description: |-
          Whether the environment has configuration changes that have not yet been
          deployed. Server-derived by comparing current resolved config (variables,
          component settings, overrides, source versions) against the last
          successful deployment's snapshot. False if no successful deployment
          exists yet (a fresh environment with no deployments returns false —
          use `last_deployed_at` to distinguish "clean" from "never deployed").
      lastDeployedAt:
        type: string
        format: date-time
        description: |-
          When the last successful deployment to this environment completed.
          Absent if no successful deployment has occurred yet.
      createdBy:
        type: string
        description: User ID who created this environment (UUID, server-populated from token).
      updatedBy:
        type: string
        description: User ID who last updated this environment (UUID, server-populated from token).
      createdAt:
        type: string
        format: date-time
        description: When the environment was created.
      updatedAt:
        type: string
        format: date-time
        description: When the environment was last updated.
    description: |-
      Environment represents a named deployment target for an application. Each
      environment binds an application to a runtime where its workloads are deployed.
  v1ForceUnlockStateResponse:
    type: object
    description: ForceUnlockStateResponse confirms the lock was forcefully released.
  v1GCPFederationConfig:
    type: object
    properties:
      projectNumber:
        type: string
        description: GCP project number (numeric, not project ID).
      poolId:
        type: string
        description: Workload Identity Pool ID.
      providerId:
        type: string
        description: Workload Identity Provider ID within the pool.
      serviceAccountEmail:
        type: string
        description: Email of the GCP service account to impersonate.
    description: |-
      GCPFederationConfig holds the Workload Identity Federation configuration for
      OIDC-based authentication to GCP services (Artifact Registry, GCS, Terraform).

      Setup: Create a Workload Identity Pool and Provider that trusts Admiral's
      OIDC issuer, then grant the service account access to the required resources.
  v1GCPStaticAuth:
    type: object
    properties:
      serviceAccountJson:
        type: string
        description: |-
          JSON-encoded service account key.
          Write-only: masked in responses.
    description: |-
      GCPStaticAuth holds a static GCP service account key. Prefer
      GCPFederationConfig (Workload Identity) instead.
  v1GetApplicationResponse:
    type: object
    properties:
      application:
        $ref: '#/definitions/v1Application'
        description: The application record.
    description: GetApplicationResponse contains the application record.
  v1GetClusterResponse:
    type: object
    properties:
      cluster:
        $ref: '#/definitions/v1Cluster'
        description: The cluster record, including server-derived health_status.
    description: GetClusterResponse contains the cluster record.
  v1GetClusterStatusResponse:
    type: object
    properties:
      healthStatus:
        $ref: '#/definitions/v1ClusterHealthStatus'
        description: |-
          Server-derived health status based on agent connectivity, node readiness,
          and workload health.
      status:
        $ref: '#/definitions/v1ClusterStatus'
        description: |-
          Latest telemetry snapshot from the agent. Absent if no telemetry has
          been reported yet.
      reportedAt:
        type: string
        format: date-time
        description: When the latest telemetry was reported by the agent.
    description: |-
      GetClusterStatusResponse contains the server-derived health status and the
      latest telemetry snapshot. If no agent has reported telemetry yet, the
      health_status will be PENDING and status will be absent.
  v1GetClusterTokenResponse:
    type: object
    properties:
      accessToken:
        $ref: '#/definitions/v1AccessToken'
        description: The token metadata. The token secret is never included.
    description: GetClusterTokenResponse contains the requested cluster AGT metadata.
  v1GetComponentOverrideResponse:
    type: object
    properties:
      override:
        $ref: '#/definitions/v1ComponentOverride'
        description: The override record. Empty/not-found if no override exists.
    description: GetComponentOverrideResponse contains the override record.
  v1GetComponentResponse:
    type: object
    properties:
      component:
        $ref: '#/definitions/v1Component'
        description: The component record (application-level defaults).
    description: GetComponentResponse contains the component record.
  v1GetConnectionResponse:
    type: object
    properties:
      connection:
        $ref: '#/definitions/v1Connection'
        description: The connection record. Sensitive credential fields are masked.
    description: GetConnectionResponse contains the connection record.
  v1GetCurrentStateResponse:
    type: object
    properties:
      state:
        $ref: '#/definitions/v1State'
        description: The state record including current data and any active lock.
    description: |-
      GetCurrentStateResponse contains the state record with current data and
      lock info.
  v1GetDeploymentResponse:
    type: object
    properties:
      deployment:
        $ref: '#/definitions/v1Deployment'
        description: The deployment record with current status.
    description: GetDeploymentResponse contains the deployment record.
  v1GetEnvironmentResponse:
    type: object
    properties:
      environment:
        $ref: '#/definitions/v1Environment'
        description: The environment record.
    description: GetEnvironmentResponse contains the environment record.
  v1GetJobBundleResponse:
    type: object
    properties:
      bundle:
        $ref: '#/definitions/v1JobBundle'
        description: The artifact bundle with everything needed to execute the TF operation.
    description: GetJobBundleResponse contains the rendered artifacts for execution.
  v1GetPersonalAccessTokenResponse:
    type: object
    properties:
      accessToken:
        $ref: '#/definitions/v1AccessToken'
        description: The token metadata. The token secret is never included.
    description: GetPersonalAccessTokenResponse contains the requested PAT metadata.
  v1GetRevisionBundleResponse:
    type: object
    properties:
      bundle:
        $ref: '#/definitions/v1RevisionBundle'
        description: The artifact bundle with everything needed to apply the workload.
    description: GetRevisionBundleResponse contains the rendered manifests for the revision.
  v1GetRevisionResponse:
    type: object
    properties:
      revision:
        $ref: '#/definitions/v1Revision'
        description: The revision record with current status and artifacts.
    description: GetRevisionResponse contains the revision record.
  v1GetRunnerResponse:
    type: object
    properties:
      runner:
        $ref: '#/definitions/v1Runner'
        description: The runner record, including server-derived health_status.
    description: GetRunnerResponse contains the runner record.
  v1GetRunnerStatusResponse:
    type: object
    properties:
      healthStatus:
        $ref: '#/definitions/v1RunnerHealthStatus'
        description: Server-derived health status based on heartbeat recency and capacity.
      status:
        $ref: '#/definitions/v1RunnerStatus'
        description: |-
          Latest capacity snapshot from the runner. Absent if no heartbeat has
          been received yet.
      reportedAt:
        type: string
        format: date-time
        description: When the latest heartbeat was received.
    description: |-
      GetRunnerStatusResponse contains the server-derived health status and the
      latest capacity snapshot. If no heartbeat has been received yet, the
      health_status will be PENDING and status will be absent.
  v1GetRunnerTokenResponse:
    type: object
    properties:
      accessToken:
        $ref: '#/definitions/v1AccessToken'
        description: The token metadata. The token secret is never included.
    description: GetRunnerTokenResponse contains the requested runner AGT metadata.
  v1GetSourceInputsResponse:
    type: object
    properties:
      inputs:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1SourceInput'
        description: |-
          Discovered input parameters. Empty for source types that do not support
          input discovery (Kustomize, raw manifests).
      resolvedVersion:
        type: string
        description: |-
          The version that was actually inspected (resolved from the requested
          version — e.g., a branch name resolved to a commit SHA).
    description: |-
      GetSourceInputsResponse contains the discovered inputs for the source at
      the requested version.
  v1GetSourceOutputsResponse:
    type: object
    properties:
      outputs:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1SourceOutput'
        description: |-
          Discovered output definitions. Only populated for Terraform module sources.
          Workload sources (Helm, Kustomize, manifests) do not have formal outputs —
          workload component outputs are user-declared at the component level.
      resolvedVersion:
        type: string
        description: The version that was actually inspected.
    description: |-
      GetSourceOutputsResponse contains the discovered outputs for the source at
      the requested version.
  v1GetSourceResponse:
    type: object
    properties:
      source:
        $ref: '#/definitions/v1Source'
        description: The source record.
    description: GetSourceResponse contains the source record.
  v1GetStateResponse:
    type: object
    properties:
      data:
        type: string
        format: byte
        description: |-
          The raw Terraform state data (JSON-encoded). Empty if no state exists
          yet (fresh init — Terraform handles this gracefully).
    description: GetStateResponse contains the current state data.
  v1GetStateVersionResponse:
    type: object
    properties:
      version:
        $ref: '#/definitions/v1StateVersion'
        description: The state version metadata.
      data:
        type: string
        format: byte
        description: The raw Terraform state data (JSON-encoded) at this serial.
    description: |-
      GetStateVersionResponse contains the full state data at a historical serial.
      Returns both the version metadata and the raw data separately — the
      StateVersion message intentionally omits data to keep ListStateVersions
      lightweight.
  v1GetUserResponse:
    type: object
    properties:
      user:
        $ref: '#/definitions/v1User'
        description: The user profile.
    description: GetUserResponse contains the authenticated user's profile.
  v1GetVariableResponse:
    type: object
    properties:
      variable:
        $ref: '#/definitions/v1Variable'
        description: The variable record. Sensitive variable values are masked.
    description: GetVariableResponse contains the variable record.
  v1GitHubAppAuth:
    type: object
    properties:
      appId:
        type: string
        description: The GitHub App's numeric ID.
      installationId:
        type: string
        description: The installation ID for the target organization or repository.
      privateKey:
        type: string
        description: |-
          PEM-encoded private key for the GitHub App.
          Write-only: masked in responses.
    description: |-
      GitHubAppAuth holds GitHub App credentials for Git operations.
      Preferred over personal tokens for organizations — provides granular
      repository permissions and a better audit trail.
  v1GitSSHAuth:
    type: object
    properties:
      privateKey:
        type: string
        description: |-
          PEM-encoded SSH private key.
          Write-only: masked in responses.
      passphrase:
        type: string
        description: |-
          Optional passphrase for the private key.
          Write-only: masked in responses.
    description: GitSSHAuth holds SSH key credentials for Git operations.
  v1GitTokenAuth:
    type: object
    properties:
      token:
        type: string
        description: |-
          Personal access token, OAuth token, or bot token.
          Write-only: masked in responses.
    description: GitTokenAuth holds HTTPS token credentials for Git operations.
  v1HealthcheckResponse:
    type: object
    description: |-
      HealthcheckResponse is returned when the service is healthy.
      An empty response indicates the service is operating normally.
  v1HeartbeatRequest:
    type: object
    properties:
      status:
        $ref: '#/definitions/v1RunnerStatus'
        description: Current capacity and telemetry metrics.
      instanceId:
        type: string
        description: |-
          Random UUID generated at process startup to distinguish multiple runner
          instances sharing the same AGT. The server uses this to track heartbeats
          per instance and aggregate capacity metrics across all instances of the
          same runner. A new instance_id is generated each time the runner process
          starts — it is not persisted across restarts.
    description: |-
      HeartbeatRequest contains the runner's alive signal and current capacity.
      The runner is identified by the AGT's binding — no runner_id is required.
  v1HeartbeatResponse:
    type: object
    properties:
      ack:
        type: boolean
        description: Whether the heartbeat was accepted.
      nextHeartbeatSeconds:
        type: integer
        format: int32
        description: |-
          Server-controlled interval (in seconds) before the runner should send
          its next heartbeat. Allows the server to adjust frequency dynamically.
    description: HeartbeatResponse acknowledges the heartbeat.
  v1HelmGitConfig:
    type: object
    properties:
      path:
        type: string
        description: Path within the repository to the chart directory (must contain Chart.yaml).
      defaultRef:
        type: string
        description: Default Git ref (branch, tag, or commit SHA).
    description: |-
      HelmGitConfig provides additional parameters for Helm charts sourced from
      Git repositories.
  v1HelmHTTPAuth:
    type: object
    properties:
      username:
        type: string
        description: Username for basic authentication.
      password:
        type: string
        description: |-
          Password for basic authentication.
          Write-only: masked in responses.
    description: HelmHTTPAuth holds basic auth credentials for classic Helm HTTP repositories.
  v1HelmOCIConfig:
    type: object
    properties:
      repository:
        type: string
        description: |-
          The full OCI repository path (e.g., "ghcr.io/myorg/charts/my-app").
          The url field on the Source message holds the registry host, while this
          field holds the full repository path.
    description: |-
      HelmOCIConfig provides additional parameters for Helm charts stored in
      OCI registries.
  v1HelmRepositoryConfig:
    type: object
    properties:
      chartName:
        type: string
        description: The chart name within the repository (e.g., "nginx-ingress", "redis").
    description: |-
      HelmRepositoryConfig provides additional parameters for Helm charts from
      classic HTTP/S chart repositories.
  v1InfrastructureConfig:
    type: object
    properties:
      runnerId:
        type: string
        description: |-
          The runner that executes infrastructure operations for this environment (UUID).
          If unset, infrastructure components in this environment cannot be deployed.
    description: |-
      InfrastructureConfig contains settings for infrastructure operations
      (Terraform plan/apply) within this environment.
  v1Job:
    type: object
    properties:
      id:
        type: string
        description: Unique identifier for the job (UUID).
      runnerId:
        type: string
        description: The runner this job is assigned to (UUID).
      revisionId:
        type: string
        description: The revision this job belongs to (UUID).
      deploymentId:
        type: string
        description: The deployment this job belongs to (UUID). Denormalized for convenience.
      jobType:
        $ref: '#/definitions/v1JobType'
        description: The type of Terraform operation to execute.
      status:
        $ref: '#/definitions/v1JobStatus'
        description: Current lifecycle status of the job.
      createdAt:
        type: string
        format: date-time
        description: When the job was created.
      startedAt:
        type: string
        format: date-time
        description: When the runner started executing the job.
      completedAt:
        type: string
        format: date-time
        description: When the job finished (succeeded, failed, or cancelled).
    description: |-
      Job represents an infrastructure execution job assigned to a runner.
      Jobs bridge the Deployment/Revision system and the Runner execution plane.
  v1JobBundle:
    type: object
    properties:
      artifactUrl:
        type: string
        description: |-
          Signed URL to download the rendered artifact bundle (tar.gz containing
          .tf files, .tfvars, etc.). Time-limited.
      artifactChecksum:
        type: string
        description: SHA-256 checksum of the artifact bundle for integrity verification.
      variables:
        type: object
        additionalProperties:
          type: string
        description: |-
          Resolved variable values to inject as TF_VAR_* environment variables.
          Sensitive values are included (runner is a trusted execution context).
      providerConfigs:
        type: object
        additionalProperties:
          type: string
        description: |-
          Provider configuration blocks (JSON-encoded). Keys are provider names
          (e.g., "aws", "google"), values are JSON objects with provider config.
      backendConfig:
        type: string
        description: |-
          Terraform backend configuration (JSON-encoded). Contains the backend
          type and its configuration for state storage.
      terraformVersion:
        type: string
        description: The Terraform version to use for this operation (e.g., "1.7.5").
    description: |-
      JobBundle contains everything a runner needs to execute a Terraform operation.
      Fetched separately from ClaimJob to keep the claim response lightweight.
  v1JobPhase:
    type: string
    enum:
      - JOB_PHASE_UNSPECIFIED
      - JOB_PHASE_INITIALIZING
      - JOB_PHASE_PLANNING
      - JOB_PHASE_APPLYING
      - JOB_PHASE_FINALIZING
    default: JOB_PHASE_UNSPECIFIED
    description: |-
      JobPhase represents the current execution phase of a job as reported by the
      runner's worker thread. Used in heartbeat payloads to give the server
      visibility into job progress between ClaimJob and ReportJobResult.

       - JOB_PHASE_UNSPECIFIED: Default value. Must not be used.
       - JOB_PHASE_INITIALIZING: Downloading artifact bundle and setting up the workspace.
       - JOB_PHASE_PLANNING: Running `terraform plan` (or `tofu plan`).
       - JOB_PHASE_APPLYING: Running `terraform apply` (or `tofu apply`).
       - JOB_PHASE_FINALIZING: Uploading results and cleaning up the workspace.
  v1JobResult:
    type: object
    properties:
      status:
        $ref: '#/definitions/v1JobStatus'
        description: The final status of the job (SUCCEEDED or FAILED).
      planOutput:
        type: string
        description: (Plan jobs only) The Terraform plan output in human-readable format.
      planSummary:
        $ref: '#/definitions/v1TerraformPlanSummary'
        description: (Plan jobs only) Summary of resource changes from the plan.
      errorMessage:
        type: string
        description: Error message if the job failed. Empty on success.
      logsUrl:
        type: string
        description: URL to the full execution logs in external storage.
      duration:
        type: string
        description: How long the Terraform operation took to execute.
    description: JobResult contains the outcome of a completed job, reported by the runner.
  v1JobStatus:
    type: string
    enum:
      - JOB_STATUS_UNSPECIFIED
      - JOB_STATUS_PENDING
      - JOB_STATUS_ASSIGNED
      - JOB_STATUS_RUNNING
      - JOB_STATUS_SUCCEEDED
      - JOB_STATUS_FAILED
      - JOB_STATUS_CANCELLED
    default: JOB_STATUS_UNSPECIFIED
    description: |-
      JobStatus represents the lifecycle state of a runner job.

       - JOB_STATUS_UNSPECIFIED: Default value. Must not be used.
       - JOB_STATUS_PENDING: Job has been created but not yet assigned to a runner.
       - JOB_STATUS_ASSIGNED: Job has been assigned to a runner and is waiting to be claimed.
       - JOB_STATUS_RUNNING: Job has been claimed by the runner and is actively executing.
       - JOB_STATUS_SUCCEEDED: Job completed successfully.
       - JOB_STATUS_FAILED: Job failed. See JobResult.error_message for details.
       - JOB_STATUS_CANCELLED: Job was cancelled (e.g., parent deployment was cancelled).
  v1JobType:
    type: string
    enum:
      - JOB_TYPE_UNSPECIFIED
      - JOB_TYPE_PLAN
      - JOB_TYPE_APPLY
      - JOB_TYPE_DESTROY_PLAN
      - JOB_TYPE_DESTROY_APPLY
    default: JOB_TYPE_UNSPECIFIED
    description: |-
      JobType identifies the kind of Terraform operation a job executes.

       - JOB_TYPE_UNSPECIFIED: Default value. Must not be used.
       - JOB_TYPE_PLAN: Generate a Terraform execution plan.
       - JOB_TYPE_APPLY: Apply a Terraform plan.
       - JOB_TYPE_DESTROY_PLAN: Generate a Terraform destroy plan.
       - JOB_TYPE_DESTROY_APPLY: Apply a Terraform destroy plan (tear down resources).
  v1KubernetesConfig:
    type: object
    properties:
      clusterId:
        type: string
        description: The cluster this environment deploys to (UUID).
      namespace:
        type: string
        description: |-
          The Kubernetes namespace for this environment's workloads.
          Defaults to the environment name if not specified at deploy time.
    description: KubernetesConfig contains Kubernetes-specific settings for an environment.
  v1KustomizeGitConfig:
    type: object
    properties:
      path:
        type: string
        description: |-
          Path within the repository to the overlay directory (must contain
          kustomization.yaml).
      defaultRef:
        type: string
        description: Default Git ref (branch, tag, or commit SHA).
    description: |-
      KustomizeGitConfig provides additional parameters for Kustomize overlays
      sourced from Git repositories.
  v1ListApplicationsResponse:
    type: object
    properties:
      applications:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1Application'
        description: The list of applications.
      nextPageToken:
        type: string
        description: Pagination token for the next page. Empty when there are no more results.
    description: ListApplicationsResponse contains a page of applications.
  v1ListClusterTokensResponse:
    type: object
    properties:
      accessTokens:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1AccessToken'
        description: The list of tokens. Token secrets are never included.
      nextPageToken:
        type: string
        description: Pagination token for the next page. Empty when there are no more results.
    description: ListClusterTokensResponse contains a page of cluster AGT metadata.
  v1ListClustersResponse:
    type: object
    properties:
      clusters:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1Cluster'
        description: The list of clusters.
      nextPageToken:
        type: string
        description: Pagination token for the next page. Empty when there are no more results.
    description: ListClustersResponse contains a page of clusters.
  v1ListComponentOverridesResponse:
    type: object
    properties:
      overrides:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1ComponentOverride'
        description: The list of environment-level overrides for the component.
      nextPageToken:
        type: string
        description: Pagination token for the next page. Empty when there are no more results.
    description: ListComponentOverridesResponse contains all overrides for a component.
  v1ListComponentsResponse:
    type: object
    properties:
      components:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1Component'
        description: |-
          The list of components. When `environment_id` is present in the filter,
          each component reflects the resolved view with overrides applied.
      nextPageToken:
        type: string
        description: Pagination token for the next page. Empty when there are no more results.
    description: ListComponentsResponse contains a page of components.
  v1ListConnectionsResponse:
    type: object
    properties:
      connections:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1Connection'
        description: The list of connections. Sensitive credential fields are masked.
      nextPageToken:
        type: string
        description: Pagination token for the next page. Empty when there are no more results.
    description: ListConnectionsResponse contains a page of connections.
  v1ListDeploymentsResponse:
    type: object
    properties:
      deployments:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1Deployment'
        description: The list of deployments, ordered from newest to oldest.
      nextPageToken:
        type: string
        description: Pagination token for the next page. Empty when there are no more results.
    description: ListDeploymentsResponse contains a page of deployments.
  v1ListEnvironmentsResponse:
    type: object
    properties:
      environments:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1Environment'
        description: The list of environments.
      nextPageToken:
        type: string
        description: Pagination token for the next page. Empty when there are no more results.
    description: ListEnvironmentsResponse contains a page of environments.
  v1ListPersonalAccessTokensResponse:
    type: object
    properties:
      accessTokens:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1AccessToken'
        description: The list of tokens. Token secrets are never included.
      nextPageToken:
        type: string
        description: Pagination token for the next page. Empty when there are no more results.
    description: ListPersonalAccessTokensResponse contains a page of PAT metadata.
  v1ListRevisionsResponse:
    type: object
    properties:
      revisions:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1Revision'
        description: The list of revisions, ordered by dependency graph (upstream first).
      nextPageToken:
        type: string
        description: Pagination token for the next page. Empty when there are no more results.
    description: ListRevisionsResponse contains all revisions for a deployment.
  v1ListRunnerJobsResponse:
    type: object
    properties:
      jobs:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1Job'
        description: The list of jobs, ordered from newest to oldest.
      nextPageToken:
        type: string
        description: Pagination token for the next page. Empty when there are no more results.
    description: ListRunnerJobsResponse contains a page of jobs.
  v1ListRunnerTokensResponse:
    type: object
    properties:
      accessTokens:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1AccessToken'
        description: The list of tokens. Token secrets are never included.
      nextPageToken:
        type: string
        description: Pagination token for the next page. Empty when there are no more results.
    description: ListRunnerTokensResponse contains a page of runner AGT metadata.
  v1ListRunnersResponse:
    type: object
    properties:
      runners:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1Runner'
        description: The list of runners.
      nextPageToken:
        type: string
        description: Pagination token for the next page. Empty when there are no more results.
    description: ListRunnersResponse contains a page of runners.
  v1ListSourceVersionsResponse:
    type: object
    properties:
      versions:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1SourceVersion'
        description: Available versions, ordered from newest to oldest.
      nextPageToken:
        type: string
        description: Pagination token for the next page. Empty when there are no more results.
    description: ListSourceVersionsResponse contains available versions from the external system.
  v1ListSourcesResponse:
    type: object
    properties:
      sources:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1Source'
        description: The list of sources.
      nextPageToken:
        type: string
        description: Pagination token for the next page. Empty when there are no more results.
    description: ListSourcesResponse contains a page of sources.
  v1ListStateVersionsResponse:
    type: object
    properties:
      versions:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1StateVersion'
        description: The list of state versions, ordered from newest to oldest.
      nextPageToken:
        type: string
        description: Pagination token for the next page. Empty when there are no more results.
    description: ListStateVersionsResponse contains a page of state version metadata.
  v1ListStatesResponse:
    type: object
    properties:
      states:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1StateSummary'
        description: |-
          The list of state summaries (metadata only, no state data blob).
          Use GetCurrentState to fetch full data for a specific record.
      nextPageToken:
        type: string
        description: Pagination token for the next page. Empty when there are no more results.
    description: ListStatesResponse contains a page of state metadata.
  v1ListVariablesResponse:
    type: object
    properties:
      variables:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1Variable'
        description: The list of variables from all applicable levels.
      nextPageToken:
        type: string
        description: Pagination token for the next page. Empty when there are no more results.
    description: ListVariablesResponse contains a page of variables.
  v1ListWorkloadsResponse:
    type: object
    properties:
      workloads:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1Workload'
        description: The list of workloads.
      nextPageToken:
        type: string
        description: Pagination token for the next page. Empty when there are no more results.
    description: ListWorkloadsResponse contains a page of workloads.
  v1LockStateResponse:
    type: object
    description: LockStateResponse confirms the lock was acquired.
  v1ManifestGitConfig:
    type: object
    properties:
      path:
        type: string
        description: |-
          Path within the repository to the directory containing manifest files.
          All .yaml, .yml, and .json files in this directory are collected.
      recursive:
        type: boolean
        description: Whether to recursively include files from subdirectories.
      defaultRef:
        type: string
        description: Default Git ref (branch, tag, or commit SHA).
    description: |-
      ManifestGitConfig provides additional parameters for raw Kubernetes manifests
      sourced from Git repositories.
  v1ObjectReference:
    type: object
    properties:
      kind:
        type: string
        description: Kubernetes resource kind (e.g., "Pod", "ReplicaSet").
      namespace:
        type: string
        description: Kubernetes namespace.
      name:
        type: string
        description: Object name.
    description: ObjectReference is a lightweight reference to a Kubernetes object.
  v1PushStateResponse:
    type: object
    description: PushStateResponse acknowledges the state was stored.
  v1ReportClusterStatusRequest:
    type: object
    properties:
      status:
        $ref: '#/definitions/v1ClusterStatus'
        description: Cluster-level telemetry snapshot.
      workloads:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1WorkloadStatus'
        description: Per-workload status snapshots.
      events:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1WorkloadEvent'
        description: Kubernetes events observed since the last push.
      reportedAt:
        type: string
        format: date-time
        description: When the agent generated this report.
    description: |-
      ReportClusterStatusRequest contains a combined telemetry payload from a K8s agent.
      Admiral splits this into three storage tiers: current snapshot, time-series
      metrics, and events.

      The cluster is identified by the agent token's binding — no cluster_id is
      required. The server resolves the cluster from the AGT.
  v1ReportClusterStatusResponse:
    type: object
    properties:
      ack:
        type: boolean
        description: Whether the report was accepted.
      nextPushSeconds:
        type: integer
        format: int32
        description: |-
          Server-controlled interval (in seconds) before the agent should send
          its next status push. Allows the server to adjust push frequency dynamically.
    description: ReportClusterStatusResponse acknowledges a telemetry push.
  v1ReportJobResultResponse:
    type: object
    properties:
      ack:
        type: boolean
        description: Whether the result was accepted.
    description: ReportJobResultResponse acknowledges the result.
  v1ReportRevisionResultResponse:
    type: object
    properties:
      ack:
        type: boolean
        description: Whether the result was accepted.
    description: ReportRevisionResultResponse acknowledges the result.
  v1ReportWorkloadStatusResponse:
    type: object
    properties:
      ack:
        type: boolean
        description: Whether the report was accepted.
    description: ReportWorkloadStatusResponse acknowledges a workload telemetry push.
  v1RetryRevisionResponse:
    type: object
    properties:
      revision:
        $ref: '#/definitions/v1Revision'
        description: |-
          The retried revision. Status resets and retry_count is incremented.
          Downstream revisions that were BLOCKED will automatically unblock
          if this revision succeeds.
    description: RetryRevisionResponse contains the updated revision.
  v1Revision:
    type: object
    properties:
      id:
        type: string
        description: Unique identifier for the revision (UUID).
      deploymentId:
        type: string
        description: The deployment this revision belongs to (UUID).
      componentId:
        type: string
        description: The component this revision is for (UUID).
      componentName:
        type: string
        description: Component name at the time of deployment (denormalized for display).
      category:
        $ref: '#/definitions/v1RevisionCategory'
        description: Component category at the time of deployment (after override resolution).
      status:
        $ref: '#/definitions/v1RevisionStatus'
        description: Lifecycle status of this revision.
      sourceId:
        type: string
        description: The source used for this revision (UUID, after override resolution).
      version:
        type: string
        description: The version deployed (after override resolution).
      resolvedValues:
        type: string
        description: |-
          The resolved values template snapshot — the values_template with all
          variable references and component output references fully resolved.
          Stored for audit: shows exactly what inputs were used. Sensitive
          variable values are masked in API responses.
      dependsOn:
        type: array
        items:
          type: string
        description: |-
          Component IDs that this revision depends on. Populated from the resolved
          depends_on list plus implicit dependencies from template expressions.
      blockedBy:
        type: array
        items:
          type: string
        description: |-
          Component IDs that are blocking this revision. Only populated when
          status is BLOCKED — indicates which upstream components failed.
      artifactChecksum:
        type: string
        description: SHA-256 checksum of the rendered artifact bundle (tar.gz).
      artifactUrl:
        type: string
        description: |-
          Storage location of the rendered artifact bundle. Internal reference
          used by agents/runners to fetch the bundle.
      planOutput:
        type: string
        description: |-
          (Infrastructure only) The Terraform plan output in human-readable format.
          Populated after planning completes. Used for visibility and audit.
      planSummary:
        $ref: '#/definitions/v1TerraformPlanSummary'
        description: |-
          (Infrastructure only) The number of resources Terraform plans to add,
          change, and destroy. Populated after planning completes.
      errorMessage:
        type: string
        description: Error message if the revision failed. Empty on success.
      retryCount:
        type: integer
        format: int32
        description: Number of retry attempts. Starts at 0 for the initial attempt.
      createdAt:
        type: string
        format: date-time
        description: When the revision was created (same as deployment created_at).
      startedAt:
        type: string
        format: date-time
        description: When the revision started execution (transitioned from PENDING/QUEUED).
      completedAt:
        type: string
        format: date-time
        description: When the revision finished (succeeded, failed, or cancelled).
    description: |-
      Revision represents an immutable, rendered artifact for a single component
      within a deployment. Each revision tracks the full lifecycle from rendering
      through execution, and stores references to the produced artifacts
      (rendered manifests, Terraform plan files, etc.).

      For infrastructure components (Terraform):
        - Rendering produces .tf files and .tfvars with resolved variable values.
        - `terraform plan` and `terraform apply` are executed by the assigned runner.
        - The plan output is stored for visibility.
        - Each component has its own Terraform state.

      For workload components (Helm, Kustomize, manifests):
        - Rendering produces Kubernetes manifests (via helm template, kustomize
          build, or raw file collection).
        - Manifests are ordered (CRDs before resources, namespaces first).
        - The rendered bundle is sent to the K8s agent for application.
  v1RevisionBundle:
    type: object
    properties:
      artifactUrl:
        type: string
        description: |-
          Signed URL to download the rendered manifest bundle (tar.gz containing
          ordered Kubernetes YAML manifests). Time-limited.
      artifactChecksum:
        type: string
        description: SHA-256 checksum of the artifact bundle for integrity verification.
      namespace:
        type: string
        description: |-
          The Kubernetes namespace to apply manifests into. Resolved from the
          environment's KubernetesConfig.namespace (or defaults to the environment
          name).
      componentName:
        type: string
        description: Component name for logging and status tracking.
      version:
        type: string
        description: The source version being deployed (e.g., chart version, git ref).
    description: |-
      RevisionBundle contains pre-rendered Kubernetes manifests for a workload
      revision, ready for server-side apply by the K8s agent.
  v1RevisionCategory:
    type: string
    enum:
      - REVISION_CATEGORY_UNSPECIFIED
      - REVISION_CATEGORY_INFRASTRUCTURE
      - REVISION_CATEGORY_WORKLOAD
    default: REVISION_CATEGORY_UNSPECIFIED
    description: |-
      RevisionCategory mirrors ComponentCategory but is stored on the revision
      to capture the effective category at deployment time (may differ from
      the component default if an environment override changed the source type).

       - REVISION_CATEGORY_UNSPECIFIED: Default value. Must not be used.
       - REVISION_CATEGORY_INFRASTRUCTURE: Infrastructure revision (Terraform). Plan → apply lifecycle.
       - REVISION_CATEGORY_WORKLOAD: Workload revision (Helm, Kustomize, manifests). Direct apply lifecycle.
  v1RevisionResult:
    type: object
    properties:
      success:
        type: boolean
        description: Whether the revision was applied successfully.
      errorMessage:
        type: string
        description: Error message if the revision failed. Empty on success.
      resourcesApplied:
        type: integer
        format: int32
        description: Number of Kubernetes resources applied.
      resourcesFailed:
        type: integer
        format: int32
        description: Number of Kubernetes resources that failed to apply.
    description: |-
      RevisionResult contains the outcome of applying a workload revision,
      reported by the K8s agent.
  v1RevisionStatus:
    type: string
    enum:
      - REVISION_STATUS_UNSPECIFIED
      - REVISION_STATUS_PENDING
      - REVISION_STATUS_QUEUED
      - REVISION_STATUS_PLANNING
      - REVISION_STATUS_APPLYING
      - REVISION_STATUS_SUCCEEDED
      - REVISION_STATUS_FAILED
      - REVISION_STATUS_BLOCKED
      - REVISION_STATUS_CANCELLED
    default: REVISION_STATUS_UNSPECIFIED
    description: |-
      RevisionStatus represents the lifecycle status of a single component
      revision within a deployment.

       - REVISION_STATUS_UNSPECIFIED: Default value. Must not be used.
       - REVISION_STATUS_PENDING: The revision has been created but execution has not started. Waiting for
      its turn in the dependency graph.
       - REVISION_STATUS_QUEUED: The revision is queued for execution. Its upstream dependencies have
      completed and it will begin shortly.
       - REVISION_STATUS_PLANNING: (Infrastructure only) Terraform plan is being generated. Transitions
      to APPLYING once the plan is complete.
       - REVISION_STATUS_APPLYING: The revision is being applied. For infrastructure, this is
      `terraform apply`. For workloads, this is applying manifests to the
      target cluster.
       - REVISION_STATUS_SUCCEEDED: The revision completed successfully. For infrastructure, Terraform apply
      succeeded. For workloads, the manifests were applied and the resources
      reached a healthy state.
       - REVISION_STATUS_FAILED: The revision failed. See `error_message` for details.
       - REVISION_STATUS_BLOCKED: The revision is blocked because an upstream dependency failed. See
      `blocked_by` for the component(s) that caused the block.
       - REVISION_STATUS_CANCELLED: The revision was cancelled (parent deployment was cancelled or the
      revision was superseded).
  v1RevisionSummary:
    type: object
    properties:
      total:
        type: integer
        format: int32
        description: Total number of component revisions in this deployment.
      succeeded:
        type: integer
        format: int32
        description: Number of revisions that completed successfully.
      failed:
        type: integer
        format: int32
        description: Number of revisions that failed.
      blocked:
        type: integer
        format: int32
        description: Number of revisions that are blocked by upstream failures.
      running:
        type: integer
        format: int32
        description: Number of revisions currently running (planning or applying).
      cancelled:
        type: integer
        format: int32
        description: Number of revisions that were cancelled.
      pending:
        type: integer
        format: int32
        description: Number of revisions that have not started yet.
    description: |-
      RevisionSummary provides aggregate counts of revision statuses within a
      deployment, enabling quick status display without loading all revisions.
  v1RevokeClusterTokenResponse:
    type: object
    properties:
      accessToken:
        $ref: '#/definitions/v1AccessToken'
        description: The token metadata with updated status.
    description: RevokeClusterTokenResponse contains the revoked cluster AGT metadata.
  v1RevokePersonalAccessTokenResponse:
    type: object
    properties:
      accessToken:
        $ref: '#/definitions/v1AccessToken'
        description: The token metadata with updated status.
    description: RevokePersonalAccessTokenResponse contains the revoked PAT metadata.
  v1RevokeRunnerTokenResponse:
    type: object
    properties:
      accessToken:
        $ref: '#/definitions/v1AccessToken'
        description: The token metadata with updated status.
    description: RevokeRunnerTokenResponse contains the revoked runner AGT metadata.
  v1Runner:
    type: object
    properties:
      id:
        type: string
        description: Unique identifier for the runner (UUID).
      tenantId:
        type: string
        description: Tenant this runner belongs to (UUID).
      name:
        type: string
        description: |-
          URL-safe, human-readable identifier (e.g., "prod-terraform-runner").
          Unique within the tenant. Lowercase alphanumeric and hyphens only,
          must start with a letter and end with an alphanumeric character (1-63 chars).
      description:
        type: string
        description: |-
          Optional longer-form description of the runner's purpose
          (e.g., "Terraform runner for production AWS infrastructure").
      kind:
        $ref: '#/definitions/v1RunnerKind'
        description: The type of operations this runner executes.
      labels:
        type: object
        additionalProperties:
          type: string
        description: |-
          Arbitrary key-value labels for organizing and filtering runners
          (e.g., `{"cloud": "aws", "team": "platform"}`).
      healthStatus:
        $ref: '#/definitions/v1RunnerHealthStatus'
        description: Derived health status based on heartbeat recency and capacity.
      createdBy:
        type: string
        description: User ID who created this runner (UUID, server-populated from token).
      updatedBy:
        type: string
        description: User ID who last updated this runner (UUID, server-populated from token).
      createdAt:
        type: string
        format: date-time
        description: When the runner record was created.
      updatedAt:
        type: string
        format: date-time
        description: When the runner record was last updated.
    description: |-
      Runner represents a registered infrastructure execution runner within a
      tenant. Runners claim and execute Terraform operations (plan, apply, destroy)
      dispatched by the deployment engine.
  v1RunnerHealthStatus:
    type: string
    enum:
      - RUNNER_HEALTH_STATUS_UNSPECIFIED
      - RUNNER_HEALTH_STATUS_PENDING
      - RUNNER_HEALTH_STATUS_HEALTHY
      - RUNNER_HEALTH_STATUS_DEGRADED
      - RUNNER_HEALTH_STATUS_UNREACHABLE
    default: RUNNER_HEALTH_STATUS_UNSPECIFIED
    description: |-
      RunnerHealthStatus represents the derived health state of a runner.
      The status is computed from heartbeat recency and capacity metrics.

       - RUNNER_HEALTH_STATUS_UNSPECIFIED: Default value. Must not be used.
       - RUNNER_HEALTH_STATUS_PENDING: Runner record exists but no heartbeat has been received yet.
       - RUNNER_HEALTH_STATUS_HEALTHY: Heartbeat received within expected interval, runner operational.
       - RUNNER_HEALTH_STATUS_DEGRADED: Runner is operational but reporting capacity constraints (e.g.,
      active jobs at or near max_concurrent_jobs).
       - RUNNER_HEALTH_STATUS_UNREACHABLE: No heartbeat received within 3x the heartbeat interval.
  v1RunnerKind:
    type: string
    enum:
      - RUNNER_KIND_UNSPECIFIED
      - RUNNER_KIND_TERRAFORM
      - RUNNER_KIND_WORKFLOW
    default: RUNNER_KIND_UNSPECIFIED
    description: |-
      RunnerKind identifies the type of operations a runner executes.

       - RUNNER_KIND_UNSPECIFIED: Default value. Must not be used.
       - RUNNER_KIND_TERRAFORM: Executes Terraform plan, apply, and destroy operations.
       - RUNNER_KIND_WORKFLOW: Executes workflow operations (CI/CD pipelines, custom scripts).
  v1RunnerStatus:
    type: object
    properties:
      version:
        type: string
        description: The runner binary version (e.g., "1.2.0").
      activeJobs:
        type: integer
        format: int32
        description: Number of jobs currently being executed by this runner.
      maxConcurrentJobs:
        type: integer
        format: int32
        description: Maximum number of concurrent jobs this runner supports.
      availableProviders:
        type: array
        items:
          type: string
        description: Terraform providers available on this runner (e.g., ["aws", "google", "azurerm"]).
      toolVersions:
        type: object
        additionalProperties:
          type: string
        description: |-
          CLI tool versions installed on this runner, detected at startup and
          reported on every heartbeat. Visible to admins via GetRunnerStatus.
          The server uses tool_versions to match jobs to capable runners (e.g.,
          a job requiring Terraform 1.9.x will only be assigned to a runner
          reporting a compatible version).
          Keys are tool names (e.g., "terraform", "tofu", "helm", "kustomize", "kubectl").
          Values are semantic versions (e.g., "1.7.5", "1.9.0").
      activeJobDetails:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1ActiveJobInfo'
        description: |-
          Details of jobs currently being executed by this runner instance. The
          worker thread updates job phase in shared memory; the heartbeat thread
          reads and includes it on each tick. Gives the server visibility into
          job progress for stuck-job detection and admin dashboards.
    description: |-
      RunnerStatus contains capacity and telemetry metrics for a runner, as
      reported via Heartbeat. This message is used in both the push payload
      (HeartbeatRequest) and the read response (GetRunnerStatusResponse).

      Server-derived fields (health_status) are NOT included here — they live
      on the Runner record and are returned alongside this message in
      GetRunnerStatusResponse.
  v1RuntimeType:
    type: string
    enum:
      - RUNTIME_TYPE_UNSPECIFIED
      - RUNTIME_TYPE_KUBERNETES
    default: RUNTIME_TYPE_UNSPECIFIED
    description: |-
      RuntimeType identifies the kind of runtime an environment targets.

       - RUNTIME_TYPE_UNSPECIFIED: Default value. Must not be used.
       - RUNTIME_TYPE_KUBERNETES: Kubernetes cluster managed via Admiral's K8s agent.
  v1SetComponentOverrideResponse:
    type: object
    properties:
      override:
        $ref: '#/definitions/v1ComponentOverride'
        description: The created or updated override.
    description: SetComponentOverrideResponse contains the override record.
  v1Source:
    type: object
    properties:
      id:
        type: string
        description: Unique identifier for the source (UUID).
      tenantId:
        type: string
        description: Tenant this source belongs to (UUID).
      name:
        type: string
        description: |-
          URL-safe, human-readable identifier (e.g., "corporate-rds", "nginx-chart").
          Unique within the tenant. Lowercase alphanumeric and hyphens only, must
          start with a letter and end with an alphanumeric character (1-63 chars).
      description:
        type: string
        description: |-
          Optional longer-form description of the source's purpose
          (e.g., "Corporate-approved RDS module with encryption and backups").
      type:
        $ref: '#/definitions/v1SourceType'
        description: The kind of artifact and fetch protocol.
      url:
        type: string
        title: |-
          Base URL for the source. The meaning varies by source type:
            - TERRAFORM_REGISTRY: registry hostname (e.g., "registry.terraform.io")
            - TERRAFORM_GIT, HELM_GIT, KUSTOMIZE_GIT, MANIFEST_GIT: Git repo URL
            - HELM_REPOSITORY: Helm repo URL (e.g., "https://charts.bitnami.com/bitnami")
            - HELM_OCI: OCI registry URL (e.g., "oci://ghcr.io")
            - ARCHIVE: HTTP/S3/GCS URL to the archive
      connectionId:
        type: string
        description: |-
          Reference to the connection providing credentials for this source (UUID).
          Optional — null for public sources that require no authentication
          (e.g., public Terraform registry, public Helm repos).
      catalog:
        type: boolean
        description: |-
          Whether this source is a curated catalog entry. Catalog sources are managed
          by platform engineers and may be the only sources available to developers
          if the organization enforces catalog-only policy.
      terraformRegistry:
        $ref: '#/definitions/v1TerraformRegistryConfig'
        description: Terraform Registry Protocol config (for SOURCE_TYPE_TERRAFORM_REGISTRY).
      terraformGit:
        $ref: '#/definitions/v1TerraformGitConfig'
        description: Terraform Git module config (for SOURCE_TYPE_TERRAFORM_GIT).
      helmRepository:
        $ref: '#/definitions/v1HelmRepositoryConfig'
        description: Helm HTTP repository config (for SOURCE_TYPE_HELM_REPOSITORY).
      helmOci:
        $ref: '#/definitions/v1HelmOCIConfig'
        description: Helm OCI config (for SOURCE_TYPE_HELM_OCI).
      helmGit:
        $ref: '#/definitions/v1HelmGitConfig'
        description: Helm Git config (for SOURCE_TYPE_HELM_GIT).
      kustomizeGit:
        $ref: '#/definitions/v1KustomizeGitConfig'
        description: Kustomize Git config (for SOURCE_TYPE_KUSTOMIZE_GIT).
      manifestGit:
        $ref: '#/definitions/v1ManifestGitConfig'
        description: Raw manifest Git config (for SOURCE_TYPE_MANIFEST_GIT).
      archive:
        $ref: '#/definitions/v1ArchiveConfig'
        description: Archive config (for SOURCE_TYPE_ARCHIVE).
      labels:
        type: object
        additionalProperties:
          type: string
        description: |-
          Arbitrary key-value labels for organizing and filtering sources
          (e.g., `{"team": "platform", "category": "database"}`).
      createdBy:
        type: string
        description: User ID who created this source (UUID, server-populated from token).
      updatedBy:
        type: string
        description: User ID who last updated this source (UUID, server-populated from token).
      lastSyncedAt:
        type: string
        format: date-time
        description: |-
          When the source metadata was last synced from the external system
          (registry, Git, Helm repo). Updated by SyncSource and by automatic
          background refresh when discovery RPCs encounter stale cached data.
          Absent if no sync has occurred yet.
      createdAt:
        type: string
        format: date-time
        description: When the source was created.
      updatedAt:
        type: string
        format: date-time
        description: When the source was last updated.
    description: |-
      Source represents a fetchable artifact definition — a pointer to an external
      module, chart, or manifest set that Admiral can fetch, inspect, and render
      into deployment snapshots.

      Sources are tenant-scoped and optionally marked as catalog entries (curated,
      pre-approved artifacts managed by platform engineers).
  v1SourceInput:
    type: object
    properties:
      name:
        type: string
        description: Parameter name (e.g., "instance_class", "replicaCount").
      type:
        type: string
        description: |-
          Type constraint as a string. For Terraform: HCL type expression
          (e.g., "string", "number", "list(string)", "object({name=string})").
          For Helm: JSON Schema type (e.g., "string", "integer", "object").
          Empty if type cannot be determined.
      description:
        type: string
        description: |-
          Human-readable description of the parameter. From Terraform variable
          description or Helm values.schema.json description field.
      defaultValue:
        type: string
        description: |-
          JSON-encoded default value. Null/absent means no default (parameter is
          required). For Terraform, this is the default from the variable block.
          For Helm, this is the value from values.yaml.
      required:
        type: boolean
        description: |-
          Whether this parameter is required (no default value provided).
          For Terraform: true when the variable has no default.
          For Helm: true when values.schema.json marks it as required.
      sensitive:
        type: boolean
        description: |-
          Whether this parameter is sensitive (should be masked in logs and UI).
          For Terraform: from the variable's sensitive attribute.
          For Helm: not typically available.
    description: |-
      SourceInput represents a configurable parameter discovered from the source
      artifact. For Terraform modules, these are variable blocks. For Helm charts,
      these are entries from values.yaml (with optional type info from
      values.schema.json).
  v1SourceOutput:
    type: object
    properties:
      name:
        type: string
        description: Output name (e.g., "endpoint", "db_arn", "connection_string").
      type:
        type: string
        description: Type of the output value, if declared (e.g., "string", "list(string)").
      description:
        type: string
        description: Human-readable description of the output.
      sensitive:
        type: boolean
        description: Whether this output is sensitive (masked in logs and CLI output).
    description: |-
      SourceOutput represents a value produced by the source after apply. Only
      meaningful for Terraform modules, which declare formal output blocks.
      Workload sources (Helm, Kustomize, manifests) do not have formal outputs —
      workload component outputs are user-declared at the component level, not
      discovered from the source.
  v1SourceType:
    type: string
    enum:
      - SOURCE_TYPE_UNSPECIFIED
      - SOURCE_TYPE_TERRAFORM_REGISTRY
      - SOURCE_TYPE_TERRAFORM_GIT
      - SOURCE_TYPE_HELM_REPOSITORY
      - SOURCE_TYPE_HELM_OCI
      - SOURCE_TYPE_HELM_GIT
      - SOURCE_TYPE_KUSTOMIZE_GIT
      - SOURCE_TYPE_MANIFEST_GIT
      - SOURCE_TYPE_ARCHIVE
    default: SOURCE_TYPE_UNSPECIFIED
    description: |-
      SourceType identifies the kind of artifact and the protocol used to fetch it.

       - SOURCE_TYPE_UNSPECIFIED: Default value. Must not be used.
       - SOURCE_TYPE_TERRAFORM_REGISTRY: Terraform module from a module registry (public registry.terraform.io or
      private registries like HCP Terraform). Uses the Terraform Module Registry
      Protocol for version discovery and download.
       - SOURCE_TYPE_TERRAFORM_GIT: Terraform module from a Git repository. Uses go-getter-compatible URL
      format with optional subdirectory (double-slash) and ref pinning.
       - SOURCE_TYPE_HELM_REPOSITORY: Helm chart from a classic HTTP/S chart repository (index.yaml-based).
       - SOURCE_TYPE_HELM_OCI: Helm chart from an OCI-compliant container registry. Uses the OCI
      Distribution Specification for pull operations.
       - SOURCE_TYPE_HELM_GIT: Helm chart from a Git repository directory containing Chart.yaml.
       - SOURCE_TYPE_KUSTOMIZE_GIT: Kustomize overlay from a Git repository. The path must contain a
      kustomization.yaml file.
       - SOURCE_TYPE_MANIFEST_GIT: Raw Kubernetes manifests from a Git repository directory. All YAML/JSON
      files in the path are collected and applied.
       - SOURCE_TYPE_ARCHIVE: Archive (tar.gz, zip) fetched via HTTP, S3, or GCS. Automatically
      extracted. Can contain Terraform modules, Helm charts, or raw manifests
      depending on the content.
  v1SourceVersion:
    type: object
    properties:
      version:
        type: string
        description: |-
          Version identifier. For registry sources, this is a semver string
          (e.g., "1.2.3"). For Git sources, this is a tag name (e.g., "v1.2.3").
          For OCI, this is a tag.
      publishedAt:
        type: string
        format: date-time
        description: |-
          When this version was published or tagged. May not be available for all
          source types.
      description:
        type: string
        description: |-
          Optional description or release notes for this version. Typically only
          available from registry sources.
    description: |-
      SourceVersion represents an available version of a source artifact, as
      reported by the external system (registry, repository, Git tags).
  v1State:
    type: object
    properties:
      id:
        type: string
        description: Unique identifier for the state record (UUID, server-generated).
      componentId:
        type: string
        description: The infrastructure component this state belongs to (UUID).
      environmentId:
        type: string
        description: The environment this state is scoped to (UUID).
      serial:
        type: string
        format: int64
        description: |-
          Terraform state serial number. Monotonically increasing with each
          successful apply. Used for optimistic concurrency control.
      data:
        type: string
        format: byte
        description: |-
          The raw Terraform state data (JSON-encoded). This is the opaque
          `.tfstate` blob managed by Terraform. Can be several megabytes for
          large workspaces.
      md5:
        type: string
        description: |-
          MD5 hash of the state data. Used by Terraform for integrity checks
          and conditional updates.
      lineage:
        type: string
        description: |-
          Terraform state lineage — a UUID generated on first init. All
          subsequent writes must match this lineage to prevent cross-state
          contamination.
      lock:
        $ref: '#/definitions/v1StateLock'
        description: Active lock on this state, if any. Absent when the state is unlocked.
      createdAt:
        type: string
        format: date-time
        description: When the state record was first created.
      updatedAt:
        type: string
        format: date-time
        description: When the state data was last updated (last successful PushState).
    description: |-
      State represents the full Terraform state for an infrastructure component
      in a specific environment, including the raw state data blob. Each
      component + environment combination has at most one state record. The
      server creates the record on first PushState.

      This message is returned by GetCurrentState. For list operations, see
      StateSummary which omits the data blob.
  v1StateLock:
    type: object
    properties:
      lockId:
        type: string
        description: Unique identifier for the lock (UUID, generated by Terraform/OpenTofu).
      operation:
        type: string
        description: |-
          The Terraform operation holding the lock. Common values:
            - "OperationTypePlan"
            - "OperationTypeApply"
          This value is set by the Terraform client and is informational only.
      who:
        type: string
        description: |-
          Identifier of who holds the lock. Populated by Terraform — typically
          the format "username@hostname" (e.g., "deploy@prod-runner-01").
          This field is informational only; its format is controlled by Terraform.
      version:
        type: string
        description: |-
          Terraform/OpenTofu version string of the client holding the lock
          (e.g., "1.7.5").
      acquiredAt:
        type: string
        format: date-time
        description: When the lock was acquired.
    description: |-
      StateLock represents an exclusive lock on a state record. Terraform acquires
      locks before plan/apply to prevent concurrent modifications. The lock_id is
      generated by Terraform (as a UUID) and included in all lock/unlock requests.
  v1StateSummary:
    type: object
    properties:
      id:
        type: string
        description: Unique identifier for the state record (UUID).
      componentId:
        type: string
        description: The infrastructure component this state belongs to (UUID).
      environmentId:
        type: string
        description: The environment this state is scoped to (UUID).
      serial:
        type: string
        format: int64
        description: Terraform state serial number.
      md5:
        type: string
        description: MD5 hash of the current state data.
      lineage:
        type: string
        description: Terraform state lineage.
      sizeBytes:
        type: string
        format: int64
        description: Size of the current state data in bytes.
      lock:
        $ref: '#/definitions/v1StateLock'
        description: Active lock on this state, if any. Absent when the state is unlocked.
      createdAt:
        type: string
        format: date-time
        description: When the state record was first created.
      updatedAt:
        type: string
        format: date-time
        description: When the state data was last updated (last successful PushState).
    description: |-
      StateSummary contains state metadata without the raw data blob. Used in
      ListStates to keep list responses lightweight. Use GetCurrentState to
      fetch the full state data for a specific record.
  v1StateVersion:
    type: object
    properties:
      serial:
        type: string
        format: int64
        description: Terraform state serial number for this version.
      md5:
        type: string
        description: MD5 hash of the state data at this version.
      lineage:
        type: string
        description: Terraform state lineage.
      sizeBytes:
        type: string
        format: int64
        description: Size of the state data in bytes.
      jobId:
        type: string
        description: |-
          The job that produced this state version (UUID). Absent for state that
          was written outside the normal job lifecycle — for example, state
          uploaded directly via an admin migration tool, or state that existed
          before Admiral began managing the component.
      createdAt:
        type: string
        format: date-time
        description: When this state version was created.
    description: |-
      StateVersion contains metadata about a historical state version. Used in
      ListStateVersions to provide version history without the full state data
      blob.
  v1SyncSourceResponse:
    type: object
    properties:
      source:
        $ref: '#/definitions/v1Source'
        description: The source with refreshed metadata.
    description: SyncSourceResponse confirms the sync was triggered.
  v1TerraformGitConfig:
    type: object
    properties:
      path:
        type: string
        description: |-
          Subdirectory within the repository containing the module root.
          Uses double-slash convention (e.g., "modules/vpc"). Empty means repo root.
      defaultRef:
        type: string
        description: |-
          Default Git ref (branch, tag, or commit SHA) to use when no version is
          specified. Typically a branch name like "main" or a tag like "v1.0.0".
    description: |-
      TerraformGitConfig provides additional parameters for Terraform modules
      sourced from Git repositories.
  v1TerraformPlanSummary:
    type: object
    properties:
      additions:
        type: integer
        format: int32
        description: Number of resources to be created.
      changes:
        type: integer
        format: int32
        description: Number of resources to be updated in place.
      destructions:
        type: integer
        format: int32
        description: Number of resources to be destroyed.
    description: TerraformPlanSummary provides resource change counts from a Terraform plan.
  v1TerraformRegistryConfig:
    type: object
    properties:
      namespace:
        type: string
        description: Module namespace in the registry (e.g., "hashicorp", "myorg").
      moduleName:
        type: string
        description: Module name in the registry (e.g., "consul", "rds").
      system:
        type: string
        description: Target system / provider (e.g., "aws", "azurerm", "google").
    description: |-
      TerraformRegistryConfig provides additional parameters for Terraform module
      registry sources.
  v1TestConnectionResponse:
    type: object
    properties:
      connection:
        $ref: '#/definitions/v1Connection'
        description: The updated connection with refreshed status and last_tested_at.
      success:
        type: boolean
        description: Whether the test succeeded.
      message:
        type: string
        description: |-
          Human-readable message describing the test result. On failure, includes
          the error details (e.g., "401 Unauthorized: token expired").
    description: TestConnectionResponse contains the result of the connectivity test.
  v1TokenType:
    type: string
    enum:
      - TOKEN_TYPE_UNSPECIFIED
      - TOKEN_TYPE_PAT
      - TOKEN_TYPE_AGT
    default: TOKEN_TYPE_UNSPECIFIED
    description: |-
      TokenType identifies the category of an access token issued by Admiral's token system.
      IDP-issued JWTs (OAuth2/OIDC sessions) are NOT represented here — they are
      resolved by separate middleware and can be referenced as "session" in
      AuthRule.allowed_token_types when needed.

       - TOKEN_TYPE_UNSPECIFIED: Default value. Must not be used.
       - TOKEN_TYPE_PAT: Personal Access Token, bound to a user.
       - TOKEN_TYPE_AGT: Agent Token, bound to a cluster or runner.
  v1UnlockStateResponse:
    type: object
    description: UnlockStateResponse confirms the lock was released.
  v1UpdateApplicationResponse:
    type: object
    properties:
      application:
        $ref: '#/definitions/v1Application'
        description: The updated application.
    description: UpdateApplicationResponse contains the updated application.
  v1UpdateClusterResponse:
    type: object
    properties:
      cluster:
        $ref: '#/definitions/v1Cluster'
        description: The updated cluster.
    description: UpdateClusterResponse contains the updated cluster.
  v1UpdateComponentResponse:
    type: object
    properties:
      component:
        $ref: '#/definitions/v1Component'
        description: The updated component.
    description: UpdateComponentResponse contains the updated component.
  v1UpdateConnectionResponse:
    type: object
    properties:
      connection:
        $ref: '#/definitions/v1Connection'
        description: The updated connection. Sensitive credential fields are masked.
    description: UpdateConnectionResponse contains the updated connection.
  v1UpdateEnvironmentResponse:
    type: object
    properties:
      environment:
        $ref: '#/definitions/v1Environment'
        description: The updated environment.
    description: UpdateEnvironmentResponse contains the updated environment.
  v1UpdateRunnerResponse:
    type: object
    properties:
      runner:
        $ref: '#/definitions/v1Runner'
        description: The updated runner.
    description: UpdateRunnerResponse contains the updated runner.
  v1UpdateSourceResponse:
    type: object
    properties:
      source:
        $ref: '#/definitions/v1Source'
        description: The updated source.
    description: UpdateSourceResponse contains the updated source.
  v1UpdateVariableResponse:
    type: object
    properties:
      variable:
        $ref: '#/definitions/v1Variable'
        description: The updated variable.
    description: UpdateVariableResponse contains the updated variable.
  v1User:
    type: object
    properties:
      id:
        type: string
        description: Unique identifier for the user (UUID).
      tenantId:
        type: string
        description: The tenant this user belongs to (UUID).
      email:
        type: string
        description: User's email address.
      displayName:
        type: string
        description: User's display name for UI purposes.
      givenName:
        type: string
        description: User's given (first) name.
      familyName:
        type: string
        description: User's family (last) name.
      avatarUrl:
        type: string
        description: URL to the user's avatar image.
      createdAt:
        type: string
        format: date-time
        description: When the user was created.
      updatedAt:
        type: string
        format: date-time
        description: When the user was last updated.
    description: User represents the authenticated user's profile information.
  v1Variable:
    type: object
    properties:
      id:
        type: string
        description: Unique identifier for the variable (UUID).
      tenantId:
        type: string
        description: Tenant this variable belongs to (UUID).
      key:
        type: string
        description: |-
          The variable name. Must be a valid environment variable identifier
          (e.g., "DATABASE_URL", "API_KEY"). Alphanumeric and underscores
          (uppercase conventional but lowercase accepted), must start with a letter
          or underscore (max 255 chars).
      value:
        type: string
        description: |-
          The variable value. Always stored as a string — use `type` to indicate
          how to interpret it. Masked or empty for sensitive variables in responses.

          For COMPLEX type, this is a JSON-encoded string (e.g., '["a","b"]' or
          '{"key":"value"}'). The rendering engine converts it to the target format
          (HCL for Terraform, YAML for Helm).
      sensitive:
        type: boolean
        description: Whether the variable value is encrypted at rest and masked in API responses.
      type:
        $ref: '#/definitions/v1VariableType'
        description: |-
          How the value should be interpreted by the rendering engine and displayed
          in the UI. Defaults to STRING if not specified.
      description:
        type: string
        description: |-
          Optional description of the variable's purpose (e.g., "Maximum replica
          count for production scaling" or "RDS instance class per environment").
      applicationId:
        type: string
        description: |-
          The application this variable is scoped to (UUID). When set, the variable
          is scoped to this application. When both application_id and environment_id
          are set, the variable is scoped to that specific environment.
          Absent means the variable is global (tenant-wide).
      environmentId:
        type: string
        description: |-
          The environment this variable is scoped to (UUID). Requires application_id.
          When set alongside application_id, the variable applies only to this
          specific environment within the application.
      createdBy:
        type: string
        description: User ID who created this variable (UUID, server-populated from token).
      updatedBy:
        type: string
        description: User ID who last updated this variable (UUID, server-populated from token).
      createdAt:
        type: string
        format: date-time
        description: When the variable was created.
      updatedAt:
        type: string
        format: date-time
        description: When the variable was last updated.
    description: |-
      Variable represents a configuration key-value pair scoped to a tenant,
      application, or application+environment. Variables are resolved at deployment
      time into immutable deployment snapshots.

      Variables are user-managed configuration values, distinct from component
      outputs which are system-managed values produced by apply (e.g., Terraform
      outputs). Component outputs are resolved at render time and referenced via
      a separate namespace ({{ .component.<name>.<output> }}).
  v1VariableType:
    type: string
    enum:
      - VARIABLE_TYPE_UNSPECIFIED
      - VARIABLE_TYPE_STRING
      - VARIABLE_TYPE_NUMBER
      - VARIABLE_TYPE_BOOLEAN
      - VARIABLE_TYPE_COMPLEX
    default: VARIABLE_TYPE_UNSPECIFIED
    description: |-
      VariableType indicates how the variable value should be interpreted by the
      rendering engine and displayed in the UI. The value is always stored as a
      string regardless of type.

       - VARIABLE_TYPE_UNSPECIFIED: Default value. Must not be used.
       - VARIABLE_TYPE_STRING: Plain text value. Quoted when rendered into Terraform HCL, passed as-is
      for Helm and Kustomize. Rendered as a text input in the UI.
       - VARIABLE_TYPE_NUMBER: Numeric value (integer or decimal). Unquoted when rendered into Terraform
      HCL. Rendered as a number input in the UI.
       - VARIABLE_TYPE_BOOLEAN: Boolean value ("true" or "false"). Unquoted when rendered into Terraform
      HCL. Rendered as a toggle in the UI.
       - VARIABLE_TYPE_COMPLEX: Structured value (lists, maps, objects). Stored as a JSON-encoded string
      (e.g., '["us-east-1a","us-east-1b"]' or '{"env":"prod","team":"platform"}').
      Rendered as HCL for Terraform, YAML for Helm, or JSON for other consumers.
      Rendered as a code editor in the UI.
  v1Workload:
    type: object
    properties:
      id:
        type: string
        description: Unique identifier for the workload within Admiral (UUID).
      clusterId:
        type: string
        description: The cluster this workload belongs to (UUID).
      namespace:
        type: string
        description: Kubernetes namespace.
      name:
        type: string
        description: Workload name.
      kind:
        type: string
        description: Kubernetes resource kind (e.g., "Deployment", "StatefulSet", "DaemonSet").
      labels:
        type: object
        additionalProperties:
          type: string
        description: Kubernetes labels on the workload.
      healthStatus:
        $ref: '#/definitions/v1WorkloadHealthStatus'
        description: Derived health status.
      statusReason:
        type: string
        description: Human-readable reason for the current status (e.g., "MinimumReplicasUnavailable").
      replicasDesired:
        type: integer
        format: int32
        description: Number of desired replicas.
      replicasReady:
        type: integer
        format: int32
        description: Number of ready replicas.
      replicasAvailable:
        type: integer
        format: int32
        description: Number of available replicas.
      cpuRequestsMillicores:
        type: string
        format: int64
        description: CPU requests across all containers, in millicores.
      cpuLimitsMillicores:
        type: string
        format: int64
        description: CPU limits across all containers, in millicores.
      cpuUsedMillicores:
        type: string
        format: int64
        description: Current CPU usage across all containers, in millicores.
      memoryRequestsBytes:
        type: string
        format: int64
        description: Memory requests across all containers, in bytes.
      memoryLimitsBytes:
        type: string
        format: int64
        description: Memory limits across all containers, in bytes.
      memoryUsedBytes:
        type: string
        format: int64
        description: Current memory usage across all containers, in bytes.
      containers:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1ContainerStatus'
        description: Status of individual containers in this workload.
      lastUpdatedAt:
        type: string
        format: date-time
        description: When this workload's status was last updated.
    description: |-
      Workload represents a Kubernetes workload (Deployment, StatefulSet,
      DaemonSet, etc.) as observed by the agent.
  v1WorkloadEvent:
    type: object
    properties:
      uid:
        type: string
        description: Kubernetes event UID, used for deduplication.
      type:
        type: string
        description: 'Event type: "Normal" or "Warning".'
      reason:
        type: string
        description: Short machine-readable reason (e.g., "BackOff", "FailedScheduling").
      regarding:
        $ref: '#/definitions/v1ObjectReference'
        description: The Kubernetes object this event is about.
      message:
        type: string
        description: Human-readable event message.
      firstSeen:
        type: string
        format: date-time
        description: When this event was first observed.
      lastSeen:
        type: string
        format: date-time
        description: When this event was most recently observed.
      count:
        type: integer
        format: int32
        description: Number of times this event has occurred.
    description: |-
      WorkloadEvent represents a Kubernetes event related to a workload or its
      child objects (pods, replicasets). Events are deduplicated by their K8s UID.
  v1WorkloadHealthStatus:
    type: string
    enum:
      - WORKLOAD_HEALTH_STATUS_UNSPECIFIED
      - WORKLOAD_HEALTH_STATUS_HEALTHY
      - WORKLOAD_HEALTH_STATUS_DEGRADED
      - WORKLOAD_HEALTH_STATUS_ERROR
    default: WORKLOAD_HEALTH_STATUS_UNSPECIFIED
    description: |-
      WorkloadHealthStatus represents the derived health state of a single workload.

       - WORKLOAD_HEALTH_STATUS_UNSPECIFIED: Default value. Must not be used.
       - WORKLOAD_HEALTH_STATUS_HEALTHY: All desired replicas ready, no CrashLoopBackOff, restarts stable.
       - WORKLOAD_HEALTH_STATUS_DEGRADED: Some replicas not ready, restarts increasing, or pods pending over 5 minutes.
       - WORKLOAD_HEALTH_STATUS_ERROR: Zero ready replicas, all containers CrashLoopBackOff, or deployment stuck.
  v1WorkloadStatus:
    type: object
    properties:
      namespace:
        type: string
        description: Kubernetes namespace.
      name:
        type: string
        description: Workload name.
      kind:
        type: string
        description: Kubernetes resource kind (e.g., "Deployment", "StatefulSet").
      labels:
        type: object
        additionalProperties:
          type: string
        description: Kubernetes labels on the workload.
      replicasDesired:
        type: integer
        format: int32
        description: Number of desired replicas.
      replicasReady:
        type: integer
        format: int32
        description: Number of ready replicas.
      replicasAvailable:
        type: integer
        format: int32
        description: Number of available replicas.
      cpuRequestsMillicores:
        type: string
        format: int64
        description: CPU requests across all containers, in millicores.
      cpuLimitsMillicores:
        type: string
        format: int64
        description: CPU limits across all containers, in millicores.
      cpuUsedMillicores:
        type: string
        format: int64
        description: Current CPU usage across all containers, in millicores.
      memoryRequestsBytes:
        type: string
        format: int64
        description: Memory requests across all containers, in bytes.
      memoryLimitsBytes:
        type: string
        format: int64
        description: Memory limits across all containers, in bytes.
      memoryUsedBytes:
        type: string
        format: int64
        description: Current memory usage across all containers, in bytes.
      healthStatus:
        $ref: '#/definitions/v1WorkloadHealthStatus'
        description: Derived health status.
      containers:
        type: array
        items:
          type: object
          $ref: '#/definitions/v1ContainerStatus'
        description: Status of individual containers.
    description: |-
      WorkloadStatus is the agent-reported status for a single workload within
      a telemetry push payload.
