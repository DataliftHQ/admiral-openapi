openapi: 3.1.0
info:
  title: Admiral API
  description: Admiral API
  version: 0.0.0
paths:
  /healthz:
    get:
      tags:
        - admiral.api.healthcheck.v1.HealthcheckAPI
      summary: Healthcheck
      description: |-
        Healthcheck verifies that the service is running and healthy.
         Returns an empty response on success. Use this endpoint for load balancer
         health checks and monitoring systems.
      operationId: admiral.api.healthcheck.v1.HealthcheckAPI.Healthcheck2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.healthcheck.v1.HealthcheckResponse'
  /v1/applications:
    get:
      tags:
        - admiral.api.application.v1.ApplicationAPI
      summary: |-
        ListApplications returns a paginated list of applications within the
         caller's tenant.
      description: 'Scope: `app:read`'
      operationId: admiral.api.application.v1.ApplicationAPI.ListApplications
      parameters:
        - name: filter
          in: query
          description: Filter expression using the PEG filter DSL.
          schema:
            type: string
            title: filter
            description: Filter expression using the PEG filter DSL.
        - name: pageSize
          in: query
          description: Maximum number of applications to return per page.
          schema:
            type: integer
            title: page_size
            format: int32
            description: Maximum number of applications to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.application.v1.ListApplicationsResponse'
    post:
      tags:
        - admiral.api.application.v1.ApplicationAPI
      summary: CreateApplication creates a new application within the caller's tenant.
      description: 'Scope: `app:write`'
      operationId: admiral.api.application.v1.ApplicationAPI.CreateApplication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/admiral.api.application.v1.CreateApplicationRequest'
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.application.v1.CreateApplicationResponse'
  /v1/applications/{application.id}:
    patch:
      tags:
        - admiral.api.application.v1.ApplicationAPI
      summary: |-
        UpdateApplication updates an application's mutable fields.
         Use the `update_mask` to specify which fields to update.
      description: 'Scope: `app:write`'
      operationId: admiral.api.application.v1.ApplicationAPI.UpdateApplication
      parameters:
        - name: application.id
          in: path
          description: Unique identifier for the application (UUID).
          required: true
          schema:
            type: string
            title: id
            format: uuid
            description: Unique identifier for the application (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                application:
                  title: application
                  description: |-
                    The application with updated fields. The `id` field is required.
                     Only fields specified in `update_mask` are updated.
                  $ref: '#/components/schemas/admiral.api.application.v1.Application'
                updateMask:
                  title: update_mask
                  description: |-
                    The set of fields to update. If unset, all mutable fields are updated.
                     Supported fields: `name`, `description`, `labels`.
                  $ref: '#/components/schemas/google.protobuf.FieldMask'
              title: UpdateApplicationRequest
              required:
                - application
              additionalProperties: false
              description: UpdateApplicationRequest contains the application fields to update.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.application.v1.UpdateApplicationResponse'
  /v1/applications/{application_id}:
    get:
      tags:
        - admiral.api.application.v1.ApplicationAPI
      summary: GetApplication retrieves an application by ID.
      description: 'Scope: `app:read`'
      operationId: admiral.api.application.v1.ApplicationAPI.GetApplication
      parameters:
        - name: application_id
          in: path
          description: The unique identifier of the application (UUID).
          required: true
          schema:
            type: string
            title: application_id
            format: uuid
            description: The unique identifier of the application (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.application.v1.GetApplicationResponse'
    delete:
      tags:
        - admiral.api.application.v1.ApplicationAPI
      summary: |-
        DeleteApplication permanently deletes an application and all of its
         associated environments. This action cannot be undone.
      description: 'Scope: `app:write`'
      operationId: admiral.api.application.v1.ApplicationAPI.DeleteApplication
      parameters:
        - name: application_id
          in: path
          description: The unique identifier of the application to delete (UUID).
          required: true
          schema:
            type: string
            title: application_id
            format: uuid
            description: The unique identifier of the application to delete (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.application.v1.DeleteApplicationResponse'
  /v1/clusters:
    get:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: ListClusters returns a paginated list of clusters within the caller's tenant.
      description: 'Scope: `cluster:read`'
      operationId: admiral.api.cluster.v1.ClusterAPI.ListClusters
      parameters:
        - name: filter
          in: query
          description: Filter expression using the PEG filter DSL
          schema:
            type: string
            title: filter
            description: Filter expression using the PEG filter DSL
        - name: pageSize
          in: query
          description: Maximum number of clusters to return per page.
          schema:
            type: integer
            title: page_size
            format: int32
            description: Maximum number of clusters to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.ListClustersResponse'
    post:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        CreateCluster creates a new cluster record within the caller's tenant and
         generates an initial Agent Token (AGT) for the K8s agent. The cluster
         starts in PENDING status until an agent registers against it.
      description: |-
        The response includes a `plain_text_token` — the raw AGT secret shown
         exactly once. Deploy this token to the K8s agent (e.g., via Helm values
         or a Kubernetes Secret). The agent uses it to authenticate with
         AgentAPI.RegisterAgent on first boot.

         Scope: `cluster:write`
      operationId: admiral.api.cluster.v1.ClusterAPI.CreateCluster
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/admiral.api.cluster.v1.CreateClusterRequest'
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.CreateClusterResponse'
  /v1/clusters/{cluster.id}:
    patch:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        UpdateCluster updates a cluster's mutable fields.
         Use the `update_mask` to specify which fields to update.
      description: 'Scope: `cluster:write`'
      operationId: admiral.api.cluster.v1.ClusterAPI.UpdateCluster
      parameters:
        - name: cluster.id
          in: path
          description: Unique identifier for the cluster (UUID).
          required: true
          schema:
            type: string
            title: id
            format: uuid
            description: Unique identifier for the cluster (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                cluster:
                  title: cluster
                  description: |-
                    The cluster with updated fields. The `id` field is required.
                     Only fields specified in `update_mask` are updated.
                  $ref: '#/components/schemas/admiral.api.cluster.v1.Cluster'
                updateMask:
                  title: update_mask
                  description: |-
                    The set of fields to update. If unset, all mutable fields are updated.
                     Supported fields: `name`, `description`, `labels`.
                  $ref: '#/components/schemas/google.protobuf.FieldMask'
              title: UpdateClusterRequest
              required:
                - cluster
              additionalProperties: false
              description: UpdateClusterRequest contains the cluster fields to update.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.UpdateClusterResponse'
  /v1/clusters/{cluster_id}:
    get:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: GetCluster retrieves a cluster by ID.
      description: |-
        Returns the Cluster record with its server-derived health_status. For
         detailed telemetry (node counts, resource usage, workload summary), use
         GetClusterStatus instead.

         Scope: `cluster:read`
      operationId: admiral.api.cluster.v1.ClusterAPI.GetCluster
      parameters:
        - name: cluster_id
          in: path
          description: The unique identifier of the cluster (UUID).
          required: true
          schema:
            type: string
            title: cluster_id
            format: uuid
            description: The unique identifier of the cluster (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.GetClusterResponse'
    delete:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        DeleteCluster permanently deletes a cluster record and revokes all
         associated agent tokens. This action cannot be undone.
      description: 'Scope: `cluster:write`'
      operationId: admiral.api.cluster.v1.ClusterAPI.DeleteCluster
      parameters:
        - name: cluster_id
          in: path
          description: |-
            The unique identifier of the cluster to delete (UUID).
             All associated agent tokens will be revoked.
          required: true
          schema:
            type: string
            title: cluster_id
            format: uuid
            description: |-
              The unique identifier of the cluster to delete (UUID).
               All associated agent tokens will be revoked.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.DeleteClusterResponse'
  /v1/clusters/{cluster_id}/status:
    get:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        GetClusterStatus retrieves the current telemetry snapshot for a cluster.
         Returns the latest metrics pushed by the agent, along with server-derived
         health status and workload summary counts.
      description: |-
        Returns NOT_FOUND if the cluster does not exist. If the cluster exists but
         no agent has reported telemetry yet, the response will have health_status
         PENDING and no status message.

         Scope: `cluster:read`
      operationId: admiral.api.cluster.v1.ClusterAPI.GetClusterStatus
      parameters:
        - name: cluster_id
          in: path
          description: The unique identifier of the cluster (UUID).
          required: true
          schema:
            type: string
            title: cluster_id
            format: uuid
            description: The unique identifier of the cluster (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.GetClusterStatusResponse'
    post:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        ReportClusterStatus receives a combined telemetry snapshot from a K8s agent.
         The payload includes cluster-level metrics, per-workload status, and
         Kubernetes events. Admiral splits this into three storage tiers on receipt.
      description: |-
        This endpoint is agent-facing and restricted to agent tokens.

         Scope: `cluster:status` | Token types: `agt`
      operationId: admiral.api.cluster.v1.ClusterAPI.ReportClusterStatus
      parameters:
        - name: cluster_id
          in: path
          description: The cluster this status report is for (UUID).
          required: true
          schema:
            type: string
            title: cluster_id
            format: uuid
            description: The cluster this status report is for (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                status:
                  title: status
                  description: Cluster-level telemetry snapshot.
                  $ref: '#/components/schemas/admiral.api.cluster.v1.ClusterStatus'
                workloads:
                  type: array
                  items:
                    $ref: '#/components/schemas/admiral.api.cluster.v1.WorkloadStatus'
                  title: workloads
                  description: Per-workload status snapshots.
                events:
                  type: array
                  items:
                    $ref: '#/components/schemas/admiral.api.cluster.v1.WorkloadEvent'
                  title: events
                  description: Kubernetes events observed since the last push.
                reportedAt:
                  title: reported_at
                  description: When the agent generated this report.
                  $ref: '#/components/schemas/google.protobuf.Timestamp'
              title: ReportClusterStatusRequest
              required:
                - status
              additionalProperties: false
              description: |-
                ReportClusterStatusRequest contains a combined telemetry payload from a K8s agent.
                 Admiral splits this into three storage tiers: current snapshot, time-series
                 metrics, and events.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.ReportClusterStatusResponse'
  /v1/clusters/{cluster_id}/tokens:
    get:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        ListClusterTokens returns a paginated list of AGTs bound to the specified
         cluster. Token secrets are never included.
      description: 'Scope: `cluster:read`'
      operationId: admiral.api.cluster.v1.ClusterAPI.ListClusterTokens
      parameters:
        - name: cluster_id
          in: path
          description: The cluster whose tokens to list (UUID).
          required: true
          schema:
            type: string
            title: cluster_id
            format: uuid
            description: The cluster whose tokens to list (UUID).
        - name: pageSize
          in: query
          description: Maximum number of tokens to return per page.
          schema:
            type: integer
            title: page_size
            format: int32
            description: Maximum number of tokens to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
        - name: filter
          in: query
          description: Filter expression using the PEG filter DSL.
          schema:
            type: string
            title: filter
            description: Filter expression using the PEG filter DSL.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.ListClusterTokensResponse'
    post:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        CreateClusterToken creates a new Agent Token (AGT) bound to the specified
         cluster. Scopes are auto-assigned and cannot be overridden. The response
         includes the raw token secret, which is shown exactly once.
      description: |-
        Use this to create additional AGTs for an existing cluster (e.g., for
         zero-downtime token rotation). The initial AGT is created automatically
         by CreateCluster.

         Scope: `cluster:write`
      operationId: admiral.api.cluster.v1.ClusterAPI.CreateClusterToken
      parameters:
        - name: cluster_id
          in: path
          description: The cluster to bind this token to (UUID).
          required: true
          schema:
            type: string
            title: cluster_id
            format: uuid
            description: The cluster to bind this token to (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                displayName:
                  type: string
                  title: display_name
                  maxLength: 255
                  minLength: 1
                  description: Human-readable name for the token (e.g., "prod-us-east-1-agent-key").
                expiresAt:
                  title: expires_at
                  description: Optional expiration time. If unset, the token does not expire.
                  $ref: '#/components/schemas/google.protobuf.Timestamp'
              title: CreateClusterTokenRequest
              additionalProperties: false
              description: |-
                CreateClusterTokenRequest contains the parameters for creating a new AGT
                 bound to a cluster.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.CreateClusterTokenResponse'
  /v1/clusters/{cluster_id}/tokens/{token_id}:
    get:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        GetClusterToken retrieves a single AGT by ID.
         Returns metadata only — the token secret is never included.
      description: 'Scope: `cluster:read`'
      operationId: admiral.api.cluster.v1.ClusterAPI.GetClusterToken
      parameters:
        - name: cluster_id
          in: path
          description: The cluster the token belongs to (UUID).
          required: true
          schema:
            type: string
            title: cluster_id
            format: uuid
            description: The cluster the token belongs to (UUID).
        - name: token_id
          in: path
          description: The unique identifier of the token (UUID).
          required: true
          schema:
            type: string
            title: token_id
            format: uuid
            description: The unique identifier of the token (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.GetClusterTokenResponse'
  /v1/clusters/{cluster_id}/tokens/{token_id}/revoke:
    post:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        RevokeClusterToken permanently revokes an AGT bound to this cluster.
         The agent will receive a 401 on its next request. If this is the only
         active AGT for the cluster, the agent will become disconnected.
      description: 'Scope: `cluster:write`'
      operationId: admiral.api.cluster.v1.ClusterAPI.RevokeClusterToken
      parameters:
        - name: cluster_id
          in: path
          description: The cluster the token belongs to (UUID).
          required: true
          schema:
            type: string
            title: cluster_id
            format: uuid
            description: The cluster the token belongs to (UUID).
        - name: token_id
          in: path
          description: The unique identifier of the token to revoke (UUID).
          required: true
          schema:
            type: string
            title: token_id
            format: uuid
            description: The unique identifier of the token to revoke (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.RevokeClusterTokenResponse'
  /v1/clusters/{cluster_id}/workloads:
    get:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: ListWorkloads returns a paginated list of workloads running in a specific cluster.
      description: 'Scope: `cluster:read`'
      operationId: admiral.api.cluster.v1.ClusterAPI.ListWorkloads
      parameters:
        - name: cluster_id
          in: path
          description: The cluster whose workloads to list (UUID).
          required: true
          schema:
            type: string
            title: cluster_id
            format: uuid
            description: The cluster whose workloads to list (UUID).
        - name: filter
          in: query
          description: Filter expression using the PEG filter DSL
          schema:
            type: string
            title: filter
            description: Filter expression using the PEG filter DSL
        - name: pageSize
          in: query
          description: Maximum number of workloads to return per page.
          schema:
            type: integer
            title: page_size
            format: int32
            description: Maximum number of workloads to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.ListWorkloadsResponse'
  /v1/clusters/{cluster_id}/workloads/status:
    post:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        ReportWorkloadStatus receives workload-only telemetry from a K8s agent.
         Used for incremental workload updates between full cluster status pushes.
      description: |-
        This endpoint is agent-facing and restricted to agent tokens.

         Scope: `cluster:status` | Token types: `agt`
      operationId: admiral.api.cluster.v1.ClusterAPI.ReportWorkloadStatus
      parameters:
        - name: cluster_id
          in: path
          description: The cluster these workloads belong to (UUID).
          required: true
          schema:
            type: string
            title: cluster_id
            format: uuid
            description: The cluster these workloads belong to (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                workloads:
                  type: array
                  items:
                    $ref: '#/components/schemas/admiral.api.cluster.v1.WorkloadStatus'
                  title: workloads
                  description: Per-workload status snapshots.
                reportedAt:
                  title: reported_at
                  description: When the agent generated this report.
                  $ref: '#/components/schemas/google.protobuf.Timestamp'
              title: ReportWorkloadStatusRequest
              additionalProperties: false
              description: ReportWorkloadStatusRequest contains incremental workload telemetry from a K8s agent.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.ReportWorkloadStatusResponse'
  /v1/environments:
    get:
      tags:
        - admiral.api.environment.v1.EnvironmentAPI
      summary: |-
        ListEnvironments returns a paginated list of environments. Use the filter
         to scope by application, cluster, or labels.
      description: 'Scope: `env:read`'
      operationId: admiral.api.environment.v1.EnvironmentAPI.ListEnvironments
      parameters:
        - name: filter
          in: query
          description: Filter expression using the PEG filter DSL.
          schema:
            type: string
            title: filter
            description: Filter expression using the PEG filter DSL.
        - name: pageSize
          in: query
          description: Maximum number of environments to return per page.
          schema:
            type: integer
            title: page_size
            format: int32
            description: Maximum number of environments to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.environment.v1.ListEnvironmentsResponse'
    post:
      tags:
        - admiral.api.environment.v1.EnvironmentAPI
      summary: CreateEnvironment creates a new environment for the specified application.
      description: 'Scope: `env:write`'
      operationId: admiral.api.environment.v1.EnvironmentAPI.CreateEnvironment
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/admiral.api.environment.v1.CreateEnvironmentRequest'
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.environment.v1.CreateEnvironmentResponse'
  /v1/environments/{environment.id}:
    patch:
      tags:
        - admiral.api.environment.v1.EnvironmentAPI
      summary: |-
        UpdateEnvironment updates an environment's mutable fields.
         Use the `update_mask` to specify which fields to update.
      description: 'Scope: `env:write`'
      operationId: admiral.api.environment.v1.EnvironmentAPI.UpdateEnvironment
      parameters:
        - name: environment.id
          in: path
          description: Unique identifier for the environment (UUID).
          required: true
          schema:
            type: string
            title: id
            format: uuid
            description: Unique identifier for the environment (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                environment:
                  title: environment
                  description: |-
                    The environment with updated fields. The `id` field is required.
                     Only fields specified in `update_mask` are updated.
                  $ref: '#/components/schemas/admiral.api.environment.v1.Environment'
                updateMask:
                  title: update_mask
                  description: |-
                    The set of fields to update. If unset, all mutable fields are updated.
                     Supported fields: `name`, `cluster_id`, `namespace`, `labels`.
                  $ref: '#/components/schemas/google.protobuf.FieldMask'
              title: UpdateEnvironmentRequest
              required:
                - environment
              additionalProperties: false
              description: UpdateEnvironmentRequest contains the environment fields to update.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.environment.v1.UpdateEnvironmentResponse'
  /v1/environments/{environment_id}:
    get:
      tags:
        - admiral.api.environment.v1.EnvironmentAPI
      summary: GetEnvironment retrieves an environment by ID.
      description: 'Scope: `env:read`'
      operationId: admiral.api.environment.v1.EnvironmentAPI.GetEnvironment
      parameters:
        - name: environment_id
          in: path
          description: The unique identifier of the environment (UUID).
          required: true
          schema:
            type: string
            title: environment_id
            format: uuid
            description: The unique identifier of the environment (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.environment.v1.GetEnvironmentResponse'
    delete:
      tags:
        - admiral.api.environment.v1.EnvironmentAPI
      summary: |-
        DeleteEnvironment permanently deletes an environment. This does not affect
         the underlying cluster or namespace — only the Admiral environment record
         is removed. This action cannot be undone.
      description: 'Scope: `env:write`'
      operationId: admiral.api.environment.v1.EnvironmentAPI.DeleteEnvironment
      parameters:
        - name: environment_id
          in: path
          description: The unique identifier of the environment to delete (UUID).
          required: true
          schema:
            type: string
            title: environment_id
            format: uuid
            description: The unique identifier of the environment to delete (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.environment.v1.DeleteEnvironmentResponse'
  /v1/healthcheck:
    get:
      tags:
        - admiral.api.healthcheck.v1.HealthcheckAPI
      summary: Healthcheck
      description: |-
        Healthcheck verifies that the service is running and healthy.
         Returns an empty response on success. Use this endpoint for load balancer
         health checks and monitoring systems.
      operationId: admiral.api.healthcheck.v1.HealthcheckAPI.Healthcheck
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.healthcheck.v1.HealthcheckResponse'
  /v1/user:
    get:
      tags:
        - admiral.api.user.v1.UserAPI
      summary: GetUser
      description: |-
        GetUser retrieves the profile of the currently authenticated user.
         The user is identified by the authentication token provided in the request.
      operationId: admiral.api.user.v1.UserAPI.GetUser
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.user.v1.GetUserResponse'
  /v1/user/tokens:
    get:
      tags:
        - admiral.api.user.v1.UserAPI
      summary: |-
        ListPersonalAccessTokens returns a paginated list of the authenticated
         user's PATs. Token secrets are never included.
      description: 'Scope: `token:read`'
      operationId: admiral.api.user.v1.UserAPI.ListPersonalAccessTokens
      parameters:
        - name: pageSize
          in: query
          description: Maximum number of tokens to return per page.
          schema:
            type: integer
            title: page_size
            format: int32
            description: Maximum number of tokens to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
        - name: filter
          in: query
          description: |-
            Filter expression using the PEG filter DSL
             (e.g., `status = "active"` or `display_name = "ci-*"`).
          schema:
            type: string
            title: filter
            description: |-
              Filter expression using the PEG filter DSL
               (e.g., `status = "active"` or `display_name = "ci-*"`).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.user.v1.ListPersonalAccessTokensResponse'
    post:
      tags:
        - admiral.api.user.v1.UserAPI
      summary: |-
        CreatePersonalAccessToken creates a new PAT for the authenticated user.
         The response includes the raw token secret, which is shown exactly once
         and cannot be retrieved again.
      description: 'Scope: `token:write`'
      operationId: admiral.api.user.v1.UserAPI.CreatePersonalAccessToken
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/admiral.api.user.v1.CreatePersonalAccessTokenRequest'
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.user.v1.CreatePersonalAccessTokenResponse'
  /v1/user/tokens/{token_id}:
    get:
      tags:
        - admiral.api.user.v1.UserAPI
      summary: |-
        GetPersonalAccessToken retrieves a single PAT by ID.
         Returns metadata only — the token secret is never included.
      description: 'Scope: `token:read`'
      operationId: admiral.api.user.v1.UserAPI.GetPersonalAccessToken
      parameters:
        - name: token_id
          in: path
          description: The unique identifier of the token (UUID).
          required: true
          schema:
            type: string
            title: token_id
            format: uuid
            description: The unique identifier of the token (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.user.v1.GetPersonalAccessTokenResponse'
  /v1/user/tokens/{token_id}/revoke:
    post:
      tags:
        - admiral.api.user.v1.UserAPI
      summary: |-
        RevokePersonalAccessToken permanently revokes a PAT. The token becomes
         immediately unusable and cannot be restored.
      description: 'Scope: `token:write`'
      operationId: admiral.api.user.v1.UserAPI.RevokePersonalAccessToken
      parameters:
        - name: token_id
          in: path
          description: The unique identifier of the token to revoke (UUID).
          required: true
          schema:
            type: string
            title: token_id
            format: uuid
            description: The unique identifier of the token to revoke (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.user.v1.RevokePersonalAccessTokenResponse'
components:
  schemas:
    admiral.api.application.v1.Application:
      type: object
      properties:
        id:
          type: string
          title: id
          format: uuid
          description: Unique identifier for the application (UUID).
        tenantId:
          type: string
          title: tenant_id
          format: uuid
          description: Tenant this application belongs to (UUID).
        name:
          type: string
          title: name
          maxLength: 255
          minLength: 1
          pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
          description: |-
            URL-safe, human-readable identifier (e.g., "billing-api"). Unique within
             the tenant. Lowercase alphanumeric and hyphens only, must start with a
             letter and end with an alphanumeric character (1-63 chars).
        description:
          type: string
          title: description
          maxLength: 1024
          description: |-
            Optional longer-form description of the application's purpose
             (e.g., "Handles invoice generation and payment processing").
        labels:
          type: object
          title: labels
          additionalProperties:
            type: string
            title: value
          description: |-
            Arbitrary key-value labels for organizing and filtering applications
             (e.g., `{"team": "payments", "tier": "critical"}`).
        createdAt:
          title: created_at
          description: When the application was created.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        updatedAt:
          title: updated_at
          description: When the application was last updated.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: Application
      additionalProperties: false
      description: |-
        Application represents a deployable unit within a tenant. An application
         groups manifests, dependencies, and environment configuration into a single
         entity that Admiral orchestrates across environments.
    admiral.api.application.v1.Application.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.application.v1.CreateApplicationRequest:
      type: object
      properties:
        name:
          type: string
          title: name
          maxLength: 255
          minLength: 1
          pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
          description: |-
            URL-safe, human-readable identifier (e.g., "billing-api"). Must be unique
             within the tenant. Lowercase alphanumeric and hyphens only.
        description:
          type:
            - string
            - "null"
          title: description
          maxLength: 1024
          description: Optional longer-form description of the application's purpose.
        labels:
          type: object
          title: labels
          additionalProperties:
            type: string
            title: value
          description: Arbitrary key-value labels for organizing and filtering applications.
      title: CreateApplicationRequest
      additionalProperties: false
      description: CreateApplicationRequest contains the parameters for creating a new application.
    admiral.api.application.v1.CreateApplicationRequest.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.application.v1.CreateApplicationResponse:
      type: object
      properties:
        application:
          title: application
          description: The created application.
          $ref: '#/components/schemas/admiral.api.application.v1.Application'
      title: CreateApplicationResponse
      additionalProperties: false
      description: CreateApplicationResponse contains the newly created application.
    admiral.api.application.v1.DeleteApplicationRequest:
      type: object
      properties:
        applicationId:
          type: string
          title: application_id
          format: uuid
          description: The unique identifier of the application to delete (UUID).
      title: DeleteApplicationRequest
      additionalProperties: false
      description: DeleteApplicationRequest identifies an application to delete.
    admiral.api.application.v1.DeleteApplicationResponse:
      type: object
      title: DeleteApplicationResponse
      additionalProperties: false
      description: DeleteApplicationResponse is empty on success.
    admiral.api.application.v1.GetApplicationRequest:
      type: object
      properties:
        applicationId:
          type: string
          title: application_id
          format: uuid
          description: The unique identifier of the application (UUID).
      title: GetApplicationRequest
      additionalProperties: false
      description: GetApplicationRequest identifies an application to retrieve.
    admiral.api.application.v1.GetApplicationResponse:
      type: object
      properties:
        application:
          title: application
          description: The application record.
          $ref: '#/components/schemas/admiral.api.application.v1.Application'
      title: GetApplicationResponse
      additionalProperties: false
      description: GetApplicationResponse contains the application record.
    admiral.api.application.v1.ListApplicationsRequest:
      type: object
      properties:
        filter:
          type: string
          title: filter
          description: Filter expression using the PEG filter DSL.
        pageSize:
          type: integer
          title: page_size
          format: int32
          description: Maximum number of applications to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListApplicationsRequest
      additionalProperties: false
      description: ListApplicationsRequest contains pagination and filter parameters.
    admiral.api.application.v1.ListApplicationsResponse:
      type: object
      properties:
        applications:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.application.v1.Application'
          title: applications
          description: The list of applications.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListApplicationsResponse
      additionalProperties: false
      description: ListApplicationsResponse contains a page of applications.
    admiral.api.application.v1.UpdateApplicationRequest:
      type: object
      properties:
        application:
          title: application
          description: |-
            The application with updated fields. The `id` field is required.
             Only fields specified in `update_mask` are updated.
          $ref: '#/components/schemas/admiral.api.application.v1.Application'
        updateMask:
          title: update_mask
          description: |-
            The set of fields to update. If unset, all mutable fields are updated.
             Supported fields: `name`, `description`, `labels`.
          $ref: '#/components/schemas/google.protobuf.FieldMask'
      title: UpdateApplicationRequest
      required:
        - application
      additionalProperties: false
      description: UpdateApplicationRequest contains the application fields to update.
    admiral.api.application.v1.UpdateApplicationResponse:
      type: object
      properties:
        application:
          title: application
          description: The updated application.
          $ref: '#/components/schemas/admiral.api.application.v1.Application'
      title: UpdateApplicationResponse
      additionalProperties: false
      description: UpdateApplicationResponse contains the updated application.
    admiral.api.cluster.v1.Cluster:
      type: object
      properties:
        id:
          type: string
          title: id
          format: uuid
          description: Unique identifier for the cluster (UUID).
        tenantId:
          type: string
          title: tenant_id
          format: uuid
          description: Tenant this cluster belongs to (UUID).
        name:
          type: string
          title: name
          maxLength: 63
          pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
          description: |-
            URL-safe, human-readable identifier (e.g., "prod-us-east-1"). Unique
             within the tenant. Lowercase alphanumeric and hyphens only, must start
             with a letter and end with an alphanumeric character (1-63 chars).
        description:
          type: string
          title: description
          maxLength: 1024
          description: |-
            Optional longer-form description of the cluster's purpose
             (e.g., "Primary production cluster serving US East traffic").
        labels:
          type: object
          title: labels
          additionalProperties:
            type: string
            title: value
          description: |-
            Arbitrary key-value labels for organizing and filtering clusters
             (e.g., `{"region": "us-east-1", "cloud": "aws"}`).
        clusterUid:
          type: string
          title: cluster_uid
          description: |-
            The Kubernetes kube-system namespace UID, bound at agent registration
             using a first-write-wins strategy. Used to detect when a token is
             accidentally deployed to a different physical cluster.
        healthStatus:
          title: health_status
          description: Derived health status based on agent connectivity and workload state.
          $ref: '#/components/schemas/admiral.api.cluster.v1.ClusterHealthStatus'
        createdAt:
          title: created_at
          description: When the cluster record was created.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        updatedAt:
          title: updated_at
          description: When the cluster record was last updated.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: Cluster
      additionalProperties: false
      description: Cluster represents a registered Kubernetes cluster within a tenant.
    admiral.api.cluster.v1.Cluster.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.cluster.v1.ClusterHealthStatus:
      type: string
      title: ClusterHealthStatus
      enum:
        - CLUSTER_HEALTH_STATUS_UNSPECIFIED
        - CLUSTER_HEALTH_STATUS_PENDING
        - CLUSTER_HEALTH_STATUS_HEALTHY
        - CLUSTER_HEALTH_STATUS_DEGRADED
        - CLUSTER_HEALTH_STATUS_ERROR
        - CLUSTER_HEALTH_STATUS_UNREACHABLE
      description: |-
        ClusterHealthStatus represents the derived health state of a cluster.
         The status is computed from agent connectivity, node readiness, and workload health.
    admiral.api.cluster.v1.ClusterStatus:
      type: object
      properties:
        k8sVersion:
          type: string
          title: k8s_version
          description: Kubernetes version reported by the agent (e.g., "1.29.2").
        nodeCount:
          type: integer
          title: node_count
          format: int32
          description: Total number of nodes in the cluster.
        nodesReady:
          type: integer
          title: nodes_ready
          format: int32
          description: Number of nodes in Ready condition.
        podCapacity:
          type: integer
          title: pod_capacity
          format: int32
          description: Maximum number of pods the cluster can schedule.
        podCount:
          type: integer
          title: pod_count
          format: int32
          description: Total number of pods across all namespaces.
        podsRunning:
          type: integer
          title: pods_running
          format: int32
          description: Number of pods in Running phase.
        podsPending:
          type: integer
          title: pods_pending
          format: int32
          description: Number of pods in Pending phase.
        podsFailed:
          type: integer
          title: pods_failed
          format: int32
          description: Number of pods in Failed phase.
        cpuCapacityMillicores:
          type:
            - integer
            - string
          title: cpu_capacity_millicores
          format: int64
          description: Total CPU capacity across all nodes, in millicores.
        cpuUsedMillicores:
          type:
            - integer
            - string
          title: cpu_used_millicores
          format: int64
          description: Current CPU usage across all nodes, in millicores.
        memoryCapacityBytes:
          type:
            - integer
            - string
          title: memory_capacity_bytes
          format: int64
          description: Total memory capacity across all nodes, in bytes.
        memoryUsedBytes:
          type:
            - integer
            - string
          title: memory_used_bytes
          format: int64
          description: Current memory usage across all nodes, in bytes.
        workloadsTotal:
          type: integer
          title: workloads_total
          format: int32
          description: Total number of tracked workloads.
        workloadsHealthy:
          type: integer
          title: workloads_healthy
          format: int32
          description: Number of workloads in healthy state.
        workloadsDegraded:
          type: integer
          title: workloads_degraded
          format: int32
          description: Number of workloads in degraded state.
        workloadsError:
          type: integer
          title: workloads_error
          format: int32
          description: Number of workloads in error state.
      title: ClusterStatus
      additionalProperties: false
      description: |-
        ClusterStatus contains the raw telemetry metrics for a cluster, as reported
         by the K8s agent. This message is used in both the push payload
         (ReportClusterStatusRequest) and the read response (GetClusterStatusResponse).

         Server-derived fields (health_status, agent connectivity) are NOT included
         here — they live on the Cluster and Agent records respectively, and are
         returned alongside this message in GetClusterStatusResponse.
    admiral.api.cluster.v1.ContainerStatus:
      type: object
      properties:
        name:
          type: string
          title: name
          description: Container name within the pod spec.
        image:
          type: string
          title: image
          description: Container image reference (e.g., "registry.example.com/api:v2.1.4").
        restartCount:
          type: integer
          title: restart_count
          format: int32
          description: Cumulative number of container restarts.
        state:
          type: string
          title: state
          description: Current container state (e.g., "running", "waiting", "terminated").
        ready:
          type: boolean
          title: ready
          description: Whether the container's readiness probe is passing.
      title: ContainerStatus
      additionalProperties: false
      description: ContainerStatus describes the current state of a single container.
    admiral.api.cluster.v1.CreateClusterRequest:
      type: object
      properties:
        name:
          type: string
          title: name
          maxLength: 63
          pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
          description: |-
            URL-safe, human-readable identifier (e.g., "prod-us-east-1"). Must be
             unique within the tenant. Lowercase alphanumeric and hyphens only.
        description:
          type: string
          title: description
          maxLength: 1024
          description: Optional longer-form description of the cluster's purpose.
        labels:
          type: object
          title: labels
          additionalProperties:
            type: string
            title: value
          description: |-
            Arbitrary key-value labels for organizing and filtering clusters
             (e.g., `{"region": "us-east-1", "cloud": "aws"}`).
      title: CreateClusterRequest
      additionalProperties: false
      description: CreateClusterRequest contains the parameters for creating a new cluster.
    admiral.api.cluster.v1.CreateClusterRequest.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.cluster.v1.CreateClusterResponse:
      type: object
      properties:
        cluster:
          title: cluster
          description: |-
            The created cluster. Health status will be PENDING until an agent connects
             and calls AgentAPI.RegisterAgent.
          $ref: '#/components/schemas/admiral.api.cluster.v1.Cluster'
        plainTextToken:
          type: string
          title: plain_text_token
          description: |-
            The raw Agent Token secret (e.g., "adm_agt_pL2mN5oQ8rS1..."). This value
             is shown exactly once and cannot be retrieved again. Deploy this token to
             the K8s agent for authentication.

             To create additional tokens (e.g., for rotation), use
             AccessTokenAPI.CreateAgentToken.
      title: CreateClusterResponse
      additionalProperties: false
      description: |-
        CreateClusterResponse contains the newly created cluster and its initial
         Agent Token (AGT).
    admiral.api.cluster.v1.CreateClusterTokenRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: The cluster to bind this token to (UUID).
        displayName:
          type: string
          title: display_name
          maxLength: 255
          minLength: 1
          description: Human-readable name for the token (e.g., "prod-us-east-1-agent-key").
        expiresAt:
          title: expires_at
          description: Optional expiration time. If unset, the token does not expire.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: CreateClusterTokenRequest
      additionalProperties: false
      description: |-
        CreateClusterTokenRequest contains the parameters for creating a new AGT
         bound to a cluster.
    admiral.api.cluster.v1.CreateClusterTokenResponse:
      type: object
      properties:
        accessToken:
          title: access_token
          description: The created token metadata. Scopes are auto-assigned for cluster AGTs.
          $ref: '#/components/schemas/admiral.common.v1.AccessToken'
        plainTextToken:
          type: string
          title: plain_text_token
          description: |-
            The raw token secret (e.g., "adm_agt_pL2mN5oQ8rS1..."). This value is
             shown exactly once and cannot be retrieved again. Store it securely.
      title: CreateClusterTokenResponse
      additionalProperties: false
      description: CreateClusterTokenResponse contains the newly created AGT.
    admiral.api.cluster.v1.DeleteClusterRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: |-
            The unique identifier of the cluster to delete (UUID).
             All associated agent tokens will be revoked.
      title: DeleteClusterRequest
      additionalProperties: false
      description: DeleteClusterRequest identifies a cluster to delete.
    admiral.api.cluster.v1.DeleteClusterResponse:
      type: object
      title: DeleteClusterResponse
      additionalProperties: false
      description: DeleteClusterResponse is empty on success.
    admiral.api.cluster.v1.GetClusterRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: The unique identifier of the cluster (UUID).
      title: GetClusterRequest
      additionalProperties: false
      description: GetClusterRequest identifies a cluster to retrieve.
    admiral.api.cluster.v1.GetClusterResponse:
      type: object
      properties:
        cluster:
          title: cluster
          description: The cluster record, including server-derived health_status.
          $ref: '#/components/schemas/admiral.api.cluster.v1.Cluster'
      title: GetClusterResponse
      additionalProperties: false
      description: GetClusterResponse contains the cluster record.
    admiral.api.cluster.v1.GetClusterStatusRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: The unique identifier of the cluster (UUID).
      title: GetClusterStatusRequest
      additionalProperties: false
      description: GetClusterStatusRequest identifies a cluster whose telemetry status to retrieve.
    admiral.api.cluster.v1.GetClusterStatusResponse:
      type: object
      properties:
        healthStatus:
          title: health_status
          description: |-
            Server-derived health status based on agent connectivity, node readiness,
             and workload health.
          $ref: '#/components/schemas/admiral.api.cluster.v1.ClusterHealthStatus'
        status:
          title: status
          description: |-
            Latest telemetry snapshot from the agent. Absent if no telemetry has
             been reported yet.
          $ref: '#/components/schemas/admiral.api.cluster.v1.ClusterStatus'
        reportedAt:
          title: reported_at
          description: When the latest telemetry was reported by the agent.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: GetClusterStatusResponse
      additionalProperties: false
      description: |-
        GetClusterStatusResponse contains the server-derived health status and the
         latest telemetry snapshot. If no agent has reported telemetry yet, the
         health_status will be PENDING and status will be absent.
    admiral.api.cluster.v1.GetClusterTokenRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: The cluster the token belongs to (UUID).
        tokenId:
          type: string
          title: token_id
          format: uuid
          description: The unique identifier of the token (UUID).
      title: GetClusterTokenRequest
      additionalProperties: false
      description: GetClusterTokenRequest identifies a cluster AGT to retrieve.
    admiral.api.cluster.v1.GetClusterTokenResponse:
      type: object
      properties:
        accessToken:
          title: access_token
          description: The token metadata. The token secret is never included.
          $ref: '#/components/schemas/admiral.common.v1.AccessToken'
      title: GetClusterTokenResponse
      additionalProperties: false
      description: GetClusterTokenResponse contains the requested cluster AGT metadata.
    admiral.api.cluster.v1.ListClusterTokensRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: The cluster whose tokens to list (UUID).
        pageSize:
          type: integer
          title: page_size
          format: int32
          description: Maximum number of tokens to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
        filter:
          type: string
          title: filter
          description: Filter expression using the PEG filter DSL.
      title: ListClusterTokensRequest
      additionalProperties: false
      description: ListClusterTokensRequest contains pagination and filter parameters.
    admiral.api.cluster.v1.ListClusterTokensResponse:
      type: object
      properties:
        accessTokens:
          type: array
          items:
            $ref: '#/components/schemas/admiral.common.v1.AccessToken'
          title: access_tokens
          description: The list of tokens. Token secrets are never included.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListClusterTokensResponse
      additionalProperties: false
      description: ListClusterTokensResponse contains a page of cluster AGT metadata.
    admiral.api.cluster.v1.ListClustersRequest:
      type: object
      properties:
        filter:
          type: string
          title: filter
          description: Filter expression using the PEG filter DSL
        pageSize:
          type: integer
          title: page_size
          format: int32
          description: Maximum number of clusters to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListClustersRequest
      additionalProperties: false
      description: ListClustersRequest contains pagination and filter parameters.
    admiral.api.cluster.v1.ListClustersResponse:
      type: object
      properties:
        clusters:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.cluster.v1.Cluster'
          title: clusters
          description: The list of clusters.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListClustersResponse
      additionalProperties: false
      description: ListClustersResponse contains a page of clusters.
    admiral.api.cluster.v1.ListWorkloadsRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: The cluster whose workloads to list (UUID).
        filter:
          type: string
          title: filter
          description: Filter expression using the PEG filter DSL
        pageSize:
          type: integer
          title: page_size
          format: int32
          description: Maximum number of workloads to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListWorkloadsRequest
      additionalProperties: false
      description: |-
        ListWorkloadsRequest contains pagination and filter parameters for listing
         workloads in a specific cluster.
    admiral.api.cluster.v1.ListWorkloadsResponse:
      type: object
      properties:
        workloads:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.cluster.v1.Workload'
          title: workloads
          description: The list of workloads.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListWorkloadsResponse
      additionalProperties: false
      description: ListWorkloadsResponse contains a page of workloads.
    admiral.api.cluster.v1.ObjectReference:
      type: object
      properties:
        kind:
          type: string
          title: kind
          description: Kubernetes resource kind (e.g., "Pod", "ReplicaSet").
        namespace:
          type: string
          title: namespace
          description: Kubernetes namespace.
        name:
          type: string
          title: name
          description: Object name.
      title: ObjectReference
      additionalProperties: false
      description: ObjectReference is a lightweight reference to a Kubernetes object.
    admiral.api.cluster.v1.ReportClusterStatusRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: The cluster this status report is for (UUID).
        status:
          title: status
          description: Cluster-level telemetry snapshot.
          $ref: '#/components/schemas/admiral.api.cluster.v1.ClusterStatus'
        workloads:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.cluster.v1.WorkloadStatus'
          title: workloads
          description: Per-workload status snapshots.
        events:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.cluster.v1.WorkloadEvent'
          title: events
          description: Kubernetes events observed since the last push.
        reportedAt:
          title: reported_at
          description: When the agent generated this report.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: ReportClusterStatusRequest
      required:
        - status
      additionalProperties: false
      description: |-
        ReportClusterStatusRequest contains a combined telemetry payload from a K8s agent.
         Admiral splits this into three storage tiers: current snapshot, time-series
         metrics, and events.
    admiral.api.cluster.v1.ReportClusterStatusResponse:
      type: object
      properties:
        ack:
          type: boolean
          title: ack
          description: Whether the report was accepted.
        nextPushSeconds:
          type: integer
          title: next_push_seconds
          format: int32
          description: |-
            Server-controlled interval (in seconds) before the agent should send
             its next status push. Allows the server to adjust push frequency dynamically.
      title: ReportClusterStatusResponse
      additionalProperties: false
      description: ReportClusterStatusResponse acknowledges a telemetry push.
    admiral.api.cluster.v1.ReportWorkloadStatusRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: The cluster these workloads belong to (UUID).
        workloads:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.cluster.v1.WorkloadStatus'
          title: workloads
          description: Per-workload status snapshots.
        reportedAt:
          title: reported_at
          description: When the agent generated this report.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: ReportWorkloadStatusRequest
      additionalProperties: false
      description: ReportWorkloadStatusRequest contains incremental workload telemetry from a K8s agent.
    admiral.api.cluster.v1.ReportWorkloadStatusResponse:
      type: object
      properties:
        ack:
          type: boolean
          title: ack
          description: Whether the report was accepted.
      title: ReportWorkloadStatusResponse
      additionalProperties: false
      description: ReportWorkloadStatusResponse acknowledges a workload telemetry push.
    admiral.api.cluster.v1.RevokeClusterTokenRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: The cluster the token belongs to (UUID).
        tokenId:
          type: string
          title: token_id
          format: uuid
          description: The unique identifier of the token to revoke (UUID).
      title: RevokeClusterTokenRequest
      additionalProperties: false
      description: RevokeClusterTokenRequest identifies a cluster AGT to revoke.
    admiral.api.cluster.v1.RevokeClusterTokenResponse:
      type: object
      properties:
        accessToken:
          title: access_token
          description: The token metadata with updated status.
          $ref: '#/components/schemas/admiral.common.v1.AccessToken'
      title: RevokeClusterTokenResponse
      additionalProperties: false
      description: RevokeClusterTokenResponse contains the revoked cluster AGT metadata.
    admiral.api.cluster.v1.UpdateClusterRequest:
      type: object
      properties:
        cluster:
          title: cluster
          description: |-
            The cluster with updated fields. The `id` field is required.
             Only fields specified in `update_mask` are updated.
          $ref: '#/components/schemas/admiral.api.cluster.v1.Cluster'
        updateMask:
          title: update_mask
          description: |-
            The set of fields to update. If unset, all mutable fields are updated.
             Supported fields: `name`, `description`, `labels`.
          $ref: '#/components/schemas/google.protobuf.FieldMask'
      title: UpdateClusterRequest
      required:
        - cluster
      additionalProperties: false
      description: UpdateClusterRequest contains the cluster fields to update.
    admiral.api.cluster.v1.UpdateClusterResponse:
      type: object
      properties:
        cluster:
          title: cluster
          description: The updated cluster.
          $ref: '#/components/schemas/admiral.api.cluster.v1.Cluster'
      title: UpdateClusterResponse
      additionalProperties: false
      description: UpdateClusterResponse contains the updated cluster.
    admiral.api.cluster.v1.Workload:
      type: object
      properties:
        id:
          type: string
          title: id
          description: Unique identifier for the workload within Admiral (UUID).
        clusterId:
          type: string
          title: cluster_id
          description: The cluster this workload belongs to (UUID).
        namespace:
          type: string
          title: namespace
          description: Kubernetes namespace.
        name:
          type: string
          title: name
          description: Workload name.
        kind:
          type: string
          title: kind
          description: Kubernetes resource kind (e.g., "Deployment", "StatefulSet", "DaemonSet").
        labels:
          type: object
          title: labels
          additionalProperties:
            type: string
            title: value
          description: Kubernetes labels on the workload.
        healthStatus:
          title: health_status
          description: Derived health status.
          $ref: '#/components/schemas/admiral.api.cluster.v1.WorkloadHealthStatus'
        statusReason:
          type: string
          title: status_reason
          description: Human-readable reason for the current status (e.g., "MinimumReplicasUnavailable").
        replicasDesired:
          type: integer
          title: replicas_desired
          format: int32
          description: Number of desired replicas.
        replicasReady:
          type: integer
          title: replicas_ready
          format: int32
          description: Number of ready replicas.
        replicasAvailable:
          type: integer
          title: replicas_available
          format: int32
          description: Number of available replicas.
        cpuRequestsMillicores:
          type:
            - integer
            - string
          title: cpu_requests_millicores
          format: int64
          description: CPU requests across all containers, in millicores.
        cpuLimitsMillicores:
          type:
            - integer
            - string
          title: cpu_limits_millicores
          format: int64
          description: CPU limits across all containers, in millicores.
        cpuUsedMillicores:
          type:
            - integer
            - string
          title: cpu_used_millicores
          format: int64
          description: Current CPU usage across all containers, in millicores.
        memoryRequestsBytes:
          type:
            - integer
            - string
          title: memory_requests_bytes
          format: int64
          description: Memory requests across all containers, in bytes.
        memoryLimitsBytes:
          type:
            - integer
            - string
          title: memory_limits_bytes
          format: int64
          description: Memory limits across all containers, in bytes.
        memoryUsedBytes:
          type:
            - integer
            - string
          title: memory_used_bytes
          format: int64
          description: Current memory usage across all containers, in bytes.
        containers:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.cluster.v1.ContainerStatus'
          title: containers
          description: Status of individual containers in this workload.
        lastUpdatedAt:
          title: last_updated_at
          description: When this workload's status was last updated.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: Workload
      additionalProperties: false
      description: |-
        Workload represents a Kubernetes workload (Deployment, StatefulSet,
         DaemonSet, etc.) as observed by the agent.
    admiral.api.cluster.v1.Workload.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.cluster.v1.WorkloadEvent:
      type: object
      properties:
        uid:
          type: string
          title: uid
          description: Kubernetes event UID, used for deduplication.
        type:
          type: string
          title: type
          description: 'Event type: "Normal" or "Warning".'
        reason:
          type: string
          title: reason
          description: Short machine-readable reason (e.g., "BackOff", "FailedScheduling").
        regarding:
          title: regarding
          description: The Kubernetes object this event is about.
          $ref: '#/components/schemas/admiral.api.cluster.v1.ObjectReference'
        message:
          type: string
          title: message
          description: Human-readable event message.
        firstSeen:
          title: first_seen
          description: When this event was first observed.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        lastSeen:
          title: last_seen
          description: When this event was most recently observed.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        count:
          type: integer
          title: count
          format: int32
          description: Number of times this event has occurred.
      title: WorkloadEvent
      additionalProperties: false
      description: |-
        WorkloadEvent represents a Kubernetes event related to a workload or its
         child objects (pods, replicasets). Events are deduplicated by their K8s UID.
    admiral.api.cluster.v1.WorkloadHealthStatus:
      type: string
      title: WorkloadHealthStatus
      enum:
        - WORKLOAD_HEALTH_STATUS_UNSPECIFIED
        - WORKLOAD_HEALTH_STATUS_HEALTHY
        - WORKLOAD_HEALTH_STATUS_DEGRADED
        - WORKLOAD_HEALTH_STATUS_ERROR
      description: WorkloadHealthStatus represents the derived health state of a single workload.
    admiral.api.cluster.v1.WorkloadStatus:
      type: object
      properties:
        namespace:
          type: string
          title: namespace
          description: Kubernetes namespace.
        name:
          type: string
          title: name
          description: Workload name.
        kind:
          type: string
          title: kind
          description: Kubernetes resource kind (e.g., "Deployment", "StatefulSet").
        labels:
          type: object
          title: labels
          additionalProperties:
            type: string
            title: value
          description: Kubernetes labels on the workload.
        replicasDesired:
          type: integer
          title: replicas_desired
          format: int32
          description: Number of desired replicas.
        replicasReady:
          type: integer
          title: replicas_ready
          format: int32
          description: Number of ready replicas.
        replicasAvailable:
          type: integer
          title: replicas_available
          format: int32
          description: Number of available replicas.
        cpuRequestsMillicores:
          type:
            - integer
            - string
          title: cpu_requests_millicores
          format: int64
          description: CPU requests across all containers, in millicores.
        cpuLimitsMillicores:
          type:
            - integer
            - string
          title: cpu_limits_millicores
          format: int64
          description: CPU limits across all containers, in millicores.
        cpuUsedMillicores:
          type:
            - integer
            - string
          title: cpu_used_millicores
          format: int64
          description: Current CPU usage across all containers, in millicores.
        memoryRequestsBytes:
          type:
            - integer
            - string
          title: memory_requests_bytes
          format: int64
          description: Memory requests across all containers, in bytes.
        memoryLimitsBytes:
          type:
            - integer
            - string
          title: memory_limits_bytes
          format: int64
          description: Memory limits across all containers, in bytes.
        memoryUsedBytes:
          type:
            - integer
            - string
          title: memory_used_bytes
          format: int64
          description: Current memory usage across all containers, in bytes.
        healthStatus:
          title: health_status
          description: Derived health status.
          $ref: '#/components/schemas/admiral.api.cluster.v1.WorkloadHealthStatus'
        containers:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.cluster.v1.ContainerStatus'
          title: containers
          description: Status of individual containers.
      title: WorkloadStatus
      additionalProperties: false
      description: |-
        WorkloadStatus is the agent-reported status for a single workload within
         a telemetry push payload.
    admiral.api.cluster.v1.WorkloadStatus.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.environment.v1.CreateEnvironmentRequest:
      type: object
      properties:
        applicationId:
          type: string
          title: application_id
          format: uuid
          description: The application to create this environment for (UUID).
        name:
          type: string
          title: name
          maxLength: 255
          minLength: 1
          pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
          description: |-
            URL-safe, human-readable identifier (e.g., "prod", "staging-us-east").
             Must be unique within the application. Lowercase alphanumeric and hyphens only.
        clusterId:
          type:
            - string
            - "null"
          title: cluster_id
          description: |-
            The cluster to deploy this environment to (UUID). Optional — can be
             assigned later via UpdateEnvironment.
        namespace:
          type:
            - string
            - "null"
          title: namespace
          description: The Kubernetes namespace for this environment's workloads.
        labels:
          type: object
          title: labels
          additionalProperties:
            type: string
            title: value
          description: Arbitrary key-value labels for organizing and filtering environments.
      title: CreateEnvironmentRequest
      additionalProperties: false
      description: CreateEnvironmentRequest contains the parameters for creating a new environment.
    admiral.api.environment.v1.CreateEnvironmentRequest.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.environment.v1.CreateEnvironmentResponse:
      type: object
      properties:
        environment:
          title: environment
          description: The created environment.
          $ref: '#/components/schemas/admiral.api.environment.v1.Environment'
      title: CreateEnvironmentResponse
      additionalProperties: false
      description: CreateEnvironmentResponse contains the newly created environment.
    admiral.api.environment.v1.DeleteEnvironmentRequest:
      type: object
      properties:
        environmentId:
          type: string
          title: environment_id
          format: uuid
          description: The unique identifier of the environment to delete (UUID).
      title: DeleteEnvironmentRequest
      additionalProperties: false
      description: DeleteEnvironmentRequest identifies an environment to delete.
    admiral.api.environment.v1.DeleteEnvironmentResponse:
      type: object
      title: DeleteEnvironmentResponse
      additionalProperties: false
      description: DeleteEnvironmentResponse is empty on success.
    admiral.api.environment.v1.Environment:
      type: object
      properties:
        id:
          type: string
          title: id
          format: uuid
          description: Unique identifier for the environment (UUID).
        applicationId:
          type: string
          title: application_id
          format: uuid
          description: The application this environment belongs to (UUID).
        name:
          type: string
          title: name
          maxLength: 255
          minLength: 1
          pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
          description: |-
            URL-safe, human-readable identifier (e.g., "prod", "staging-us-east").
             Unique within the application. Lowercase alphanumeric and hyphens only,
             must start with a letter and end with an alphanumeric character (1-63 chars).
        clusterId:
          type:
            - string
            - "null"
          title: cluster_id
          description: |-
            The cluster this environment deploys to (UUID). Optional — can be assigned
             after creation.
        namespace:
          type:
            - string
            - "null"
          title: namespace
          description: |-
            The Kubernetes namespace for this environment's workloads. Optional —
             defaults to the environment name if not specified at deploy time.
        labels:
          type: object
          title: labels
          additionalProperties:
            type: string
            title: value
          description: |-
            Arbitrary key-value labels for organizing and filtering environments
             (e.g., `{"region": "us-east-1", "tier": "production"}`).
        createdAt:
          title: created_at
          description: When the environment was created.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        updatedAt:
          title: updated_at
          description: When the environment was last updated.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: Environment
      additionalProperties: false
      description: |-
        Environment represents a named deployment target for an application. Each
         environment binds an application to a cluster and namespace where its
         workloads are deployed.
    admiral.api.environment.v1.Environment.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.environment.v1.GetEnvironmentRequest:
      type: object
      properties:
        environmentId:
          type: string
          title: environment_id
          format: uuid
          description: The unique identifier of the environment (UUID).
      title: GetEnvironmentRequest
      additionalProperties: false
      description: GetEnvironmentRequest identifies an environment to retrieve.
    admiral.api.environment.v1.GetEnvironmentResponse:
      type: object
      properties:
        environment:
          title: environment
          description: The environment record.
          $ref: '#/components/schemas/admiral.api.environment.v1.Environment'
      title: GetEnvironmentResponse
      additionalProperties: false
      description: GetEnvironmentResponse contains the environment record.
    admiral.api.environment.v1.ListEnvironmentsRequest:
      type: object
      properties:
        filter:
          type: string
          title: filter
          description: Filter expression using the PEG filter DSL.
        pageSize:
          type: integer
          title: page_size
          format: int32
          description: Maximum number of environments to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListEnvironmentsRequest
      additionalProperties: false
      description: ListEnvironmentsRequest contains pagination and filter parameters.
    admiral.api.environment.v1.ListEnvironmentsResponse:
      type: object
      properties:
        environments:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.environment.v1.Environment'
          title: environments
          description: The list of environments.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListEnvironmentsResponse
      additionalProperties: false
      description: ListEnvironmentsResponse contains a page of environments.
    admiral.api.environment.v1.UpdateEnvironmentRequest:
      type: object
      properties:
        environment:
          title: environment
          description: |-
            The environment with updated fields. The `id` field is required.
             Only fields specified in `update_mask` are updated.
          $ref: '#/components/schemas/admiral.api.environment.v1.Environment'
        updateMask:
          title: update_mask
          description: |-
            The set of fields to update. If unset, all mutable fields are updated.
             Supported fields: `name`, `cluster_id`, `namespace`, `labels`.
          $ref: '#/components/schemas/google.protobuf.FieldMask'
      title: UpdateEnvironmentRequest
      required:
        - environment
      additionalProperties: false
      description: UpdateEnvironmentRequest contains the environment fields to update.
    admiral.api.environment.v1.UpdateEnvironmentResponse:
      type: object
      properties:
        environment:
          title: environment
          description: The updated environment.
          $ref: '#/components/schemas/admiral.api.environment.v1.Environment'
      title: UpdateEnvironmentResponse
      additionalProperties: false
      description: UpdateEnvironmentResponse contains the updated environment.
    admiral.api.healthcheck.v1.HealthcheckRequest:
      type: object
      title: HealthcheckRequest
      additionalProperties: false
      description: |-
        HealthcheckRequest is the request message for Healthcheck.
         No parameters are required.
    admiral.api.healthcheck.v1.HealthcheckResponse:
      type: object
      title: HealthcheckResponse
      additionalProperties: false
      description: |-
        HealthcheckResponse is returned when the service is healthy.
         An empty response indicates the service is operating normally.
    admiral.api.user.v1.CreatePersonalAccessTokenRequest:
      type: object
      properties:
        displayName:
          type: string
          title: display_name
          maxLength: 255
          minLength: 1
          description: |-
            Human-readable name for the token (e.g., "postman-testing").
             Must be unique per user within the tenant.
        scopes:
          type: array
          items:
            type: string
          title: scopes
          description: The scopes to grant this token. Must be valid scopes allowed for PATs.
        expiresAt:
          title: expires_at
          description: |-
            Optional expiration time. If unset, the token does not expire.
             Tenant policies may enforce a maximum lifetime.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: CreatePersonalAccessTokenRequest
      additionalProperties: false
      description: CreatePersonalAccessTokenRequest contains the parameters for creating a new PAT.
    admiral.api.user.v1.CreatePersonalAccessTokenResponse:
      type: object
      properties:
        plainTextToken:
          type: string
          title: plain_text_token
          description: |-
            The raw token secret (e.g., "adm_pat_7kH3mNqR2xFb..."). This value is
             shown exactly once and cannot be retrieved again. Store it securely.
      title: CreatePersonalAccessTokenResponse
      additionalProperties: false
      description: |-
        CreatePersonalAccessTokenResponse contains the newly created PAT. The created token metadata.
          admiral.common.v1.AccessToken access_token = 1;
    admiral.api.user.v1.GetPersonalAccessTokenRequest:
      type: object
      properties:
        tokenId:
          type: string
          title: token_id
          format: uuid
          description: The unique identifier of the token (UUID).
      title: GetPersonalAccessTokenRequest
      additionalProperties: false
      description: GetPersonalAccessTokenRequest identifies a PAT to retrieve.
    admiral.api.user.v1.GetPersonalAccessTokenResponse:
      type: object
      properties:
        accessToken:
          title: access_token
          description: The token metadata. The token secret is never included.
          $ref: '#/components/schemas/admiral.common.v1.AccessToken'
      title: GetPersonalAccessTokenResponse
      additionalProperties: false
      description: GetPersonalAccessTokenResponse contains the requested PAT metadata.
    admiral.api.user.v1.GetUserRequest:
      type: object
      title: GetUserRequest
      additionalProperties: false
      description: |-
        GetUserRequest is the request message for GetUser.
         No parameters are required as the user is identified by the auth token.
    admiral.api.user.v1.GetUserResponse:
      type: object
      properties:
        id:
          type: string
          title: id
          description: Unique identifier for the user (UUID format).
        tenantId:
          type: string
          title: tenant_id
          description: The tenant this user belongs to (UUID format).
        email:
          type: string
          title: email
          description: User's email address.
        displayName:
          type:
            - string
            - "null"
          title: display_name
          description: User's display name for UI purposes.
        givenName:
          type:
            - string
            - "null"
          title: given_name
          description: User's given (first) name.
        familyName:
          type:
            - string
            - "null"
          title: family_name
          description: User's family (last) name.
        avatarUrl:
          type:
            - string
            - "null"
          title: avatar_url
          description: URL to the user's avatar image.
      title: GetUserResponse
      additionalProperties: false
      description: GetUserResponse contains the authenticated user's profile information.
    admiral.api.user.v1.ListPersonalAccessTokensRequest:
      type: object
      properties:
        pageSize:
          type: integer
          title: page_size
          format: int32
          description: Maximum number of tokens to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
        filter:
          type: string
          title: filter
          description: |-
            Filter expression using the PEG filter DSL
             (e.g., `status = "active"` or `display_name = "ci-*"`).
      title: ListPersonalAccessTokensRequest
      additionalProperties: false
      description: ListPersonalAccessTokensRequest contains pagination and filter parameters.
    admiral.api.user.v1.ListPersonalAccessTokensResponse:
      type: object
      properties:
        accessTokens:
          type: array
          items:
            $ref: '#/components/schemas/admiral.common.v1.AccessToken'
          title: access_tokens
          description: The list of tokens. Token secrets are never included.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListPersonalAccessTokensResponse
      additionalProperties: false
      description: ListPersonalAccessTokensResponse contains a page of PAT metadata.
    admiral.api.user.v1.RevokePersonalAccessTokenRequest:
      type: object
      properties:
        tokenId:
          type: string
          title: token_id
          format: uuid
          description: The unique identifier of the token to revoke (UUID).
      title: RevokePersonalAccessTokenRequest
      additionalProperties: false
      description: RevokePersonalAccessTokenRequest identifies a PAT to revoke.
    admiral.api.user.v1.RevokePersonalAccessTokenResponse:
      type: object
      properties:
        accessToken:
          title: access_token
          description: The token metadata with updated status.
          $ref: '#/components/schemas/admiral.common.v1.AccessToken'
      title: RevokePersonalAccessTokenResponse
      additionalProperties: false
      description: RevokePersonalAccessTokenResponse contains the revoked PAT metadata.
    admiral.common.v1.AccessToken:
      type: object
      properties:
        id:
          type: string
          title: id
          format: uuid
          description: Unique identifier for the token (UUID).
        tenantId:
          type: string
          title: tenant_id
          format: uuid
          description: Tenant this token belongs to (UUID).
        displayName:
          type: string
          title: display_name
          description: Human-readable name for the token (e.g., "postman-testing", "ci-deploy-key").
        tokenPrefix:
          type: string
          title: token_prefix
          description: |-
            Display-safe prefix for identifying the token without exposing the secret
             (e.g., "adm_pat_7kH3").
        tokenType:
          title: token_type
          description: The category of this token.
          $ref: '#/components/schemas/admiral.common.v1.TokenType'
        scopes:
          type: array
          items:
            type: string
          title: scopes
          description: |-
            The scopes granted to this token. For PATs, these are user-selected.
             For AGTs, these are auto-assigned based on the resource type.
        status:
          title: status
          description: Current lifecycle status of the token.
          $ref: '#/components/schemas/admiral.common.v1.AccessTokenStatus'
        userId:
          type: string
          title: user_id
          description: |-
            The user this token is bound to (UUID). Set when token_type is
             TOKEN_TYPE_PAT.
        clusterId:
          type: string
          title: cluster_id
          description: |-
            The cluster this token is bound to (UUID). Set when token_type is
             TOKEN_TYPE_AGT and the token is bound to a cluster.
        runnerId:
          type: string
          title: runner_id
          description: |-
            The runner this token is bound to (UUID). Set when token_type is
             TOKEN_TYPE_AGT and the token is bound to a runner.
        createdBy:
          type: string
          title: created_by
          description: |-
            The user who created this token (UUID). For PATs, this is the token owner.
             For AGTs, this is the administrator who issued the token.
        expiresAt:
          title: expires_at
          description: When the token expires. If unset, the token does not expire.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        lastUsedAt:
          title: last_used_at
          description: When the token was last used to authenticate an API request.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        createdAt:
          title: created_at
          description: When the token was created.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        revokedAt:
          title: revoked_at
          description: When the token was revoked. Only set when status is REVOKED.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: AccessToken
      additionalProperties: false
      description: |-
        AccessToken contains token metadata common to all token types (PAT, AGT).
         The raw token secret is never included in this message — it is only returned
         once at creation time via the `plain_text_token` field in Create responses.

         Token CRUD is managed by each parent resource's API:
           - PATs:         UserAPI    (/v1/user/tokens)
           - Cluster AGTs: ClusterAPI (/v1/clusters/{id}/tokens)
    admiral.common.v1.AccessTokenStatus:
      type: string
      title: AccessTokenStatus
      enum:
        - ACCESS_TOKEN_STATUS_UNSPECIFIED
        - ACCESS_TOKEN_STATUS_ACTIVE
        - ACCESS_TOKEN_STATUS_REVOKED
        - ACCESS_TOKEN_STATUS_ROTATING
      description: AccessTokenStatus represents the lifecycle state of an access token.
    admiral.common.v1.TokenType:
      type: string
      title: TokenType
      enum:
        - TOKEN_TYPE_UNSPECIFIED
        - TOKEN_TYPE_PAT
        - TOKEN_TYPE_AGT
      description: |-
        TokenType identifies the category of an access token issued by Admiral's token system.
         IDP-issued JWTs (OAuth2/OIDC sessions) are NOT represented here — they are
         resolved by separate middleware and can be referenced as "session" in
         AuthRule.allowed_token_types when needed.
    google.protobuf.FieldMask:
      type: string
      description: |-
        `FieldMask` represents a set of symbolic field paths, for example:

             paths: "f.a"
             paths: "f.b.d"

         Here `f` represents a field in some root message, `a` and `b`
         fields in the message found in `f`, and `d` a field found in the
         message in `f.b`.

         Field masks are used to specify a subset of fields that should be
         returned by a get operation or modified by an update operation.
         Field masks also have a custom JSON encoding (see below).

         # Field Masks in Projections

         When used in the context of a projection, a response message or
         sub-message is filtered by the API to only contain those fields as
         specified in the mask. For example, if the mask in the previous
         example is applied to a response message as follows:

             f {
               a : 22
               b {
                 d : 1
                 x : 2
               }
               y : 13
             }
             z: 8

         The result will not contain specific values for fields x,y and z
         (their value will be set to the default, and omitted in proto text
         output):


             f {
               a : 22
               b {
                 d : 1
               }
             }

         A repeated field is not allowed except at the last position of a
         paths string.

         If a FieldMask object is not present in a get operation, the
         operation applies to all fields (as if a FieldMask of all fields
         had been specified).

         Note that a field mask does not necessarily apply to the
         top-level response message. In case of a REST get operation, the
         field mask applies directly to the response, but in case of a REST
         list operation, the mask instead applies to each individual message
         in the returned resource list. In case of a REST custom method,
         other definitions may be used. Where the mask applies will be
         clearly documented together with its declaration in the API.  In
         any case, the effect on the returned resource/resources is required
         behavior for APIs.

         # Field Masks in Update Operations

         A field mask in update operations specifies which fields of the
         targeted resource are going to be updated. The API is required
         to only change the values of the fields as specified in the mask
         and leave the others untouched. If a resource is passed in to
         describe the updated values, the API ignores the values of all
         fields not covered by the mask.

         If a repeated field is specified for an update operation, new values will
         be appended to the existing repeated field in the target resource. Note that
         a repeated field is only allowed in the last position of a `paths` string.

         If a sub-message is specified in the last position of the field mask for an
         update operation, then new value will be merged into the existing sub-message
         in the target resource.

         For example, given the target message:

             f {
               b {
                 d: 1
                 x: 2
               }
               c: [1]
             }

         And an update message:

             f {
               b {
                 d: 10
               }
               c: [2]
             }

         then if the field mask is:

          paths: ["f.b", "f.c"]

         then the result will be:

             f {
               b {
                 d: 10
                 x: 2
               }
               c: [1, 2]
             }

         An implementation may provide options to override this default behavior for
         repeated and message fields.

         In order to reset a field's value to the default, the field must
         be in the mask and set to the default value in the provided resource.
         Hence, in order to reset all fields of a resource, provide a default
         instance of the resource and set all fields in the mask, or do
         not provide a mask as described below.

         If a field mask is not present on update, the operation applies to
         all fields (as if a field mask of all fields has been specified).
         Note that in the presence of schema evolution, this may mean that
         fields the client does not know and has therefore not filled into
         the request will be reset to their default. If this is unwanted
         behavior, a specific service may require a client to always specify
         a field mask, producing an error if not.

         As with get operations, the location of the resource which
         describes the updated values in the request message depends on the
         operation kind. In any case, the effect of the field mask is
         required to be honored by the API.

         ## Considerations for HTTP REST

         The HTTP kind of an update operation which uses a field mask must
         be set to PATCH instead of PUT in order to satisfy HTTP semantics
         (PUT must only be used for full updates).

         # JSON Encoding of Field Masks

         In JSON, a field mask is encoded as a single string where paths are
         separated by a comma. Fields name in each path are converted
         to/from lower-camel naming conventions.

         As an example, consider the following message declarations:

             message Profile {
               User user = 1;
               Photo photo = 2;
             }
             message User {
               string display_name = 1;
               string address = 2;
             }

         In proto a field mask for `Profile` may look as such:

             mask {
               paths: "user.display_name"
               paths: "photo"
             }

         In JSON, the same mask is represented as below:

             {
               mask: "user.displayName,photo"
             }

         # Field Masks and Oneof Fields

         Field masks treat fields in oneofs just as regular fields. Consider the
         following message:

             message SampleMessage {
               oneof test_oneof {
                 string name = 4;
                 SubMessage sub_message = 9;
               }
             }

         The field mask can be:

             mask {
               paths: "name"
             }

         Or:

             mask {
               paths: "sub_message"
             }

         Note that oneof type names ("test_oneof" in this case) cannot be used in
         paths.

         ## Field Mask Verification

         The implementation of any API method which has a FieldMask type field in the
         request should verify the included field paths, and return an
         `INVALID_ARGUMENT` error if any path is unmappable.
    google.protobuf.Timestamp:
      type: string
      examples:
        - "2023-01-15T01:30:15.01Z"
        - "2024-12-25T12:00:00Z"
      format: date-time
      description: |-
        A Timestamp represents a point in time independent of any time zone or local
         calendar, encoded as a count of seconds and fractions of seconds at
         nanosecond resolution. The count is relative to an epoch at UTC midnight on
         January 1, 1970, in the proleptic Gregorian calendar which extends the
         Gregorian calendar backwards to year one.

         All minutes are 60 seconds long. Leap seconds are "smeared" so that no leap
         second table is needed for interpretation, using a [24-hour linear
         smear](https://developers.google.com/time/smear).

         The range is from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59.999999999Z. By
         restricting to that range, we ensure that we can convert to and from [RFC
         3339](https://www.ietf.org/rfc/rfc3339.txt) date strings.

         # Examples

         Example 1: Compute Timestamp from POSIX `time()`.

             Timestamp timestamp;
             timestamp.set_seconds(time(NULL));
             timestamp.set_nanos(0);

         Example 2: Compute Timestamp from POSIX `gettimeofday()`.

             struct timeval tv;
             gettimeofday(&tv, NULL);

             Timestamp timestamp;
             timestamp.set_seconds(tv.tv_sec);
             timestamp.set_nanos(tv.tv_usec * 1000);

         Example 3: Compute Timestamp from Win32 `GetSystemTimeAsFileTime()`.

             FILETIME ft;
             GetSystemTimeAsFileTime(&ft);
             UINT64 ticks = (((UINT64)ft.dwHighDateTime) << 32) | ft.dwLowDateTime;

             // A Windows tick is 100 nanoseconds. Windows epoch 1601-01-01T00:00:00Z
             // is 11644473600 seconds before Unix epoch 1970-01-01T00:00:00Z.
             Timestamp timestamp;
             timestamp.set_seconds((INT64) ((ticks / 10000000) - 11644473600LL));
             timestamp.set_nanos((INT32) ((ticks % 10000000) * 100));

         Example 4: Compute Timestamp from Java `System.currentTimeMillis()`.

             long millis = System.currentTimeMillis();

             Timestamp timestamp = Timestamp.newBuilder().setSeconds(millis / 1000)
                 .setNanos((int) ((millis % 1000) * 1000000)).build();

         Example 5: Compute Timestamp from Java `Instant.now()`.

             Instant now = Instant.now();

             Timestamp timestamp =
                 Timestamp.newBuilder().setSeconds(now.getEpochSecond())
                     .setNanos(now.getNano()).build();

         Example 6: Compute Timestamp from current time in Python.

             timestamp = Timestamp()
             timestamp.GetCurrentTime()

         # JSON Mapping

         In JSON format, the Timestamp type is encoded as a string in the
         [RFC 3339](https://www.ietf.org/rfc/rfc3339.txt) format. That is, the
         format is "{year}-{month}-{day}T{hour}:{min}:{sec}[.{frac_sec}]Z"
         where {year} is always expressed using four digits while {month}, {day},
         {hour}, {min}, and {sec} are zero-padded to two digits each. The fractional
         seconds, which can go up to 9 digits (i.e. up to 1 nanosecond resolution),
         are optional. The "Z" suffix indicates the timezone ("UTC"); the timezone
         is required. A proto3 JSON serializer should always use UTC (as indicated by
         "Z") when printing the Timestamp type and a proto3 JSON parser should be
         able to accept both UTC and other timezones (as indicated by an offset).

         For example, "2017-01-15T01:30:15.01Z" encodes 15.01 seconds past
         01:30 UTC on January 15, 2017.

         In JavaScript, one can convert a Date object to this format using the
         standard
         [toISOString()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString)
         method. In Python, a standard `datetime.datetime` object can be converted
         to this format using
         [`strftime`](https://docs.python.org/2/library/time.html#time.strftime) with
         the time format spec '%Y-%m-%dT%H:%M:%S.%fZ'. Likewise, in Java, one can use
         the Joda Time's [`ISODateTimeFormat.dateTime()`](
         http://joda-time.sourceforge.net/apidocs/org/joda/time/format/ISODateTimeFormat.html#dateTime()
         ) to obtain a formatter capable of generating timestamps in this format.
security: []
tags:
  - name: admiral.api.application.v1.ApplicationAPI
    description: |-
      ApplicationAPI manages applications within a tenant.

       An application is the fundamental unit in Admiral. It groups deployment
       manifests, infrastructure dependencies, environment configuration, and
       relationships into a single entity that can be deployed across multiple
       environments. Applications are defined once and promoted explicitly between
       environments.
  - name: admiral.api.cluster.v1.ClusterAPI
    description: |-
      ClusterAPI manages Kubernetes clusters and their workload telemetry.

       Administrators create clusters via CreateCluster, which returns an Agent
       Token (AGT) for deploying the K8s agent. Once the agent boots and calls
       AgentAPI.RegisterAgent, the cluster transitions from PENDING to HEALTHY
       and begins receiving telemetry.

       The telemetry model has three tiers: current snapshot (upserted per push),
       time-series metrics (rolling 48-hour window), and events (rolling 7-day window).
  - name: admiral.api.environment.v1.EnvironmentAPI
    description: |-
      EnvironmentAPI manages environments within an application.

       An environment is a named deployment target (e.g., dev, staging, prod) that
       binds an application to a specific cluster and namespace. Each environment
       carries its own configuration, credentials, and compute targets. Promotion
       between environments is explicit — Admiral never auto-promotes.
  - name: admiral.api.healthcheck.v1.HealthcheckAPI
    description: HealthcheckAPI provides health check operations for monitoring service availability.
  - name: admiral.api.user.v1.UserAPI
    description: |-
      UserAPI provides operations for the currently authenticated user, including
       profile retrieval and Personal Access Token (PAT) management.

       PATs allow users to authenticate with the Admiral API from scripts, CI
       pipelines, and other programmatic contexts. Each PAT has user-selected
       scopes and an optional expiration.
