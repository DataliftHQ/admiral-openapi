openapi: 3.1.0
info:
  title: Admiral API
  description: Admiral API
  version: 0.0.0
paths:
  /healthz:
    get:
      tags:
        - admiral.api.healthcheck.v1.HealthcheckAPI
      summary: Healthcheck
      description: |-
        Healthcheck verifies that the service is running and healthy.
         Returns an empty response on success. Use this endpoint for load balancer
         health checks and monitoring systems.
      operationId: admiral.api.healthcheck.v1.HealthcheckAPI.Healthcheck2
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.healthcheck.v1.HealthcheckResponse'
  /v1/agent/revisions/{revision_id}/bundle:
    get:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        GetRevisionBundle fetches the rendered artifact bundle for a workload
         revision. The K8s agent calls this when it detects a new or updated
         revision that needs to be applied to the cluster.
      description: |-
        The bundle contains pre-rendered Kubernetes manifests (from Helm template,
         kustomize build, or raw manifests) ready for server-side apply. The agent
         does not need to render anything — it applies the bundle as-is.

         The cluster is identified by the agent token's binding. Returns
         PERMISSION_DENIED if the revision's target cluster does not match the
         AGT's cluster binding. Returns NOT_FOUND if the revision does not exist
         or has been cancelled.

         Scope: `cluster:deploy` | Token types: `agt`
      operationId: admiral.api.cluster.v1.ClusterAPI.GetRevisionBundle
      parameters:
        - name: revision_id
          in: path
          description: The revision to fetch the bundle for (UUID).
          required: true
          schema:
            type: string
            title: revision_id
            format: uuid
            description: The revision to fetch the bundle for (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.GetRevisionBundleResponse'
  /v1/agent/revisions/{revision_id}/result:
    post:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        ReportRevisionResult reports the outcome of applying a workload revision
         to the cluster. The server transitions the parent Revision status
         accordingly (APPLYING → SUCCEEDED or FAILED).
      description: |-
        The cluster is identified by the agent token's binding. Returns
         PERMISSION_DENIED if the revision's target cluster does not match the
         AGT's cluster binding.

         Scope: `cluster:deploy` | Token types: `agt`
      operationId: admiral.api.cluster.v1.ClusterAPI.ReportRevisionResult
      parameters:
        - name: revision_id
          in: path
          description: The revision being reported on (UUID).
          required: true
          schema:
            type: string
            title: revision_id
            format: uuid
            description: The revision being reported on (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                result:
                  title: result
                  description: The result of applying the revision.
                  $ref: '#/components/schemas/admiral.api.cluster.v1.RevisionResult'
              title: ReportRevisionResultRequest
              required:
                - result
              additionalProperties: false
              description: |-
                ReportRevisionResultRequest contains the outcome of applying a workload
                 revision to the cluster.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.ReportRevisionResultResponse'
  /v1/agent/status:
    post:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        ReportClusterStatus receives a combined telemetry snapshot from a K8s agent.
         The payload includes cluster-level metrics, per-workload status, and
         Kubernetes events. Admiral splits this into three storage tiers on receipt.
      description: |-
        The cluster is identified by the agent token — the server resolves the
         cluster from the AGT's binding. No cluster_id is required in the request.

         This endpoint is agent-facing and restricted to agent tokens.

         Scope: `cluster:status` | Token types: `agt`
      operationId: admiral.api.cluster.v1.ClusterAPI.ReportClusterStatus
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/admiral.api.cluster.v1.ReportClusterStatusRequest'
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.ReportClusterStatusResponse'
  /v1/applications:
    get:
      tags:
        - admiral.api.application.v1.ApplicationAPI
      summary: |-
        ListApplications returns a paginated list of applications within the
         caller's tenant.
      description: 'Scope: `app:read`'
      operationId: admiral.api.application.v1.ApplicationAPI.ListApplications
      parameters:
        - name: filter
          in: query
          description: Filter expression using the PEG filter DSL.
          schema:
            type: string
            title: filter
            maxLength: 1024
            description: Filter expression using the PEG filter DSL.
        - name: pageSize
          in: query
          description: Maximum number of applications to return per page.
          schema:
            type: integer
            title: page_size
            maximum: 100
            minimum: 0
            format: int32
            description: Maximum number of applications to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.application.v1.ListApplicationsResponse'
    post:
      tags:
        - admiral.api.application.v1.ApplicationAPI
      summary: CreateApplication creates a new application within the caller's tenant.
      description: 'Scope: `app:write`'
      operationId: admiral.api.application.v1.ApplicationAPI.CreateApplication
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/admiral.api.application.v1.CreateApplicationRequest'
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.application.v1.CreateApplicationResponse'
  /v1/applications/{application.id}:
    patch:
      tags:
        - admiral.api.application.v1.ApplicationAPI
      summary: |-
        UpdateApplication updates an application's mutable fields.
         Use the `update_mask` to specify which fields to update.
      description: 'Scope: `app:write`'
      operationId: admiral.api.application.v1.ApplicationAPI.UpdateApplication
      parameters:
        - name: application.id
          in: path
          description: Unique identifier for the application (UUID).
          required: true
          schema:
            type: string
            title: id
            format: uuid
            description: Unique identifier for the application (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                application:
                  title: application
                  description: |-
                    The application with updated fields. The `id` field is required.
                     Only fields specified in `update_mask` are updated.
                  $ref: '#/components/schemas/admiral.api.application.v1.Application'
                updateMask:
                  title: update_mask
                  description: |-
                    The set of fields to update. If unset, all mutable fields are updated.
                     Supported fields: `name`, `description`, `labels`.
                  $ref: '#/components/schemas/google.protobuf.FieldMask'
              title: UpdateApplicationRequest
              required:
                - application
              additionalProperties: false
              description: UpdateApplicationRequest contains the application fields to update.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.application.v1.UpdateApplicationResponse'
  /v1/applications/{application_id}:
    get:
      tags:
        - admiral.api.application.v1.ApplicationAPI
      summary: GetApplication retrieves an application by ID.
      description: 'Scope: `app:read`'
      operationId: admiral.api.application.v1.ApplicationAPI.GetApplication
      parameters:
        - name: application_id
          in: path
          description: The unique identifier of the application (UUID).
          required: true
          schema:
            type: string
            title: application_id
            format: uuid
            description: The unique identifier of the application (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.application.v1.GetApplicationResponse'
    delete:
      tags:
        - admiral.api.application.v1.ApplicationAPI
      summary: |-
        DeleteApplication permanently deletes an application and all of its
         associated environments. This action cannot be undone.
      description: 'Scope: `app:write`'
      operationId: admiral.api.application.v1.ApplicationAPI.DeleteApplication
      parameters:
        - name: application_id
          in: path
          description: The unique identifier of the application to delete (UUID).
          required: true
          schema:
            type: string
            title: application_id
            format: uuid
            description: The unique identifier of the application to delete (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.application.v1.DeleteApplicationResponse'
  /v1/clusters:
    get:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: ListClusters returns a paginated list of clusters within the caller's tenant.
      description: 'Scope: `cluster:read`'
      operationId: admiral.api.cluster.v1.ClusterAPI.ListClusters
      parameters:
        - name: filter
          in: query
          description: Filter expression using the PEG filter DSL
          schema:
            type: string
            title: filter
            maxLength: 1024
            description: Filter expression using the PEG filter DSL
        - name: pageSize
          in: query
          description: Maximum number of clusters to return per page.
          schema:
            type: integer
            title: page_size
            maximum: 100
            minimum: 0
            format: int32
            description: Maximum number of clusters to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.ListClustersResponse'
    post:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        CreateCluster creates a new cluster record within the caller's tenant and
         generates an initial Agent Token (AGT) for the K8s agent. The cluster
         starts in PENDING status until an agent registers against it.
      description: |-
        The response includes a `plain_text_token` — the raw AGT secret shown
         exactly once. Deploy this token to the K8s agent (e.g., via Helm values
         or a Kubernetes Secret). The agent uses it to authenticate with
         AgentAPI.RegisterAgent on first boot.

         Scope: `cluster:write`
      operationId: admiral.api.cluster.v1.ClusterAPI.CreateCluster
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/admiral.api.cluster.v1.CreateClusterRequest'
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.CreateClusterResponse'
  /v1/clusters/{cluster.id}:
    patch:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        UpdateCluster updates a cluster's mutable fields.
         Use the `update_mask` to specify which fields to update.
      description: 'Scope: `cluster:write`'
      operationId: admiral.api.cluster.v1.ClusterAPI.UpdateCluster
      parameters:
        - name: cluster.id
          in: path
          description: Unique identifier for the cluster (UUID).
          required: true
          schema:
            type: string
            title: id
            format: uuid
            description: Unique identifier for the cluster (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                cluster:
                  title: cluster
                  description: |-
                    The cluster with updated fields. The `id` field is required.
                     Only fields specified in `update_mask` are updated.
                  $ref: '#/components/schemas/admiral.api.cluster.v1.Cluster'
                updateMask:
                  title: update_mask
                  description: |-
                    The set of fields to update. If unset, all mutable fields are updated.
                     Supported fields: `name`, `description`, `labels`.
                  $ref: '#/components/schemas/google.protobuf.FieldMask'
              title: UpdateClusterRequest
              required:
                - cluster
              additionalProperties: false
              description: UpdateClusterRequest contains the cluster fields to update.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.UpdateClusterResponse'
  /v1/clusters/{cluster_id}:
    get:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: GetCluster retrieves a cluster by ID.
      description: |-
        Returns the Cluster record with its server-derived health_status. For
         detailed telemetry (node counts, resource usage, workload summary), use
         GetClusterStatus instead.

         Scope: `cluster:read`
      operationId: admiral.api.cluster.v1.ClusterAPI.GetCluster
      parameters:
        - name: cluster_id
          in: path
          description: The unique identifier of the cluster (UUID).
          required: true
          schema:
            type: string
            title: cluster_id
            format: uuid
            description: The unique identifier of the cluster (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.GetClusterResponse'
    delete:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        DeleteCluster permanently deletes a cluster record and revokes all
         associated agent tokens. This action cannot be undone.
      description: 'Scope: `cluster:write`'
      operationId: admiral.api.cluster.v1.ClusterAPI.DeleteCluster
      parameters:
        - name: cluster_id
          in: path
          description: |-
            The unique identifier of the cluster to delete (UUID).
             All associated agent tokens will be revoked.
          required: true
          schema:
            type: string
            title: cluster_id
            format: uuid
            description: |-
              The unique identifier of the cluster to delete (UUID).
               All associated agent tokens will be revoked.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.DeleteClusterResponse'
  /v1/clusters/{cluster_id}/status:
    get:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        GetClusterStatus retrieves the current telemetry snapshot for a cluster.
         Returns the latest metrics pushed by the agent, along with server-derived
         health status and workload summary counts.
      description: |-
        Returns NOT_FOUND if the cluster does not exist. If the cluster exists but
         no agent has reported telemetry yet, the response will have health_status
         PENDING and no status message.

         Scope: `cluster:read`
      operationId: admiral.api.cluster.v1.ClusterAPI.GetClusterStatus
      parameters:
        - name: cluster_id
          in: path
          description: The unique identifier of the cluster (UUID).
          required: true
          schema:
            type: string
            title: cluster_id
            format: uuid
            description: The unique identifier of the cluster (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.GetClusterStatusResponse'
  /v1/clusters/{cluster_id}/tokens:
    get:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        ListClusterTokens returns a paginated list of AGTs bound to the specified
         cluster. Token secrets are never included.
      description: 'Scope: `cluster:read`'
      operationId: admiral.api.cluster.v1.ClusterAPI.ListClusterTokens
      parameters:
        - name: cluster_id
          in: path
          description: The cluster to list tokens for (UUID).
          required: true
          schema:
            type: string
            title: cluster_id
            format: uuid
            description: The cluster to list tokens for (UUID).
        - name: filter
          in: query
          description: Filter expression using the PEG filter DSL.
          schema:
            type: string
            title: filter
            maxLength: 1024
            description: Filter expression using the PEG filter DSL.
        - name: pageSize
          in: query
          description: Maximum number of tokens to return per page.
          schema:
            type: integer
            title: page_size
            maximum: 100
            minimum: 0
            format: int32
            description: Maximum number of tokens to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.ListClusterTokensResponse'
    post:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        CreateClusterToken creates a new Agent Token (AGT) bound to the specified
         cluster. Scopes are auto-assigned and cannot be overridden. The response
         includes the raw token secret, which is shown exactly once.
      description: |-
        Use this to create additional AGTs for an existing cluster (e.g., for
         zero-downtime token rotation). The initial AGT is created automatically
         by CreateCluster.

         Scope: `cluster:write`
      operationId: admiral.api.cluster.v1.ClusterAPI.CreateClusterToken
      parameters:
        - name: cluster_id
          in: path
          description: The cluster to bind this token to (UUID).
          required: true
          schema:
            type: string
            title: cluster_id
            format: uuid
            description: The cluster to bind this token to (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  title: name
                  maxLength: 63
                  minLength: 1
                  pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
                  description: |-
                    URL-safe, human-readable identifier for the token (e.g., "prod-agent-key").
                     Must be unique within the cluster's tokens. Lowercase alphanumeric and
                     hyphens only.
                expiresAt:
                  title: expires_at
                  description: Optional expiration time. If unset, the token does not expire.
                  $ref: '#/components/schemas/google.protobuf.Timestamp'
              title: CreateClusterTokenRequest
              additionalProperties: false
              description: |-
                CreateClusterTokenRequest contains the parameters for creating a new AGT
                 bound to a cluster.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.CreateClusterTokenResponse'
  /v1/clusters/{cluster_id}/tokens/{token_id}:
    get:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        GetClusterToken retrieves a single AGT by ID.
         Returns metadata only — the token secret is never included.
      description: 'Scope: `cluster:read`'
      operationId: admiral.api.cluster.v1.ClusterAPI.GetClusterToken
      parameters:
        - name: cluster_id
          in: path
          description: The cluster the token belongs to (UUID).
          required: true
          schema:
            type: string
            title: cluster_id
            format: uuid
            description: The cluster the token belongs to (UUID).
        - name: token_id
          in: path
          description: The unique identifier of the token (UUID).
          required: true
          schema:
            type: string
            title: token_id
            format: uuid
            description: The unique identifier of the token (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.GetClusterTokenResponse'
  /v1/clusters/{cluster_id}/tokens/{token_id}/revoke:
    post:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        RevokeClusterToken permanently revokes an AGT bound to this cluster.
         The agent will receive a 401 on its next request. If this is the only
         active AGT for the cluster, the agent will become disconnected.
      description: 'Scope: `cluster:write`'
      operationId: admiral.api.cluster.v1.ClusterAPI.RevokeClusterToken
      parameters:
        - name: cluster_id
          in: path
          description: The cluster the token belongs to (UUID).
          required: true
          schema:
            type: string
            title: cluster_id
            format: uuid
            description: The cluster the token belongs to (UUID).
        - name: token_id
          in: path
          description: The unique identifier of the token to revoke (UUID).
          required: true
          schema:
            type: string
            title: token_id
            format: uuid
            description: The unique identifier of the token to revoke (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.RevokeClusterTokenResponse'
  /v1/clusters/{cluster_id}/workloads:
    get:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: ListWorkloads returns a paginated list of workloads running in a specific cluster.
      description: 'Scope: `cluster:read`'
      operationId: admiral.api.cluster.v1.ClusterAPI.ListWorkloads
      parameters:
        - name: cluster_id
          in: path
          description: The cluster whose workloads to list (UUID).
          required: true
          schema:
            type: string
            title: cluster_id
            format: uuid
            description: The cluster whose workloads to list (UUID).
        - name: filter
          in: query
          description: Filter expression using the PEG filter DSL
          schema:
            type: string
            title: filter
            maxLength: 1024
            description: Filter expression using the PEG filter DSL
        - name: pageSize
          in: query
          description: Maximum number of workloads to return per page.
          schema:
            type: integer
            title: page_size
            maximum: 100
            minimum: 0
            format: int32
            description: Maximum number of workloads to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.ListWorkloadsResponse'
  /v1/clusters/{cluster_id}/workloads/status:
    post:
      tags:
        - admiral.api.cluster.v1.ClusterAPI
      summary: |-
        ReportWorkloadStatus receives workload-only telemetry from a K8s agent.
         Used for incremental workload updates between full cluster status pushes.
      description: |-
        This endpoint is agent-facing and restricted to agent tokens.

         Scope: `cluster:status` | Token types: `agt`
      operationId: admiral.api.cluster.v1.ClusterAPI.ReportWorkloadStatus
      parameters:
        - name: cluster_id
          in: path
          description: The cluster these workloads belong to (UUID).
          required: true
          schema:
            type: string
            title: cluster_id
            format: uuid
            description: The cluster these workloads belong to (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                workloads:
                  type: array
                  items:
                    $ref: '#/components/schemas/admiral.api.cluster.v1.WorkloadStatus'
                  title: workloads
                  description: Per-workload status snapshots.
                reportedAt:
                  title: reported_at
                  description: When the agent generated this report.
                  $ref: '#/components/schemas/google.protobuf.Timestamp'
              title: ReportWorkloadStatusRequest
              additionalProperties: false
              description: ReportWorkloadStatusRequest contains incremental workload telemetry from a K8s agent.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.cluster.v1.ReportWorkloadStatusResponse'
  /v1/components:
    get:
      tags:
        - admiral.api.component.v1.ComponentAPI
      summary: ListComponents returns a paginated list of components.
      description: |-
        The response behavior depends on the filter:
           - Filter by `application_id` only: returns application-level component
             definitions (defaults).
           - Filter by `application_id` + `environment_id`: returns the resolved
             view with environment overrides applied. Disabled components are
             included with `disabled=true`. The `has_override` field indicates
             whether the component differs from its application-level default.

         Scope: `app:read`
      operationId: admiral.api.component.v1.ComponentAPI.ListComponents
      parameters:
        - name: filter
          in: query
          description: |-
            Filter expression using the PEG filter DSL.

             Common filter fields:
               - `application_id` — scope to an application (required for meaningful
                 results since components always belong to an application).
               - `environment_id` — when present, triggers the resolved view with
                 environment overrides applied to each component.
               - `category` — filter by component category (INFRASTRUCTURE, WORKLOAD).
               - `name` — filter by component name.
          schema:
            type: string
            title: filter
            maxLength: 1024
            description: |-
              Filter expression using the PEG filter DSL.

               Common filter fields:
                 - `application_id` — scope to an application (required for meaningful
                   results since components always belong to an application).
                 - `environment_id` — when present, triggers the resolved view with
                   environment overrides applied to each component.
                 - `category` — filter by component category (INFRASTRUCTURE, WORKLOAD).
                 - `name` — filter by component name.
        - name: pageSize
          in: query
          description: Maximum number of components to return per page.
          schema:
            type: integer
            title: page_size
            maximum: 100
            minimum: 0
            format: int32
            description: Maximum number of components to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.component.v1.ListComponentsResponse'
    post:
      tags:
        - admiral.api.component.v1.ComponentAPI
      summary: CreateComponent adds a new component to an application.
      description: |-
        The component name must be unique within the application. The source must
         exist and be accessible to the caller's tenant.

         Scope: `app:write`
      operationId: admiral.api.component.v1.ComponentAPI.CreateComponent
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/admiral.api.component.v1.CreateComponentRequest'
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.component.v1.CreateComponentResponse'
  /v1/components/{component.id}:
    patch:
      tags:
        - admiral.api.component.v1.ComponentAPI
      summary: |-
        UpdateComponent updates a component's mutable fields.
         Use the `update_mask` to specify which fields to update.
      description: |-
        When renaming a component, the server validates that no other components
         reference the old name in their values_template expressions and rejects
         the rename if references exist.

         Scope: `app:write`
      operationId: admiral.api.component.v1.ComponentAPI.UpdateComponent
      parameters:
        - name: component.id
          in: path
          description: Unique identifier for the component (UUID).
          required: true
          schema:
            type: string
            title: id
            format: uuid
            description: Unique identifier for the component (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                component:
                  title: component
                  description: |-
                    The component with updated fields. The `id` field is required.
                     Only fields specified in `update_mask` are updated.
                  $ref: '#/components/schemas/admiral.api.component.v1.Component'
                updateMask:
                  title: update_mask
                  description: |-
                    The set of fields to update. If unset, all mutable fields are updated.
                     Supported fields: `name`, `description`, `source_id`, `version`,
                     `values_template`, `depends_on`, `outputs`.
                  $ref: '#/components/schemas/google.protobuf.FieldMask'
              title: UpdateComponentRequest
              required:
                - component
              additionalProperties: false
              description: UpdateComponentRequest contains the component fields to update.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.component.v1.UpdateComponentResponse'
  /v1/components/{component_id}:
    get:
      tags:
        - admiral.api.component.v1.ComponentAPI
      summary: GetComponent retrieves a component by ID.
      description: 'Scope: `app:read`'
      operationId: admiral.api.component.v1.ComponentAPI.GetComponent
      parameters:
        - name: component_id
          in: path
          description: The unique identifier of the component (UUID).
          required: true
          schema:
            type: string
            title: component_id
            format: uuid
            description: The unique identifier of the component (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.component.v1.GetComponentResponse'
    delete:
      tags:
        - admiral.api.component.v1.ComponentAPI
      summary: |-
        DeleteComponent removes a component from an application. Fails if other
         components depend on this component (via depends_on or output references
         in values_template) — remove or update those dependencies first. Also
         removes all environment overrides for this component.
         This action cannot be undone.
      description: 'Scope: `app:write`'
      operationId: admiral.api.component.v1.ComponentAPI.DeleteComponent
      parameters:
        - name: component_id
          in: path
          description: |-
            The unique identifier of the component to delete (UUID).
             Fails if other components depend on this component (via depends_on
             or output references in values_template).
          required: true
          schema:
            type: string
            title: component_id
            format: uuid
            description: |-
              The unique identifier of the component to delete (UUID).
               Fails if other components depend on this component (via depends_on
               or output references in values_template).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.component.v1.DeleteComponentResponse'
  /v1/components/{component_id}/overrides:
    get:
      tags:
        - admiral.api.component.v1.ComponentAPI
      summary: |-
        ListComponentOverrides returns all environment-level overrides for a
         component across all environments.
      description: 'Scope: `env:read`'
      operationId: admiral.api.component.v1.ComponentAPI.ListComponentOverrides
      parameters:
        - name: component_id
          in: path
          description: The component to list overrides for (UUID).
          required: true
          schema:
            type: string
            title: component_id
            format: uuid
            description: The component to list overrides for (UUID).
        - name: pageSize
          in: query
          description: Maximum number of overrides to return per page.
          schema:
            type: integer
            title: page_size
            maximum: 100
            minimum: 0
            format: int32
            description: Maximum number of overrides to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.component.v1.ListComponentOverridesResponse'
  /v1/components/{component_id}/overrides/{environment_id}:
    get:
      tags:
        - admiral.api.component.v1.ComponentAPI
      summary: |-
        GetComponentOverride retrieves the environment-level override for a
         component, if one exists.
      description: 'Scope: `env:read`'
      operationId: admiral.api.component.v1.ComponentAPI.GetComponentOverride
      parameters:
        - name: component_id
          in: path
          description: The component (UUID).
          required: true
          schema:
            type: string
            title: component_id
            format: uuid
            description: The component (UUID).
        - name: environment_id
          in: path
          description: The environment (UUID).
          required: true
          schema:
            type: string
            title: environment_id
            format: uuid
            description: The environment (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.component.v1.GetComponentOverrideResponse'
    put:
      tags:
        - admiral.api.component.v1.ComponentAPI
      summary: |-
        SetComponentOverride creates or replaces an environment-level override for
         a component. Overrides allow an environment to use a different source,
         version, values template, or to disable the component entirely.
      description: |-
        For example, a "redis" component might use a Helm chart source in dev but
         a Terraform ElastiCache module in prod.

         This is an upsert — if an override already exists for this component +
         environment combination, it is replaced.

         Scope: `env:write`
      operationId: admiral.api.component.v1.ComponentAPI.SetComponentOverride
      parameters:
        - name: component_id
          in: path
          description: The component to override (UUID).
          required: true
          schema:
            type: string
            title: component_id
            format: uuid
            description: The component to override (UUID).
        - name: environment_id
          in: path
          description: The environment this override applies to (UUID).
          required: true
          schema:
            type: string
            title: environment_id
            format: uuid
            description: The environment this override applies to (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                disabled:
                  type: boolean
                  title: disabled
                  description: When true, the component is not deployed in this environment.
                sourceId:
                  type:
                    - string
                    - "null"
                  title: source_id
                  format: uuid
                  description: Override source (UUID). When set, replaces the component's default source.
                version:
                  type:
                    - string
                    - "null"
                  title: version
                  description: Override version. When set, replaces the component's default version.
                valuesTemplate:
                  type:
                    - string
                    - "null"
                  title: values_template
                  maxLength: 65536
                  description: |-
                    Override values template. When set, completely replaces the component's
                     default values template (no merge).
                dependsOn:
                  type: array
                  items:
                    type: string
                    format: uuid
                  title: depends_on
                  description: |-
                    Override depends_on (component UUIDs). When set, replaces the component's
                     default depends_on.
                outputs:
                  type: array
                  items:
                    $ref: '#/components/schemas/admiral.api.component.v1.ComponentOutput'
                  title: outputs
                  description: Override outputs. When set, replaces the component's declared outputs.
              title: SetComponentOverrideRequest
              additionalProperties: false
              description: SetComponentOverrideRequest creates or replaces an environment-level override.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.component.v1.SetComponentOverrideResponse'
    delete:
      tags:
        - admiral.api.component.v1.ComponentAPI
      summary: |-
        DeleteComponentOverride removes an environment-level override, reverting
         the component to its application-level defaults for that environment.
      description: 'Scope: `env:write`'
      operationId: admiral.api.component.v1.ComponentAPI.DeleteComponentOverride
      parameters:
        - name: component_id
          in: path
          description: The component (UUID).
          required: true
          schema:
            type: string
            title: component_id
            format: uuid
            description: The component (UUID).
        - name: environment_id
          in: path
          description: The environment (UUID).
          required: true
          schema:
            type: string
            title: environment_id
            format: uuid
            description: The environment (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.component.v1.DeleteComponentOverrideResponse'
  /v1/connections:
    get:
      tags:
        - admiral.api.connection.v1.ConnectionAPI
      summary: |-
        ListConnections returns a paginated list of connections within the caller's
         tenant. Sensitive credential fields are never included.
      description: 'Scope: `connection:read`'
      operationId: admiral.api.connection.v1.ConnectionAPI.ListConnections
      parameters:
        - name: filter
          in: query
          description: Filter expression using the PEG filter DSL.
          schema:
            type: string
            title: filter
            maxLength: 1024
            description: Filter expression using the PEG filter DSL.
        - name: pageSize
          in: query
          description: Maximum number of connections to return per page.
          schema:
            type: integer
            title: page_size
            maximum: 100
            minimum: 0
            format: int32
            description: Maximum number of connections to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.connection.v1.ListConnectionsResponse'
    post:
      tags:
        - admiral.api.connection.v1.ConnectionAPI
      summary: CreateConnection creates a new connection within the caller's tenant.
      description: |-
        The connection type and auth config must match — for example, a GIT_TOKEN
         connection requires a GitTokenAuth config. The server validates connectivity
         on creation when possible and sets the initial status accordingly.

         Scope: `connection:write`
      operationId: admiral.api.connection.v1.ConnectionAPI.CreateConnection
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/admiral.api.connection.v1.CreateConnectionRequest'
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.connection.v1.CreateConnectionResponse'
  /v1/connections/{connection.id}:
    patch:
      tags:
        - admiral.api.connection.v1.ConnectionAPI
      summary: |-
        UpdateConnection updates a connection's mutable fields.
         Use the `update_mask` to specify which fields to update.
      description: |-
        When updating auth_config, the entire auth config is replaced — partial
         updates within the auth config oneof are not supported. Omitting auth_config
         from the update_mask leaves credentials unchanged.

         Scope: `connection:write`
      operationId: admiral.api.connection.v1.ConnectionAPI.UpdateConnection
      parameters:
        - name: connection.id
          in: path
          description: Unique identifier for the connection (UUID).
          required: true
          schema:
            type: string
            title: id
            format: uuid
            description: Unique identifier for the connection (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                connection:
                  title: connection
                  description: |-
                    The connection with updated fields. The `id` field is required.
                     Only fields specified in `update_mask` are updated.

                     When updating auth_config, the entire auth config is replaced.
                     Omitting auth_config from the update_mask leaves credentials unchanged.
                  $ref: '#/components/schemas/admiral.api.connection.v1.Connection'
                updateMask:
                  title: update_mask
                  description: |-
                    The set of fields to update. If unset, all mutable fields are updated.
                     Supported fields: `name`, `description`, `auth_config`, `labels`.
                  $ref: '#/components/schemas/google.protobuf.FieldMask'
              title: UpdateConnectionRequest
              required:
                - connection
              additionalProperties: false
              description: UpdateConnectionRequest contains the connection fields to update.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.connection.v1.UpdateConnectionResponse'
  /v1/connections/{connection_id}:
    get:
      tags:
        - admiral.api.connection.v1.ConnectionAPI
      summary: GetConnection retrieves a connection by ID.
      description: |-
        Returns connection metadata and status. Sensitive credential fields are
         never included in the response.

         Scope: `connection:read`
      operationId: admiral.api.connection.v1.ConnectionAPI.GetConnection
      parameters:
        - name: connection_id
          in: path
          description: The unique identifier of the connection (UUID).
          required: true
          schema:
            type: string
            title: connection_id
            format: uuid
            description: The unique identifier of the connection (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.connection.v1.GetConnectionResponse'
    delete:
      tags:
        - admiral.api.connection.v1.ConnectionAPI
      summary: |-
        DeleteConnection permanently deletes a connection. Fails if any sources
         still reference this connection — remove or reassign those sources first.
         This action cannot be undone.
      description: 'Scope: `connection:write`'
      operationId: admiral.api.connection.v1.ConnectionAPI.DeleteConnection
      parameters:
        - name: connection_id
          in: path
          description: |-
            The unique identifier of the connection to delete (UUID).
             Fails if any sources still reference this connection.
          required: true
          schema:
            type: string
            title: connection_id
            format: uuid
            description: |-
              The unique identifier of the connection to delete (UUID).
               Fails if any sources still reference this connection.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.connection.v1.DeleteConnectionResponse'
  /v1/connections/{connection_id}/test:
    post:
      tags:
        - admiral.api.connection.v1.ConnectionAPI
      summary: |-
        TestConnection validates that the stored credentials can successfully
         authenticate to the remote system. Updates the connection's status and
         last_tested_at fields based on the result.
      description: |-
        This operation makes a network call to the external system and may take
         several seconds depending on the remote endpoint.

         Scope: `connection:write`
      operationId: admiral.api.connection.v1.ConnectionAPI.TestConnection
      parameters:
        - name: connection_id
          in: path
          description: The unique identifier of the connection to test (UUID).
          required: true
          schema:
            type: string
            title: connection_id
            format: uuid
            description: The unique identifier of the connection to test (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.connection.v1.TestConnectionResponse'
  /v1/deployments:
    get:
      tags:
        - admiral.api.deployment.v1.DeploymentAPI
      summary: ListDeployments returns a paginated list of deployments.
      description: |-
        Common filter fields: `application_id`, `environment_id`, `status`,
         `trigger_type`. Use to view deployment history for an environment.

         Scope: `deploy:read`
      operationId: admiral.api.deployment.v1.DeploymentAPI.ListDeployments
      parameters:
        - name: filter
          in: query
          description: |-
            Filter expression using the PEG filter DSL.

             Common filter fields:
               - `application_id` — deployments for a specific application.
               - `environment_id` — deployments to a specific environment.
               - `status` — filter by deployment status.
               - `trigger_type` — filter by trigger type (MANUAL, CI, DESTROY).
          schema:
            type: string
            title: filter
            maxLength: 1024
            description: |-
              Filter expression using the PEG filter DSL.

               Common filter fields:
                 - `application_id` — deployments for a specific application.
                 - `environment_id` — deployments to a specific environment.
                 - `status` — filter by deployment status.
                 - `trigger_type` — filter by trigger type (MANUAL, CI, DESTROY).
        - name: pageSize
          in: query
          description: Maximum number of deployments to return per page.
          schema:
            type: integer
            title: page_size
            maximum: 100
            minimum: 0
            format: int32
            description: Maximum number of deployments to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.deployment.v1.ListDeploymentsResponse'
    post:
      tags:
        - admiral.api.deployment.v1.DeploymentAPI
      summary: |-
        CreateDeployment triggers a new deployment of an application to an
         environment.
      description: |-
        The server resolves all components (with environment overrides applied),
         builds the dependency DAG, and begins rendering and executing revisions.

         To destroy all resources in an environment (e.g., before deleting the
         environment), set `destroy` to true. This runs Terraform destroy for
         infrastructure components and deletes workload resources from the cluster,
         in reverse dependency order.

         Concurrency: only one deployment can be active per application+environment
         at a time. If a deployment is already in progress (PENDING or RUNNING),
         the new deployment is queued and will start automatically when the
         current deployment completes or is cancelled.

         Scope: `deploy:write`
      operationId: admiral.api.deployment.v1.DeploymentAPI.CreateDeployment
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/admiral.api.deployment.v1.CreateDeploymentRequest'
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.deployment.v1.CreateDeploymentResponse'
  /v1/deployments/{deployment_id}:
    get:
      tags:
        - admiral.api.deployment.v1.DeploymentAPI
      summary: |-
        GetDeployment retrieves a deployment by ID, including its composite
         status derived from all component revisions.
      description: 'Scope: `deploy:read`'
      operationId: admiral.api.deployment.v1.DeploymentAPI.GetDeployment
      parameters:
        - name: deployment_id
          in: path
          description: The unique identifier of the deployment (UUID).
          required: true
          schema:
            type: string
            title: deployment_id
            format: uuid
            description: The unique identifier of the deployment (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.deployment.v1.GetDeploymentResponse'
  /v1/deployments/{deployment_id}/cancel:
    post:
      tags:
        - admiral.api.deployment.v1.DeploymentAPI
      summary: |-
        CancelDeployment cancels an in-progress deployment. Revisions that are
         already SUCCEEDED remain applied — cancellation only stops pending and
         queued revisions from proceeding. The deployment status becomes CANCELLED.
      description: 'Scope: `deploy:write`'
      operationId: admiral.api.deployment.v1.DeploymentAPI.CancelDeployment
      parameters:
        - name: deployment_id
          in: path
          description: The deployment to cancel (UUID).
          required: true
          schema:
            type: string
            title: deployment_id
            format: uuid
            description: The deployment to cancel (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: string
                  title: reason
                  maxLength: 1024
                  description: Optional reason for cancellation.
              title: CancelDeploymentRequest
              additionalProperties: false
              description: CancelDeploymentRequest cancels an in-progress deployment.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.deployment.v1.CancelDeploymentResponse'
  /v1/deployments/{deployment_id}/revisions:
    get:
      tags:
        - admiral.api.deployment.v1.DeploymentAPI
      summary: ListRevisions returns all component revisions for a deployment.
      description: 'Scope: `deploy:read`'
      operationId: admiral.api.deployment.v1.DeploymentAPI.ListRevisions
      parameters:
        - name: deployment_id
          in: path
          description: The deployment to list revisions for (UUID).
          required: true
          schema:
            type: string
            title: deployment_id
            format: uuid
            description: The deployment to list revisions for (UUID).
        - name: pageSize
          in: query
          description: Maximum number of revisions to return per page.
          schema:
            type: integer
            title: page_size
            maximum: 100
            minimum: 0
            format: int32
            description: Maximum number of revisions to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.deployment.v1.ListRevisionsResponse'
  /v1/deployments/{deployment_id}/revisions/{revision_id}:
    get:
      tags:
        - admiral.api.deployment.v1.DeploymentAPI
      summary: GetRevision retrieves a single component revision within a deployment.
      description: 'Scope: `deploy:read`'
      operationId: admiral.api.deployment.v1.DeploymentAPI.GetRevision
      parameters:
        - name: deployment_id
          in: path
          description: The deployment (UUID).
          required: true
          schema:
            type: string
            title: deployment_id
            format: uuid
            description: The deployment (UUID).
        - name: revision_id
          in: path
          description: The revision (UUID).
          required: true
          schema:
            type: string
            title: revision_id
            format: uuid
            description: The revision (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.deployment.v1.GetRevisionResponse'
  /v1/deployments/{deployment_id}/revisions/{revision_id}/retry:
    post:
      tags:
        - admiral.api.deployment.v1.DeploymentAPI
      summary: |-
        RetryRevision retries a failed component revision. A new execution
         attempt is made using the same rendered artifacts. The retry count
         is incremented. Only applicable to revisions in FAILED status.
      description: 'Scope: `deploy:write`'
      operationId: admiral.api.deployment.v1.DeploymentAPI.RetryRevision
      parameters:
        - name: deployment_id
          in: path
          description: The deployment (UUID).
          required: true
          schema:
            type: string
            title: deployment_id
            format: uuid
            description: The deployment (UUID).
        - name: revision_id
          in: path
          description: The revision to retry (UUID). Must be in FAILED status.
          required: true
          schema:
            type: string
            title: revision_id
            format: uuid
            description: The revision to retry (UUID). Must be in FAILED status.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.deployment.v1.RetryRevisionResponse'
  /v1/environments:
    get:
      tags:
        - admiral.api.environment.v1.EnvironmentAPI
      summary: |-
        ListEnvironments returns a paginated list of environments. Use the filter
         to scope by application, runtime type, or labels.
      description: 'Scope: `env:read`'
      operationId: admiral.api.environment.v1.EnvironmentAPI.ListEnvironments
      parameters:
        - name: filter
          in: query
          description: Filter expression using the PEG filter DSL.
          schema:
            type: string
            title: filter
            maxLength: 1024
            description: Filter expression using the PEG filter DSL.
        - name: pageSize
          in: query
          description: Maximum number of environments to return per page.
          schema:
            type: integer
            title: page_size
            maximum: 100
            minimum: 0
            format: int32
            description: Maximum number of environments to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.environment.v1.ListEnvironmentsResponse'
    post:
      tags:
        - admiral.api.environment.v1.EnvironmentAPI
      summary: CreateEnvironment creates a new environment for the specified application.
      description: 'Scope: `env:write`'
      operationId: admiral.api.environment.v1.EnvironmentAPI.CreateEnvironment
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/admiral.api.environment.v1.CreateEnvironmentRequest'
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.environment.v1.CreateEnvironmentResponse'
  /v1/environments/{environment.id}:
    patch:
      tags:
        - admiral.api.environment.v1.EnvironmentAPI
      summary: |-
        UpdateEnvironment updates an environment's mutable fields.
         Use the `update_mask` to specify which fields to update.
      description: 'Scope: `env:write`'
      operationId: admiral.api.environment.v1.EnvironmentAPI.UpdateEnvironment
      parameters:
        - name: environment.id
          in: path
          description: Unique identifier for the environment (UUID).
          required: true
          schema:
            type: string
            title: id
            format: uuid
            description: Unique identifier for the environment (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                environment:
                  title: environment
                  description: |-
                    The environment with updated fields. The `id` field is required.
                     Only fields specified in `update_mask` are updated.
                  $ref: '#/components/schemas/admiral.api.environment.v1.Environment'
                updateMask:
                  title: update_mask
                  description: |-
                    The set of fields to update. If unset, all mutable fields are updated.
                     Supported fields: `name`, `description`, `runtime_type`, `kubernetes`,
                     `labels`, `infrastructure`.
                  $ref: '#/components/schemas/google.protobuf.FieldMask'
              title: UpdateEnvironmentRequest
              required:
                - environment
              additionalProperties: false
              description: UpdateEnvironmentRequest contains the environment fields to update.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.environment.v1.UpdateEnvironmentResponse'
  /v1/environments/{environment_id}:
    get:
      tags:
        - admiral.api.environment.v1.EnvironmentAPI
      summary: GetEnvironment retrieves an environment by ID.
      description: 'Scope: `env:read`'
      operationId: admiral.api.environment.v1.EnvironmentAPI.GetEnvironment
      parameters:
        - name: environment_id
          in: path
          description: The unique identifier of the environment (UUID).
          required: true
          schema:
            type: string
            title: environment_id
            format: uuid
            description: The unique identifier of the environment (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.environment.v1.GetEnvironmentResponse'
    delete:
      tags:
        - admiral.api.environment.v1.EnvironmentAPI
      summary: |-
        DeleteEnvironment permanently deletes an environment. Fails if the
         environment has an active deployment (last deployment status is SUCCEEDED
         with resources running). To delete an environment with deployed resources,
         first run a destroy deployment to tear down all components, then delete
         the environment record. This action cannot be undone.
      description: 'Scope: `env:write`'
      operationId: admiral.api.environment.v1.EnvironmentAPI.DeleteEnvironment
      parameters:
        - name: environment_id
          in: path
          description: The unique identifier of the environment to delete (UUID).
          required: true
          schema:
            type: string
            title: environment_id
            format: uuid
            description: The unique identifier of the environment to delete (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.environment.v1.DeleteEnvironmentResponse'
  /v1/healthcheck:
    get:
      tags:
        - admiral.api.healthcheck.v1.HealthcheckAPI
      summary: Healthcheck
      description: |-
        Healthcheck verifies that the service is running and healthy.
         Returns an empty response on success. Use this endpoint for load balancer
         health checks and monitoring systems.
      operationId: admiral.api.healthcheck.v1.HealthcheckAPI.Healthcheck
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.healthcheck.v1.HealthcheckResponse'
  /v1/runner/heartbeat:
    post:
      tags:
        - admiral.api.runner.v1.RunnerAPI
      summary: |-
        Heartbeat reports that the runner is alive and includes current capacity
         metrics. The server uses heartbeat recency to derive health status.
      description: |-
        The runner is identified by the agent token — the server resolves the
         runner from the AGT's binding. No runner_id is required in the request.

         This endpoint is runner-facing and restricted to agent tokens.

         Scope: `runner:exec` | Token types: `agt`
      operationId: admiral.api.runner.v1.RunnerAPI.Heartbeat
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/admiral.api.runner.v1.HeartbeatRequest'
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.runner.v1.HeartbeatResponse'
  /v1/runner/jobs/claim:
    post:
      tags:
        - admiral.api.runner.v1.RunnerAPI
      summary: |-
        ClaimJob polls for the next job assigned to this runner. Returns the job
         metadata if work is available, or an empty response if no jobs are
         pending. The runner should call this on a polling interval.
      description: |-
        The runner is identified by the agent token — no runner_id is required.

         This endpoint is runner-facing and restricted to agent tokens.

         Scope: `runner:exec` | Token types: `agt`
      operationId: admiral.api.runner.v1.RunnerAPI.ClaimJob
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/admiral.api.runner.v1.ClaimJobRequest'
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.runner.v1.ClaimJobResponse'
  /v1/runner/jobs/{job_id}/bundle:
    get:
      tags:
        - admiral.api.runner.v1.RunnerAPI
      summary: |-
        GetJobBundle fetches the rendered artifacts for a claimed job. Separated
         from ClaimJob to keep the claim response lightweight — the runner first
         claims a job, then fetches the (potentially large) artifact bundle.
      description: |-
        The bundle contains everything the runner needs to execute the Terraform
         operation: rendered .tf files, resolved variables, provider configuration,
         backend configuration, and the required Terraform version.

         This endpoint is runner-facing and restricted to agent tokens.

         Scope: `runner:exec` | Token types: `agt`
      operationId: admiral.api.runner.v1.RunnerAPI.GetJobBundle
      parameters:
        - name: job_id
          in: path
          description: The job to fetch the bundle for (UUID).
          required: true
          schema:
            type: string
            title: job_id
            format: uuid
            description: The job to fetch the bundle for (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.runner.v1.GetJobBundleResponse'
  /v1/runner/jobs/{job_id}/result:
    post:
      tags:
        - admiral.api.runner.v1.RunnerAPI
      summary: |-
        ReportJobResult reports the outcome of a completed job. The runner sends
         plan output (for plan jobs), apply results, error messages, and log
         references. The server transitions the parent Revision status accordingly
         (e.g., PLANNING→APPLYING, APPLYING→SUCCEEDED/FAILED).
      description: |-
        This endpoint is runner-facing and restricted to agent tokens.

         Scope: `runner:exec` | Token types: `agt`
      operationId: admiral.api.runner.v1.RunnerAPI.ReportJobResult
      parameters:
        - name: job_id
          in: path
          description: The job being reported on (UUID).
          required: true
          schema:
            type: string
            title: job_id
            format: uuid
            description: The job being reported on (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                result:
                  title: result
                  description: The job result with status, outputs, and error information.
                  $ref: '#/components/schemas/admiral.api.runner.v1.JobResult'
              title: ReportJobResultRequest
              required:
                - result
              additionalProperties: false
              description: ReportJobResultRequest contains the outcome of a completed job.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.runner.v1.ReportJobResultResponse'
  /v1/runner/jobs/{job_id}/state:
    get:
      tags:
        - admiral.api.state.v1.StateAPI
      summary: |-
        GetState fetches the current state for a job's component + environment.
         Returns empty data if no state exists yet (fresh init — Terraform
         handles this gracefully).
      description: |-
        The server validates that the AGT's runner binding matches the runner
         assigned to this job. Returns PERMISSION_DENIED if they do not match.
         Returns NOT_FOUND if the job does not exist or has been cancelled.

         Maps to Terraform HTTP backend GET on the state address.

         Scope: `state:read` | Token types: `agt`
      operationId: admiral.api.state.v1.StateAPI.GetState
      parameters:
        - name: job_id
          in: path
          description: |-
            The job to fetch state for (UUID). The server resolves the component
             and environment from the job's binding.
          required: true
          schema:
            type: string
            title: job_id
            format: uuid
            description: |-
              The job to fetch state for (UUID). The server resolves the component
               and environment from the job's binding.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.state.v1.GetStateResponse'
    post:
      tags:
        - admiral.api.state.v1.StateAPI
      summary: |-
        PushState stores a new state version after a successful apply. The server
         validates the serial number (must be greater than current) and lineage
         (must match if state already exists). Creates the state record on first
         push.
      description: |-
        The server validates that the AGT's runner binding matches the runner
         assigned to this job. Returns PERMISSION_DENIED if they do not match.
         Returns FAILED_PRECONDITION if the serial is not greater than the current
         serial. Returns INVALID_ARGUMENT if the lineage does not match the
         existing state record.

         Maps to Terraform HTTP backend POST on the state address.

         Scope: `state:write` | Token types: `agt`
      operationId: admiral.api.state.v1.StateAPI.PushState
      parameters:
        - name: job_id
          in: path
          description: The job pushing state (UUID).
          required: true
          schema:
            type: string
            title: job_id
            format: uuid
            description: The job pushing state (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                data:
                  type: string
                  title: data
                  maxLength: 67108864
                  minLength: 1
                  format: byte
                  description: The raw Terraform state data (JSON-encoded). Maximum 64 MiB.
                md5:
                  type: string
                  title: md5
                  minLength: 1
                  description: MD5 hash of the state data.
                serial:
                  type:
                    - integer
                    - string
                  title: serial
                  format: int64
                  description: Terraform state serial number. Must be greater than the current serial.
                lineage:
                  type: string
                  title: lineage
                  minLength: 1
                  description: |-
                    Terraform state lineage. Must match the existing lineage if the state
                     record already exists.
              title: PushStateRequest
              additionalProperties: false
              description: PushStateRequest stores a new state version.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.state.v1.PushStateResponse'
  /v1/runner/jobs/{job_id}/state/lock:
    post:
      tags:
        - admiral.api.state.v1.StateAPI
      summary: |-
        LockState acquires an exclusive lock for the job's state. Terraform calls
         this before plan/apply to prevent concurrent modifications.
      description: |-
        The server validates that the AGT's runner binding matches the runner
         assigned to this job. Returns PERMISSION_DENIED if they do not match.
         Returns FAILED_PRECONDITION if the state is already locked by a different
         operation. The lock_id is generated by Terraform and must be passed to
         UnlockState.

         Maps to Terraform HTTP backend POST on the lock address.

         Scope: `state:write` | Token types: `agt`
      operationId: admiral.api.state.v1.StateAPI.LockState
      parameters:
        - name: job_id
          in: path
          description: The job requesting the lock (UUID).
          required: true
          schema:
            type: string
            title: job_id
            format: uuid
            description: The job requesting the lock (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                lockId:
                  type: string
                  title: lock_id
                  format: uuid
                  description: Terraform-generated lock ID (UUID).
                operation:
                  type: string
                  title: operation
                  description: The Terraform operation requesting the lock.
                who:
                  type: string
                  title: who
                  description: Identifier of who is requesting the lock.
                version:
                  type: string
                  title: version
                  description: Terraform/OpenTofu version of the client requesting the lock.
              title: LockStateRequest
              additionalProperties: false
              description: LockStateRequest acquires an exclusive lock on the job's state.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.state.v1.LockStateResponse'
  /v1/runner/jobs/{job_id}/state/unlock:
    post:
      tags:
        - admiral.api.state.v1.StateAPI
      summary: |-
        UnlockState releases the exclusive lock on the job's state. The lock_id
         must match the one used during LockState.
      description: |-
        The server validates that the AGT's runner binding matches the runner
         assigned to this job. Returns PERMISSION_DENIED if they do not match.
         Returns FAILED_PRECONDITION if the lock_id does not match the currently
         held lock. Returns NOT_FOUND if no lock is held.

         Maps to Terraform HTTP backend POST on the unlock address.

         Scope: `state:write` | Token types: `agt`
      operationId: admiral.api.state.v1.StateAPI.UnlockState
      parameters:
        - name: job_id
          in: path
          description: The job releasing the lock (UUID).
          required: true
          schema:
            type: string
            title: job_id
            format: uuid
            description: The job releasing the lock (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                lockId:
                  type: string
                  title: lock_id
                  format: uuid
                  description: The lock_id to release (UUID). Must match the currently held lock.
              title: UnlockStateRequest
              additionalProperties: false
              description: UnlockStateRequest releases the lock on the job's state.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.state.v1.UnlockStateResponse'
  /v1/runners:
    get:
      tags:
        - admiral.api.runner.v1.RunnerAPI
      summary: ListRunners returns a paginated list of runners within the caller's tenant.
      description: 'Scope: `runner:read`'
      operationId: admiral.api.runner.v1.RunnerAPI.ListRunners
      parameters:
        - name: filter
          in: query
          description: Filter expression using the PEG filter DSL.
          schema:
            type: string
            title: filter
            maxLength: 1024
            description: Filter expression using the PEG filter DSL.
        - name: pageSize
          in: query
          description: Maximum number of runners to return per page.
          schema:
            type: integer
            title: page_size
            maximum: 100
            minimum: 0
            format: int32
            description: Maximum number of runners to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.runner.v1.ListRunnersResponse'
    post:
      tags:
        - admiral.api.runner.v1.RunnerAPI
      summary: |-
        CreateRunner creates a new runner record within the caller's tenant and
         generates an initial Agent Token (AGT). The runner starts in PENDING
         health status until it begins heartbeating.
      description: |-
        The response includes a `plain_text_token` — the raw AGT secret shown
         exactly once. Deploy this token to the runner binary for authentication.

         Scope: `runner:write`
      operationId: admiral.api.runner.v1.RunnerAPI.CreateRunner
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/admiral.api.runner.v1.CreateRunnerRequest'
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.runner.v1.CreateRunnerResponse'
  /v1/runners/{runner.id}:
    patch:
      tags:
        - admiral.api.runner.v1.RunnerAPI
      summary: |-
        UpdateRunner updates a runner's mutable fields.
         Use the `update_mask` to specify which fields to update.
      description: 'Scope: `runner:write`'
      operationId: admiral.api.runner.v1.RunnerAPI.UpdateRunner
      parameters:
        - name: runner.id
          in: path
          description: Unique identifier for the runner (UUID).
          required: true
          schema:
            type: string
            title: id
            format: uuid
            description: Unique identifier for the runner (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                runner:
                  title: runner
                  description: |-
                    The runner with updated fields. The `id` field is required.
                     Only fields specified in `update_mask` are updated.
                  $ref: '#/components/schemas/admiral.api.runner.v1.Runner'
                updateMask:
                  title: update_mask
                  description: |-
                    The set of fields to update. If unset, all mutable fields are updated.
                     Supported fields: `name`, `description`, `labels`.
                  $ref: '#/components/schemas/google.protobuf.FieldMask'
              title: UpdateRunnerRequest
              required:
                - runner
              additionalProperties: false
              description: UpdateRunnerRequest contains the runner fields to update.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.runner.v1.UpdateRunnerResponse'
  /v1/runners/{runner_id}:
    get:
      tags:
        - admiral.api.runner.v1.RunnerAPI
      summary: GetRunner retrieves a runner by ID.
      description: |-
        Returns the Runner record with its server-derived health_status. For
         detailed telemetry (active jobs, capacity), use GetRunnerStatus instead.

         Scope: `runner:read`
      operationId: admiral.api.runner.v1.RunnerAPI.GetRunner
      parameters:
        - name: runner_id
          in: path
          description: The unique identifier of the runner (UUID).
          required: true
          schema:
            type: string
            title: runner_id
            format: uuid
            description: The unique identifier of the runner (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.runner.v1.GetRunnerResponse'
    delete:
      tags:
        - admiral.api.runner.v1.RunnerAPI
      summary: |-
        DeleteRunner permanently deletes a runner record and revokes all
         associated agent tokens. Any jobs assigned to this runner that are
         not yet completed will be failed. This action cannot be undone.
      description: 'Scope: `runner:write`'
      operationId: admiral.api.runner.v1.RunnerAPI.DeleteRunner
      parameters:
        - name: runner_id
          in: path
          description: |-
            The unique identifier of the runner to delete (UUID).
             All associated agent tokens will be revoked.
          required: true
          schema:
            type: string
            title: runner_id
            format: uuid
            description: |-
              The unique identifier of the runner to delete (UUID).
               All associated agent tokens will be revoked.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.runner.v1.DeleteRunnerResponse'
  /v1/runners/{runner_id}/jobs:
    get:
      tags:
        - admiral.api.runner.v1.RunnerAPI
      summary: |-
        ListRunnerJobs returns a paginated list of jobs assigned to a runner.
         Provides admin read-only visibility into runner workload.
      description: 'Scope: `runner:read`'
      operationId: admiral.api.runner.v1.RunnerAPI.ListRunnerJobs
      parameters:
        - name: runner_id
          in: path
          description: The runner whose jobs to list (UUID).
          required: true
          schema:
            type: string
            title: runner_id
            format: uuid
            description: The runner whose jobs to list (UUID).
        - name: filter
          in: query
          description: |-
            Filter expression using the PEG filter DSL.

             Common filter fields:
               - `status` — filter by job status.
               - `job_type` — filter by job type (PLAN, APPLY, etc.).
               - `deployment_id` — jobs for a specific deployment.
          schema:
            type: string
            title: filter
            maxLength: 1024
            description: |-
              Filter expression using the PEG filter DSL.

               Common filter fields:
                 - `status` — filter by job status.
                 - `job_type` — filter by job type (PLAN, APPLY, etc.).
                 - `deployment_id` — jobs for a specific deployment.
        - name: pageSize
          in: query
          description: Maximum number of jobs to return per page.
          schema:
            type: integer
            title: page_size
            maximum: 100
            minimum: 0
            format: int32
            description: Maximum number of jobs to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.runner.v1.ListRunnerJobsResponse'
  /v1/runners/{runner_id}/status:
    get:
      tags:
        - admiral.api.runner.v1.RunnerAPI
      summary: |-
        GetRunnerStatus retrieves the current telemetry snapshot for a runner.
         Returns the latest capacity metrics reported via Heartbeat.
      description: |-
        Returns NOT_FOUND if the runner does not exist. If the runner exists but
         has not heartbeated yet, health_status will be PENDING and status will
         be absent.

         Scope: `runner:read`
      operationId: admiral.api.runner.v1.RunnerAPI.GetRunnerStatus
      parameters:
        - name: runner_id
          in: path
          description: The unique identifier of the runner (UUID).
          required: true
          schema:
            type: string
            title: runner_id
            format: uuid
            description: The unique identifier of the runner (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.runner.v1.GetRunnerStatusResponse'
  /v1/runners/{runner_id}/tokens:
    get:
      tags:
        - admiral.api.runner.v1.RunnerAPI
      summary: |-
        ListRunnerTokens returns a paginated list of AGTs bound to the specified
         runner. Token secrets are never included.
      description: 'Scope: `runner:read`'
      operationId: admiral.api.runner.v1.RunnerAPI.ListRunnerTokens
      parameters:
        - name: runner_id
          in: path
          description: The runner to list tokens for (UUID).
          required: true
          schema:
            type: string
            title: runner_id
            format: uuid
            description: The runner to list tokens for (UUID).
        - name: filter
          in: query
          description: Filter expression using the PEG filter DSL.
          schema:
            type: string
            title: filter
            maxLength: 1024
            description: Filter expression using the PEG filter DSL.
        - name: pageSize
          in: query
          description: Maximum number of tokens to return per page.
          schema:
            type: integer
            title: page_size
            maximum: 100
            minimum: 0
            format: int32
            description: Maximum number of tokens to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.runner.v1.ListRunnerTokensResponse'
    post:
      tags:
        - admiral.api.runner.v1.RunnerAPI
      summary: |-
        CreateRunnerToken creates a new Agent Token (AGT) bound to the specified
         runner. Scopes are auto-assigned and cannot be overridden. The response
         includes the raw token secret, which is shown exactly once.
      description: |-
        Use this to create additional AGTs for an existing runner (e.g., for
         zero-downtime token rotation). The initial AGT is created automatically
         by CreateRunner.

         Scope: `runner:write`
      operationId: admiral.api.runner.v1.RunnerAPI.CreateRunnerToken
      parameters:
        - name: runner_id
          in: path
          description: The runner to bind this token to (UUID).
          required: true
          schema:
            type: string
            title: runner_id
            format: uuid
            description: The runner to bind this token to (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  title: name
                  maxLength: 63
                  minLength: 1
                  pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
                  description: |-
                    URL-safe, human-readable identifier for the token (e.g., "prod-runner-key").
                     Must be unique within the runner's tokens. Lowercase alphanumeric and
                     hyphens only.
                expiresAt:
                  title: expires_at
                  description: Optional expiration time. If unset, the token does not expire.
                  $ref: '#/components/schemas/google.protobuf.Timestamp'
              title: CreateRunnerTokenRequest
              additionalProperties: false
              description: |-
                CreateRunnerTokenRequest contains the parameters for creating a new AGT
                 bound to a runner.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.runner.v1.CreateRunnerTokenResponse'
  /v1/runners/{runner_id}/tokens/{token_id}:
    get:
      tags:
        - admiral.api.runner.v1.RunnerAPI
      summary: |-
        GetRunnerToken retrieves a single AGT by ID.
         Returns metadata only — the token secret is never included.
      description: 'Scope: `runner:read`'
      operationId: admiral.api.runner.v1.RunnerAPI.GetRunnerToken
      parameters:
        - name: runner_id
          in: path
          description: The runner the token belongs to (UUID).
          required: true
          schema:
            type: string
            title: runner_id
            format: uuid
            description: The runner the token belongs to (UUID).
        - name: token_id
          in: path
          description: The unique identifier of the token (UUID).
          required: true
          schema:
            type: string
            title: token_id
            format: uuid
            description: The unique identifier of the token (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.runner.v1.GetRunnerTokenResponse'
  /v1/runners/{runner_id}/tokens/{token_id}/revoke:
    post:
      tags:
        - admiral.api.runner.v1.RunnerAPI
      summary: |-
        RevokeRunnerToken permanently revokes an AGT bound to this runner.
         The runner will receive a 401 on its next request. If this is the only
         active AGT for the runner, the runner will become disconnected.
      description: 'Scope: `runner:write`'
      operationId: admiral.api.runner.v1.RunnerAPI.RevokeRunnerToken
      parameters:
        - name: runner_id
          in: path
          description: The runner the token belongs to (UUID).
          required: true
          schema:
            type: string
            title: runner_id
            format: uuid
            description: The runner the token belongs to (UUID).
        - name: token_id
          in: path
          description: The unique identifier of the token to revoke (UUID).
          required: true
          schema:
            type: string
            title: token_id
            format: uuid
            description: The unique identifier of the token to revoke (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.runner.v1.RevokeRunnerTokenResponse'
  /v1/sources:
    get:
      tags:
        - admiral.api.source.v1.SourceAPI
      summary: |-
        ListSources returns a paginated list of sources within the caller's tenant.
         Use the filter to scope by type, catalog status, or labels.
      description: 'Scope: `source:read`'
      operationId: admiral.api.source.v1.SourceAPI.ListSources
      parameters:
        - name: filter
          in: query
          description: Filter expression using the PEG filter DSL.
          schema:
            type: string
            title: filter
            maxLength: 1024
            description: Filter expression using the PEG filter DSL.
        - name: pageSize
          in: query
          description: Maximum number of sources to return per page.
          schema:
            type: integer
            title: page_size
            maximum: 100
            minimum: 0
            format: int32
            description: Maximum number of sources to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.source.v1.ListSourcesResponse'
    post:
      tags:
        - admiral.api.source.v1.SourceAPI
      summary: CreateSource creates a new source definition within the caller's tenant.
      description: |-
        The source type and source_config must match — for example, a
         TERRAFORM_REGISTRY source requires a TerraformRegistryConfig.

         Scope: `source:write`
      operationId: admiral.api.source.v1.SourceAPI.CreateSource
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/admiral.api.source.v1.CreateSourceRequest'
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.source.v1.CreateSourceResponse'
  /v1/sources/{source.id}:
    patch:
      tags:
        - admiral.api.source.v1.SourceAPI
      summary: |-
        UpdateSource updates a source's mutable fields.
         Use the `update_mask` to specify which fields to update.
      description: 'Scope: `source:write`'
      operationId: admiral.api.source.v1.SourceAPI.UpdateSource
      parameters:
        - name: source.id
          in: path
          description: Unique identifier for the source (UUID).
          required: true
          schema:
            type: string
            title: id
            format: uuid
            description: Unique identifier for the source (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                source:
                  title: source
                  description: |-
                    The source with updated fields. The `id` field is required.
                     Only fields specified in `update_mask` are updated.
                  $ref: '#/components/schemas/admiral.api.source.v1.Source'
                updateMask:
                  title: update_mask
                  description: |-
                    The set of fields to update. If unset, all mutable fields are updated.
                     Supported fields: `name`, `description`, `url`, `connection_id`, `catalog`,
                     `source_config`, `labels`.
                  $ref: '#/components/schemas/google.protobuf.FieldMask'
              title: UpdateSourceRequest
              required:
                - source
              additionalProperties: false
              description: UpdateSourceRequest contains the source fields to update.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.source.v1.UpdateSourceResponse'
  /v1/sources/{source_id}:
    get:
      tags:
        - admiral.api.source.v1.SourceAPI
      summary: GetSource retrieves a source by ID.
      description: 'Scope: `source:read`'
      operationId: admiral.api.source.v1.SourceAPI.GetSource
      parameters:
        - name: source_id
          in: path
          description: The unique identifier of the source (UUID).
          required: true
          schema:
            type: string
            title: source_id
            format: uuid
            description: The unique identifier of the source (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.source.v1.GetSourceResponse'
    delete:
      tags:
        - admiral.api.source.v1.SourceAPI
      summary: |-
        DeleteSource permanently deletes a source definition. Fails if any
         application components still reference this source — remove or reassign
         those components first. This action cannot be undone.
      description: 'Scope: `source:write`'
      operationId: admiral.api.source.v1.SourceAPI.DeleteSource
      parameters:
        - name: source_id
          in: path
          description: |-
            The unique identifier of the source to delete (UUID).
             Fails if any application components still reference this source.
          required: true
          schema:
            type: string
            title: source_id
            format: uuid
            description: |-
              The unique identifier of the source to delete (UUID).
               Fails if any application components still reference this source.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.source.v1.DeleteSourceResponse'
  /v1/sources/{source_id}/inputs:
    get:
      tags:
        - admiral.api.source.v1.SourceAPI
      summary: |-
        GetSourceInputs fetches the source artifact at a specific version and
         parses its inputs (configurable parameters).
      description: |-
        For Terraform modules, this parses HCL variable blocks using
         terraform-config-inspect. For Helm charts, this extracts values.yaml and
         optionally values.schema.json. For Kustomize and raw manifests, inputs
         are not discoverable and the response will be empty.

         This operation fetches and parses the external artifact in real time and
         may take several seconds.

         Scope: `source:read`
      operationId: admiral.api.source.v1.SourceAPI.GetSourceInputs
      parameters:
        - name: source_id
          in: path
          description: The source to inspect (UUID).
          required: true
          schema:
            type: string
            title: source_id
            format: uuid
            description: The source to inspect (UUID).
        - name: version
          in: query
          description: |-
            The version to inspect. For registry sources, a semver string. For Git
             sources, a tag, branch, or commit SHA. Required.
          schema:
            type: string
            title: version
            minLength: 1
            description: |-
              The version to inspect. For registry sources, a semver string. For Git
               sources, a tag, branch, or commit SHA. Required.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.source.v1.GetSourceInputsResponse'
  /v1/sources/{source_id}/outputs:
    get:
      tags:
        - admiral.api.source.v1.SourceAPI
      summary: |-
        GetSourceOutputs fetches the source artifact at a specific version and
         parses its outputs (values produced after apply).
      description: |-
        Only meaningful for Terraform modules, which declare formal output blocks.
         Helm charts, Kustomize, and raw manifests do not have formal outputs —
         workload component outputs are user-declared, not discovered.

         This operation queries the external system in real time and may take
         several seconds.

         Scope: `source:read`
      operationId: admiral.api.source.v1.SourceAPI.GetSourceOutputs
      parameters:
        - name: source_id
          in: path
          description: The source to inspect (UUID).
          required: true
          schema:
            type: string
            title: source_id
            format: uuid
            description: The source to inspect (UUID).
        - name: version
          in: query
          description: The version to inspect. Required.
          schema:
            type: string
            title: version
            minLength: 1
            description: The version to inspect. Required.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.source.v1.GetSourceOutputsResponse'
  /v1/sources/{source_id}/sync:
    post:
      tags:
        - admiral.api.source.v1.SourceAPI
      summary: |-
        SyncSource triggers a refresh of the source's cached metadata — version
         list, discovered inputs/outputs, and connectivity status.
      description: |-
        Use this after updating credentials on the referenced connection, or to
         force a refresh when you know the upstream has changed.

         This operation queries the external system in real time and may take
         several seconds.

         Scope: `source:write`
      operationId: admiral.api.source.v1.SourceAPI.SyncSource
      parameters:
        - name: source_id
          in: path
          description: The source to sync (UUID).
          required: true
          schema:
            type: string
            title: source_id
            format: uuid
            description: The source to sync (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.source.v1.SyncSourceResponse'
  /v1/sources/{source_id}/versions:
    get:
      tags:
        - admiral.api.source.v1.SourceAPI
      summary: |-
        ListSourceVersions queries the external system for available versions of
         this source's artifact.
      description: |-
        For Terraform registry sources, this calls the Module Registry Protocol's
         version listing endpoint. For Helm repositories, it parses the index.yaml.
         For OCI sources, it lists tags. For Git sources, it lists tags via
         ls-remote.

         This operation queries the external system in real time and may take
         several seconds.

         Scope: `source:read`
      operationId: admiral.api.source.v1.SourceAPI.ListSourceVersions
      parameters:
        - name: source_id
          in: path
          description: The source to query versions for (UUID).
          required: true
          schema:
            type: string
            title: source_id
            format: uuid
            description: The source to query versions for (UUID).
        - name: pageSize
          in: query
          description: Maximum number of versions to return. Defaults to 50.
          schema:
            type: integer
            title: page_size
            maximum: 100
            minimum: 0
            format: int32
            description: Maximum number of versions to return. Defaults to 50.
        - name: pageToken
          in: query
          description: Opaque pagination token for fetching additional versions.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token for fetching additional versions.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.source.v1.ListSourceVersionsResponse'
  /v1/states:
    get:
      tags:
        - admiral.api.state.v1.StateAPI
      summary: |-
        ListStates returns a paginated list of state records within the caller's
         tenant. Use filters to scope by component, environment, or application.
         Returns metadata only — use GetCurrentState to fetch full state data.
      description: 'Scope: `state:read`'
      operationId: admiral.api.state.v1.StateAPI.ListStates
      parameters:
        - name: filter
          in: query
          description: |-
            Filter expression using the PEG filter DSL.

             Common filter fields:
               - `component_id` — states for a specific component (UUID).
               - `environment_id` — states for a specific environment (UUID).
               - `application_id` — states for all components belonging to an
                 application (UUID). The server resolves the application's components
                 and returns states for all of them. Can be combined with
                 `environment_id`.
          schema:
            type: string
            title: filter
            maxLength: 1024
            description: |-
              Filter expression using the PEG filter DSL.

               Common filter fields:
                 - `component_id` — states for a specific component (UUID).
                 - `environment_id` — states for a specific environment (UUID).
                 - `application_id` — states for all components belonging to an
                   application (UUID). The server resolves the application's components
                   and returns states for all of them. Can be combined with
                   `environment_id`.
        - name: pageSize
          in: query
          description: Maximum number of states to return per page.
          schema:
            type: integer
            title: page_size
            maximum: 100
            minimum: 0
            format: int32
            description: Maximum number of states to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.state.v1.ListStatesResponse'
  /v1/states/{state_id}:
    get:
      tags:
        - admiral.api.state.v1.StateAPI
      summary: |-
        GetCurrentState retrieves the current state and lock info for a state
         record. Returns the latest state data, serial, lineage, and any active
         lock.
      description: |-
        Returns NOT_FOUND if the state record does not exist.

         Scope: `state:read`
      operationId: admiral.api.state.v1.StateAPI.GetCurrentState
      parameters:
        - name: state_id
          in: path
          description: The unique identifier of the state record (UUID).
          required: true
          schema:
            type: string
            title: state_id
            format: uuid
            description: The unique identifier of the state record (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.state.v1.GetCurrentStateResponse'
    delete:
      tags:
        - admiral.api.state.v1.StateAPI
      summary: |-
        DeleteState permanently deletes a state record and all its version
         history. Fails if the state is currently locked — force-unlock first.
         This action cannot be undone.
      description: |-
        Returns NOT_FOUND if the state record does not exist.
         Returns FAILED_PRECONDITION if the state is currently locked.

         Scope: `state:admin`
      operationId: admiral.api.state.v1.StateAPI.DeleteState
      parameters:
        - name: state_id
          in: path
          description: |-
            The unique identifier of the state record to delete (UUID).
             Fails if the state is currently locked — force-unlock first.
          required: true
          schema:
            type: string
            title: state_id
            format: uuid
            description: |-
              The unique identifier of the state record to delete (UUID).
               Fails if the state is currently locked — force-unlock first.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.state.v1.DeleteStateResponse'
  /v1/states/{state_id}/force-unlock:
    post:
      tags:
        - admiral.api.state.v1.StateAPI
      summary: |-
        ForceUnlockState forcefully releases a stuck lock on a state record.
         Use this when a runner has crashed or become unreachable while holding
         a lock, preventing subsequent deployments from proceeding.
      description: |-
        Returns NOT_FOUND if the state record does not exist.
         Returns FAILED_PRECONDITION if the state has no active lock.
         This action is logged in the audit trail.

         Scope: `state:admin`
      operationId: admiral.api.state.v1.StateAPI.ForceUnlockState
      parameters:
        - name: state_id
          in: path
          description: The state record to force-unlock (UUID).
          required: true
          schema:
            type: string
            title: state_id
            format: uuid
            description: The state record to force-unlock (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: string
                  title: reason
                  maxLength: 1024
                  description: |-
                    Reason for force-unlocking (audited). Recommended to provide context
                     for why the lock is being broken (e.g., "runner crashed during apply").
              title: ForceUnlockStateRequest
              additionalProperties: false
              description: ForceUnlockStateRequest identifies a state to force-unlock.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.state.v1.ForceUnlockStateResponse'
  /v1/states/{state_id}/versions:
    get:
      tags:
        - admiral.api.state.v1.StateAPI
      summary: |-
        ListStateVersions returns a paginated history of state versions for a
         state record. Returns metadata only (serial, md5, size) — use
         GetStateVersion to fetch the full state data at a specific serial.
      description: |-
        Returns NOT_FOUND if the state record does not exist.

         Scope: `state:read`
      operationId: admiral.api.state.v1.StateAPI.ListStateVersions
      parameters:
        - name: state_id
          in: path
          description: The state record to list versions for (UUID).
          required: true
          schema:
            type: string
            title: state_id
            format: uuid
            description: The state record to list versions for (UUID).
        - name: pageSize
          in: query
          description: Maximum number of versions to return per page.
          schema:
            type: integer
            title: page_size
            maximum: 100
            minimum: 0
            format: int32
            description: Maximum number of versions to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.state.v1.ListStateVersionsResponse'
  /v1/states/{state_id}/versions/{serial}:
    get:
      tags:
        - admiral.api.state.v1.StateAPI
      summary: |-
        GetStateVersion retrieves the full state data at a historical serial
         number. Use ListStateVersions to discover available serials.
      description: |-
        Returns NOT_FOUND if the state record does not exist or if no version
         with the specified serial exists for that state record.

         Scope: `state:read`
      operationId: admiral.api.state.v1.StateAPI.GetStateVersion
      parameters:
        - name: state_id
          in: path
          description: The state record (UUID).
          required: true
          schema:
            type: string
            title: state_id
            format: uuid
            description: The state record (UUID).
        - name: serial
          in: path
          description: The serial number of the version to retrieve.
          required: true
          schema:
            type:
              - integer
              - string
            title: serial
            format: int64
            description: The serial number of the version to retrieve.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.state.v1.GetStateVersionResponse'
  /v1/user:
    get:
      tags:
        - admiral.api.user.v1.UserAPI
      summary: GetUser
      description: |-
        GetUser retrieves the profile of the currently authenticated user.
         The user is identified by the authentication token provided in the request.
      operationId: admiral.api.user.v1.UserAPI.GetUser
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.user.v1.GetUserResponse'
  /v1/user/tokens:
    get:
      tags:
        - admiral.api.user.v1.UserAPI
      summary: |-
        ListPersonalAccessTokens returns a paginated list of the authenticated
         user's PATs. Token secrets are never included.
      description: 'Scope: `token:read`'
      operationId: admiral.api.user.v1.UserAPI.ListPersonalAccessTokens
      parameters:
        - name: filter
          in: query
          description: |-
            Filter expression using the PEG filter DSL
             (e.g., `status == "active"` or `name == "ci-*"`).
          schema:
            type: string
            title: filter
            maxLength: 1024
            description: |-
              Filter expression using the PEG filter DSL
               (e.g., `status == "active"` or `name == "ci-*"`).
        - name: pageSize
          in: query
          description: Maximum number of tokens to return per page.
          schema:
            type: integer
            title: page_size
            maximum: 100
            minimum: 0
            format: int32
            description: Maximum number of tokens to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.user.v1.ListPersonalAccessTokensResponse'
    post:
      tags:
        - admiral.api.user.v1.UserAPI
      summary: |-
        CreatePersonalAccessToken creates a new PAT for the authenticated user.
         The response includes the raw token secret, which is shown exactly once
         and cannot be retrieved again.
      description: 'Scope: `token:write`'
      operationId: admiral.api.user.v1.UserAPI.CreatePersonalAccessToken
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/admiral.api.user.v1.CreatePersonalAccessTokenRequest'
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.user.v1.CreatePersonalAccessTokenResponse'
  /v1/user/tokens/{token_id}:
    get:
      tags:
        - admiral.api.user.v1.UserAPI
      summary: |-
        GetPersonalAccessToken retrieves a single PAT by ID.
         Returns metadata only — the token secret is never included.
      description: 'Scope: `token:read`'
      operationId: admiral.api.user.v1.UserAPI.GetPersonalAccessToken
      parameters:
        - name: token_id
          in: path
          description: The unique identifier of the token (UUID).
          required: true
          schema:
            type: string
            title: token_id
            format: uuid
            description: The unique identifier of the token (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.user.v1.GetPersonalAccessTokenResponse'
  /v1/user/tokens/{token_id}/revoke:
    post:
      tags:
        - admiral.api.user.v1.UserAPI
      summary: |-
        RevokePersonalAccessToken permanently revokes a PAT. The token becomes
         immediately unusable and cannot be restored.
      description: 'Scope: `token:write`'
      operationId: admiral.api.user.v1.UserAPI.RevokePersonalAccessToken
      parameters:
        - name: token_id
          in: path
          description: The unique identifier of the token to revoke (UUID).
          required: true
          schema:
            type: string
            title: token_id
            format: uuid
            description: The unique identifier of the token to revoke (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.user.v1.RevokePersonalAccessTokenResponse'
  /v1/variables:
    get:
      tags:
        - admiral.api.variable.v1.VariableAPI
      summary: ListVariables returns a merged, paginated list of variables.
      description: |-
        The returned list is a resolved view based on the provided filters:
           - No application_id or environment_id: global variables only.
           - application_id only: global + app-level variables merged.
           - application_id + environment_id: global + app + environment variables merged.

         When variables with the same key exist at multiple levels, all are returned
         so clients can determine precedence.

         Scope: `var:read`
      operationId: admiral.api.variable.v1.VariableAPI.ListVariables
      parameters:
        - name: filter
          in: query
          description: |-
            Filter expression using the PEG filter DSL.

             Common filter fields:
               - `application_id` — scope to an application (triggers merge with
                 app-level variables alongside global variables).
               - `environment_id` — scope to an environment (requires application_id;
                 triggers merge with environment-level variables).
               - `sensitive` — filter by sensitivity.
               - `type` — filter by variable type.
               - `key` — filter by variable key (supports prefix matching).
          schema:
            type: string
            title: filter
            maxLength: 1024
            description: |-
              Filter expression using the PEG filter DSL.

               Common filter fields:
                 - `application_id` — scope to an application (triggers merge with
                   app-level variables alongside global variables).
                 - `environment_id` — scope to an environment (requires application_id;
                   triggers merge with environment-level variables).
                 - `sensitive` — filter by sensitivity.
                 - `type` — filter by variable type.
                 - `key` — filter by variable key (supports prefix matching).
        - name: pageSize
          in: query
          description: Maximum number of variables to return per page.
          schema:
            type: integer
            title: page_size
            maximum: 100
            minimum: 0
            format: int32
            description: Maximum number of variables to return per page.
        - name: pageToken
          in: query
          description: Opaque pagination token from a previous response.
          schema:
            type: string
            title: page_token
            description: Opaque pagination token from a previous response.
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.variable.v1.ListVariablesResponse'
    post:
      tags:
        - admiral.api.variable.v1.VariableAPI
      summary: CreateVariable creates a new variable.
      description: |-
        Fails if a variable with the same key already exists at the same level
         (same key + application_id + environment_id combination).

         Scope: `var:write`
      operationId: admiral.api.variable.v1.VariableAPI.CreateVariable
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/admiral.api.variable.v1.CreateVariableRequest'
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.variable.v1.CreateVariableResponse'
  /v1/variables/{variable.id}:
    patch:
      tags:
        - admiral.api.variable.v1.VariableAPI
      summary: |-
        UpdateVariable updates a variable's mutable fields.
         Use the `update_mask` to specify which fields to update.
         Only `value` and `sensitive` are mutable — key is immutable.
      description: 'Scope: `var:write`'
      operationId: admiral.api.variable.v1.VariableAPI.UpdateVariable
      parameters:
        - name: variable.id
          in: path
          description: Unique identifier for the variable (UUID).
          required: true
          schema:
            type: string
            title: id
            format: uuid
            description: Unique identifier for the variable (UUID).
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                variable:
                  title: variable
                  description: |-
                    The variable with updated fields. The `id` field is required.
                     Only fields specified in `update_mask` are updated.
                  $ref: '#/components/schemas/admiral.api.variable.v1.Variable'
                updateMask:
                  title: update_mask
                  description: |-
                    The set of fields to update. If unset, all mutable fields are updated.
                     Supported fields: `value`, `sensitive`, `type`, `description`.
                  $ref: '#/components/schemas/google.protobuf.FieldMask'
              title: UpdateVariableRequest
              required:
                - variable
              additionalProperties: false
              description: UpdateVariableRequest contains the variable fields to update.
        required: true
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.variable.v1.UpdateVariableResponse'
  /v1/variables/{variable_id}:
    get:
      tags:
        - admiral.api.variable.v1.VariableAPI
      summary: GetVariable retrieves a variable by ID.
      description: |-
        Sensitive variable values are masked in the response.

         Scope: `var:read`
      operationId: admiral.api.variable.v1.VariableAPI.GetVariable
      parameters:
        - name: variable_id
          in: path
          description: The unique identifier of the variable (UUID).
          required: true
          schema:
            type: string
            title: variable_id
            format: uuid
            description: The unique identifier of the variable (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.variable.v1.GetVariableResponse'
    delete:
      tags:
        - admiral.api.variable.v1.VariableAPI
      summary: DeleteVariable permanently deletes a variable. This action cannot be undone.
      description: 'Scope: `var:write`'
      operationId: admiral.api.variable.v1.VariableAPI.DeleteVariable
      parameters:
        - name: variable_id
          in: path
          description: The unique identifier of the variable to delete (UUID).
          required: true
          schema:
            type: string
            title: variable_id
            format: uuid
            description: The unique identifier of the variable to delete (UUID).
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/admiral.api.variable.v1.DeleteVariableResponse'
components:
  schemas:
    admiral.api.application.v1.Application:
      type: object
      properties:
        id:
          type: string
          title: id
          format: uuid
          description: Unique identifier for the application (UUID).
        tenantId:
          type: string
          title: tenant_id
          format: uuid
          description: Tenant this application belongs to (UUID).
        name:
          type: string
          title: name
          maxLength: 63
          minLength: 1
          pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
          description: |-
            URL-safe, human-readable identifier (e.g., "billing-api"). Unique within
             the tenant. Lowercase alphanumeric and hyphens only, must start with a
             letter and end with an alphanumeric character (1-63 chars).
        description:
          type: string
          title: description
          maxLength: 1024
          description: |-
            Optional longer-form description of the application's purpose
             (e.g., "Handles invoice generation and payment processing").
        labels:
          type: object
          title: labels
          maxProperties: 64
          additionalProperties:
            type: string
            title: value
            maxLength: 256
          description: |-
            Arbitrary key-value labels for organizing and filtering applications
             (e.g., `{"team": "payments", "tier": "critical"}`).
        createdBy:
          type: string
          title: created_by
          description: User ID who created this application (UUID, server-populated from token).
        updatedBy:
          type: string
          title: updated_by
          description: User ID who last updated this application (UUID, server-populated from token).
        createdAt:
          title: created_at
          description: When the application was created.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        updatedAt:
          title: updated_at
          description: When the application was last updated.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: Application
      additionalProperties: false
      description: |-
        Application represents a deployable unit within a tenant. An application
         groups manifests, dependencies, and environment configuration into a single
         entity that Admiral orchestrates across environments.
    admiral.api.application.v1.Application.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.application.v1.CreateApplicationRequest:
      type: object
      properties:
        name:
          type: string
          title: name
          maxLength: 63
          minLength: 1
          pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
          description: |-
            URL-safe, human-readable identifier (e.g., "billing-api"). Must be unique
             within the tenant. Lowercase alphanumeric and hyphens only.
        description:
          type:
            - string
            - "null"
          title: description
          maxLength: 1024
          description: Optional longer-form description of the application's purpose.
        labels:
          type: object
          title: labels
          maxProperties: 64
          additionalProperties:
            type: string
            title: value
            maxLength: 256
          description: Arbitrary key-value labels for organizing and filtering applications.
      title: CreateApplicationRequest
      additionalProperties: false
      description: CreateApplicationRequest contains the parameters for creating a new application.
    admiral.api.application.v1.CreateApplicationRequest.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.application.v1.CreateApplicationResponse:
      type: object
      properties:
        application:
          title: application
          description: The created application.
          $ref: '#/components/schemas/admiral.api.application.v1.Application'
      title: CreateApplicationResponse
      additionalProperties: false
      description: CreateApplicationResponse contains the newly created application.
    admiral.api.application.v1.DeleteApplicationRequest:
      type: object
      properties:
        applicationId:
          type: string
          title: application_id
          format: uuid
          description: The unique identifier of the application to delete (UUID).
      title: DeleteApplicationRequest
      additionalProperties: false
      description: DeleteApplicationRequest identifies an application to delete.
    admiral.api.application.v1.DeleteApplicationResponse:
      type: object
      title: DeleteApplicationResponse
      additionalProperties: false
      description: DeleteApplicationResponse is empty on success.
    admiral.api.application.v1.GetApplicationRequest:
      type: object
      properties:
        applicationId:
          type: string
          title: application_id
          format: uuid
          description: The unique identifier of the application (UUID).
      title: GetApplicationRequest
      additionalProperties: false
      description: GetApplicationRequest identifies an application to retrieve.
    admiral.api.application.v1.GetApplicationResponse:
      type: object
      properties:
        application:
          title: application
          description: The application record.
          $ref: '#/components/schemas/admiral.api.application.v1.Application'
      title: GetApplicationResponse
      additionalProperties: false
      description: GetApplicationResponse contains the application record.
    admiral.api.application.v1.ListApplicationsRequest:
      type: object
      properties:
        filter:
          type: string
          title: filter
          maxLength: 1024
          description: Filter expression using the PEG filter DSL.
        pageSize:
          type: integer
          title: page_size
          maximum: 100
          minimum: 0
          format: int32
          description: Maximum number of applications to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListApplicationsRequest
      additionalProperties: false
      description: ListApplicationsRequest contains pagination and filter parameters.
    admiral.api.application.v1.ListApplicationsResponse:
      type: object
      properties:
        applications:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.application.v1.Application'
          title: applications
          description: The list of applications.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListApplicationsResponse
      additionalProperties: false
      description: ListApplicationsResponse contains a page of applications.
    admiral.api.application.v1.UpdateApplicationRequest:
      type: object
      properties:
        application:
          title: application
          description: |-
            The application with updated fields. The `id` field is required.
             Only fields specified in `update_mask` are updated.
          $ref: '#/components/schemas/admiral.api.application.v1.Application'
        updateMask:
          title: update_mask
          description: |-
            The set of fields to update. If unset, all mutable fields are updated.
             Supported fields: `name`, `description`, `labels`.
          $ref: '#/components/schemas/google.protobuf.FieldMask'
      title: UpdateApplicationRequest
      required:
        - application
      additionalProperties: false
      description: UpdateApplicationRequest contains the application fields to update.
    admiral.api.application.v1.UpdateApplicationResponse:
      type: object
      properties:
        application:
          title: application
          description: The updated application.
          $ref: '#/components/schemas/admiral.api.application.v1.Application'
      title: UpdateApplicationResponse
      additionalProperties: false
      description: UpdateApplicationResponse contains the updated application.
    admiral.api.cluster.v1.Cluster:
      type: object
      properties:
        id:
          type: string
          title: id
          format: uuid
          description: Unique identifier for the cluster (UUID).
        tenantId:
          type: string
          title: tenant_id
          format: uuid
          description: Tenant this cluster belongs to (UUID).
        name:
          type: string
          title: name
          maxLength: 63
          minLength: 1
          pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
          description: |-
            URL-safe, human-readable identifier (e.g., "prod-us-east-1"). Unique
             within the tenant. Lowercase alphanumeric and hyphens only, must start
             with a letter and end with an alphanumeric character (1-63 chars).
        description:
          type: string
          title: description
          maxLength: 1024
          description: |-
            Optional longer-form description of the cluster's purpose
             (e.g., "Primary production cluster serving US East traffic").
        labels:
          type: object
          title: labels
          maxProperties: 64
          additionalProperties:
            type: string
            title: value
            maxLength: 256
          description: |-
            Arbitrary key-value labels for organizing and filtering clusters
             (e.g., `{"region": "us-east-1", "cloud": "aws"}`).
        clusterUid:
          type: string
          title: cluster_uid
          description: |-
            The Kubernetes kube-system namespace UID, bound at agent registration
             using a first-write-wins strategy. Used to detect when a token is
             accidentally deployed to a different physical cluster.
        healthStatus:
          title: health_status
          description: Derived health status based on agent connectivity and workload state.
          $ref: '#/components/schemas/admiral.api.cluster.v1.ClusterHealthStatus'
        createdBy:
          type: string
          title: created_by
          description: User ID who created this cluster (UUID, server-populated from token).
        updatedBy:
          type: string
          title: updated_by
          description: User ID who last updated this cluster (UUID, server-populated from token).
        createdAt:
          title: created_at
          description: When the cluster record was created.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        updatedAt:
          title: updated_at
          description: When the cluster record was last updated.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: Cluster
      additionalProperties: false
      description: Cluster represents a registered Kubernetes cluster within a tenant.
    admiral.api.cluster.v1.Cluster.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.cluster.v1.ClusterHealthStatus:
      type: string
      title: ClusterHealthStatus
      enum:
        - CLUSTER_HEALTH_STATUS_UNSPECIFIED
        - CLUSTER_HEALTH_STATUS_PENDING
        - CLUSTER_HEALTH_STATUS_HEALTHY
        - CLUSTER_HEALTH_STATUS_DEGRADED
        - CLUSTER_HEALTH_STATUS_ERROR
        - CLUSTER_HEALTH_STATUS_UNREACHABLE
      description: |-
        ClusterHealthStatus represents the derived health state of a cluster.
         The status is computed from agent connectivity, node readiness, and workload health.
    admiral.api.cluster.v1.ClusterStatus:
      type: object
      properties:
        k8sVersion:
          type: string
          title: k8s_version
          description: Kubernetes version reported by the agent (e.g., "1.29.2").
        nodeCount:
          type: integer
          title: node_count
          format: int32
          description: Total number of nodes in the cluster.
        nodesReady:
          type: integer
          title: nodes_ready
          format: int32
          description: Number of nodes in Ready condition.
        podCapacity:
          type: integer
          title: pod_capacity
          format: int32
          description: Maximum number of pods the cluster can schedule.
        podCount:
          type: integer
          title: pod_count
          format: int32
          description: Total number of pods across all namespaces.
        podsRunning:
          type: integer
          title: pods_running
          format: int32
          description: Number of pods in Running phase.
        podsPending:
          type: integer
          title: pods_pending
          format: int32
          description: Number of pods in Pending phase.
        podsFailed:
          type: integer
          title: pods_failed
          format: int32
          description: Number of pods in Failed phase.
        cpuCapacityMillicores:
          type:
            - integer
            - string
          title: cpu_capacity_millicores
          format: int64
          description: Total CPU capacity across all nodes, in millicores.
        cpuUsedMillicores:
          type:
            - integer
            - string
          title: cpu_used_millicores
          format: int64
          description: Current CPU usage across all nodes, in millicores.
        memoryCapacityBytes:
          type:
            - integer
            - string
          title: memory_capacity_bytes
          format: int64
          description: Total memory capacity across all nodes, in bytes.
        memoryUsedBytes:
          type:
            - integer
            - string
          title: memory_used_bytes
          format: int64
          description: Current memory usage across all nodes, in bytes.
        workloadsTotal:
          type: integer
          title: workloads_total
          format: int32
          description: Total number of tracked workloads.
        workloadsHealthy:
          type: integer
          title: workloads_healthy
          format: int32
          description: Number of workloads in healthy state.
        workloadsDegraded:
          type: integer
          title: workloads_degraded
          format: int32
          description: Number of workloads in degraded state.
        workloadsError:
          type: integer
          title: workloads_error
          format: int32
          description: Number of workloads in error state.
      title: ClusterStatus
      additionalProperties: false
      description: |-
        ClusterStatus contains the raw telemetry metrics for a cluster, as reported
         by the K8s agent. This message is used in both the push payload
         (ReportClusterStatusRequest) and the read response (GetClusterStatusResponse).

         Server-derived fields (health_status, agent connectivity) are NOT included
         here — they live on the Cluster and Agent records respectively, and are
         returned alongside this message in GetClusterStatusResponse.
    admiral.api.cluster.v1.ContainerStatus:
      type: object
      properties:
        name:
          type: string
          title: name
          description: Container name within the pod spec.
        image:
          type: string
          title: image
          description: Container image reference (e.g., "registry.example.com/api:v2.1.4").
        restartCount:
          type: integer
          title: restart_count
          format: int32
          description: Cumulative number of container restarts.
        state:
          type: string
          title: state
          description: Current container state (e.g., "running", "waiting", "terminated").
        ready:
          type: boolean
          title: ready
          description: Whether the container's readiness probe is passing.
      title: ContainerStatus
      additionalProperties: false
      description: ContainerStatus describes the current state of a single container.
    admiral.api.cluster.v1.CreateClusterRequest:
      type: object
      properties:
        name:
          type: string
          title: name
          maxLength: 63
          minLength: 1
          pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
          description: |-
            URL-safe, human-readable identifier (e.g., "prod-us-east-1"). Must be
             unique within the tenant. Lowercase alphanumeric and hyphens only.
        description:
          type: string
          title: description
          maxLength: 1024
          description: Optional longer-form description of the cluster's purpose.
        labels:
          type: object
          title: labels
          maxProperties: 64
          additionalProperties:
            type: string
            title: value
            maxLength: 256
          description: |-
            Arbitrary key-value labels for organizing and filtering clusters
             (e.g., `{"region": "us-east-1", "cloud": "aws"}`).
      title: CreateClusterRequest
      additionalProperties: false
      description: CreateClusterRequest contains the parameters for creating a new cluster.
    admiral.api.cluster.v1.CreateClusterRequest.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.cluster.v1.CreateClusterResponse:
      type: object
      properties:
        cluster:
          title: cluster
          description: |-
            The created cluster. Health status will be PENDING until an agent connects
             and calls AgentAPI.RegisterAgent.
          $ref: '#/components/schemas/admiral.api.cluster.v1.Cluster'
        plainTextToken:
          type: string
          title: plain_text_token
          description: |-
            The raw Agent Token secret (e.g., "adm_agt_pL2mN5oQ8rS1..."). This value
             is shown exactly once and cannot be retrieved again. Deploy this token to
             the K8s agent for authentication.

             To create additional tokens (e.g., for rotation), use
             CreateClusterToken (POST /v1/clusters/{cluster_id}/tokens).
      title: CreateClusterResponse
      additionalProperties: false
      description: |-
        CreateClusterResponse contains the newly created cluster and its initial
         Agent Token (AGT).
    admiral.api.cluster.v1.CreateClusterTokenRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: The cluster to bind this token to (UUID).
        name:
          type: string
          title: name
          maxLength: 63
          minLength: 1
          pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
          description: |-
            URL-safe, human-readable identifier for the token (e.g., "prod-agent-key").
             Must be unique within the cluster's tokens. Lowercase alphanumeric and
             hyphens only.
        expiresAt:
          title: expires_at
          description: Optional expiration time. If unset, the token does not expire.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: CreateClusterTokenRequest
      additionalProperties: false
      description: |-
        CreateClusterTokenRequest contains the parameters for creating a new AGT
         bound to a cluster.
    admiral.api.cluster.v1.CreateClusterTokenResponse:
      type: object
      properties:
        accessToken:
          title: access_token
          description: The created token metadata. Scopes are auto-assigned for cluster AGTs.
          $ref: '#/components/schemas/admiral.common.v1.AccessToken'
        plainTextToken:
          type: string
          title: plain_text_token
          description: |-
            The raw token secret (e.g., "adm_agt_pL2mN5oQ8rS1..."). This value is
             shown exactly once and cannot be retrieved again. Store it securely.
      title: CreateClusterTokenResponse
      additionalProperties: false
      description: CreateClusterTokenResponse contains the newly created AGT.
    admiral.api.cluster.v1.DeleteClusterRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: |-
            The unique identifier of the cluster to delete (UUID).
             All associated agent tokens will be revoked.
      title: DeleteClusterRequest
      additionalProperties: false
      description: DeleteClusterRequest identifies a cluster to delete.
    admiral.api.cluster.v1.DeleteClusterResponse:
      type: object
      title: DeleteClusterResponse
      additionalProperties: false
      description: DeleteClusterResponse is empty on success.
    admiral.api.cluster.v1.GetClusterRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: The unique identifier of the cluster (UUID).
      title: GetClusterRequest
      additionalProperties: false
      description: GetClusterRequest identifies a cluster to retrieve.
    admiral.api.cluster.v1.GetClusterResponse:
      type: object
      properties:
        cluster:
          title: cluster
          description: The cluster record, including server-derived health_status.
          $ref: '#/components/schemas/admiral.api.cluster.v1.Cluster'
      title: GetClusterResponse
      additionalProperties: false
      description: GetClusterResponse contains the cluster record.
    admiral.api.cluster.v1.GetClusterStatusRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: The unique identifier of the cluster (UUID).
      title: GetClusterStatusRequest
      additionalProperties: false
      description: GetClusterStatusRequest identifies a cluster whose telemetry status to retrieve.
    admiral.api.cluster.v1.GetClusterStatusResponse:
      type: object
      properties:
        healthStatus:
          title: health_status
          description: |-
            Server-derived health status based on agent connectivity, node readiness,
             and workload health.
          $ref: '#/components/schemas/admiral.api.cluster.v1.ClusterHealthStatus'
        status:
          title: status
          description: |-
            Latest telemetry snapshot from the agent. Absent if no telemetry has
             been reported yet.
          $ref: '#/components/schemas/admiral.api.cluster.v1.ClusterStatus'
        reportedAt:
          title: reported_at
          description: When the latest telemetry was reported by the agent.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: GetClusterStatusResponse
      additionalProperties: false
      description: |-
        GetClusterStatusResponse contains the server-derived health status and the
         latest telemetry snapshot. If no agent has reported telemetry yet, the
         health_status will be PENDING and status will be absent.
    admiral.api.cluster.v1.GetClusterTokenRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: The cluster the token belongs to (UUID).
        tokenId:
          type: string
          title: token_id
          format: uuid
          description: The unique identifier of the token (UUID).
      title: GetClusterTokenRequest
      additionalProperties: false
      description: GetClusterTokenRequest identifies a cluster AGT to retrieve.
    admiral.api.cluster.v1.GetClusterTokenResponse:
      type: object
      properties:
        accessToken:
          title: access_token
          description: The token metadata. The token secret is never included.
          $ref: '#/components/schemas/admiral.common.v1.AccessToken'
      title: GetClusterTokenResponse
      additionalProperties: false
      description: GetClusterTokenResponse contains the requested cluster AGT metadata.
    admiral.api.cluster.v1.GetRevisionBundleRequest:
      type: object
      properties:
        revisionId:
          type: string
          title: revision_id
          format: uuid
          description: The revision to fetch the bundle for (UUID).
      title: GetRevisionBundleRequest
      additionalProperties: false
      description: GetRevisionBundleRequest identifies a revision whose artifact bundle to fetch.
    admiral.api.cluster.v1.GetRevisionBundleResponse:
      type: object
      properties:
        bundle:
          title: bundle
          description: The artifact bundle with everything needed to apply the workload.
          $ref: '#/components/schemas/admiral.api.cluster.v1.RevisionBundle'
      title: GetRevisionBundleResponse
      additionalProperties: false
      description: GetRevisionBundleResponse contains the rendered manifests for the revision.
    admiral.api.cluster.v1.ListClusterTokensRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: The cluster to list tokens for (UUID).
        filter:
          type: string
          title: filter
          maxLength: 1024
          description: Filter expression using the PEG filter DSL.
        pageSize:
          type: integer
          title: page_size
          maximum: 100
          minimum: 0
          format: int32
          description: Maximum number of tokens to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListClusterTokensRequest
      additionalProperties: false
      description: ListClusterTokensRequest contains pagination and filter parameters.
    admiral.api.cluster.v1.ListClusterTokensResponse:
      type: object
      properties:
        accessTokens:
          type: array
          items:
            $ref: '#/components/schemas/admiral.common.v1.AccessToken'
          title: access_tokens
          description: The list of tokens. Token secrets are never included.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListClusterTokensResponse
      additionalProperties: false
      description: ListClusterTokensResponse contains a page of cluster AGT metadata.
    admiral.api.cluster.v1.ListClustersRequest:
      type: object
      properties:
        filter:
          type: string
          title: filter
          maxLength: 1024
          description: Filter expression using the PEG filter DSL
        pageSize:
          type: integer
          title: page_size
          maximum: 100
          minimum: 0
          format: int32
          description: Maximum number of clusters to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListClustersRequest
      additionalProperties: false
      description: ListClustersRequest contains pagination and filter parameters.
    admiral.api.cluster.v1.ListClustersResponse:
      type: object
      properties:
        clusters:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.cluster.v1.Cluster'
          title: clusters
          description: The list of clusters.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListClustersResponse
      additionalProperties: false
      description: ListClustersResponse contains a page of clusters.
    admiral.api.cluster.v1.ListWorkloadsRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: The cluster whose workloads to list (UUID).
        filter:
          type: string
          title: filter
          maxLength: 1024
          description: Filter expression using the PEG filter DSL
        pageSize:
          type: integer
          title: page_size
          maximum: 100
          minimum: 0
          format: int32
          description: Maximum number of workloads to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListWorkloadsRequest
      additionalProperties: false
      description: |-
        ListWorkloadsRequest contains pagination and filter parameters for listing
         workloads in a specific cluster.
    admiral.api.cluster.v1.ListWorkloadsResponse:
      type: object
      properties:
        workloads:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.cluster.v1.Workload'
          title: workloads
          description: The list of workloads.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListWorkloadsResponse
      additionalProperties: false
      description: ListWorkloadsResponse contains a page of workloads.
    admiral.api.cluster.v1.ObjectReference:
      type: object
      properties:
        kind:
          type: string
          title: kind
          description: Kubernetes resource kind (e.g., "Pod", "ReplicaSet").
        namespace:
          type: string
          title: namespace
          description: Kubernetes namespace.
        name:
          type: string
          title: name
          description: Object name.
      title: ObjectReference
      additionalProperties: false
      description: ObjectReference is a lightweight reference to a Kubernetes object.
    admiral.api.cluster.v1.ReportClusterStatusRequest:
      type: object
      properties:
        status:
          title: status
          description: Cluster-level telemetry snapshot.
          $ref: '#/components/schemas/admiral.api.cluster.v1.ClusterStatus'
        workloads:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.cluster.v1.WorkloadStatus'
          title: workloads
          description: Per-workload status snapshots.
        events:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.cluster.v1.WorkloadEvent'
          title: events
          description: Kubernetes events observed since the last push.
        reportedAt:
          title: reported_at
          description: When the agent generated this report.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: ReportClusterStatusRequest
      required:
        - status
      additionalProperties: false
      description: |-
        ReportClusterStatusRequest contains a combined telemetry payload from a K8s agent.
         Admiral splits this into three storage tiers: current snapshot, time-series
         metrics, and events.

         The cluster is identified by the agent token's binding — no cluster_id is
         required. The server resolves the cluster from the AGT.
    admiral.api.cluster.v1.ReportClusterStatusResponse:
      type: object
      properties:
        ack:
          type: boolean
          title: ack
          description: Whether the report was accepted.
        nextPushSeconds:
          type: integer
          title: next_push_seconds
          format: int32
          description: |-
            Server-controlled interval (in seconds) before the agent should send
             its next status push. Allows the server to adjust push frequency dynamically.
      title: ReportClusterStatusResponse
      additionalProperties: false
      description: ReportClusterStatusResponse acknowledges a telemetry push.
    admiral.api.cluster.v1.ReportRevisionResultRequest:
      type: object
      properties:
        revisionId:
          type: string
          title: revision_id
          format: uuid
          description: The revision being reported on (UUID).
        result:
          title: result
          description: The result of applying the revision.
          $ref: '#/components/schemas/admiral.api.cluster.v1.RevisionResult'
      title: ReportRevisionResultRequest
      required:
        - result
      additionalProperties: false
      description: |-
        ReportRevisionResultRequest contains the outcome of applying a workload
         revision to the cluster.
    admiral.api.cluster.v1.ReportRevisionResultResponse:
      type: object
      properties:
        ack:
          type: boolean
          title: ack
          description: Whether the result was accepted.
      title: ReportRevisionResultResponse
      additionalProperties: false
      description: ReportRevisionResultResponse acknowledges the result.
    admiral.api.cluster.v1.ReportWorkloadStatusRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: The cluster these workloads belong to (UUID).
        workloads:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.cluster.v1.WorkloadStatus'
          title: workloads
          description: Per-workload status snapshots.
        reportedAt:
          title: reported_at
          description: When the agent generated this report.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: ReportWorkloadStatusRequest
      additionalProperties: false
      description: ReportWorkloadStatusRequest contains incremental workload telemetry from a K8s agent.
    admiral.api.cluster.v1.ReportWorkloadStatusResponse:
      type: object
      properties:
        ack:
          type: boolean
          title: ack
          description: Whether the report was accepted.
      title: ReportWorkloadStatusResponse
      additionalProperties: false
      description: ReportWorkloadStatusResponse acknowledges a workload telemetry push.
    admiral.api.cluster.v1.RevisionBundle:
      type: object
      properties:
        artifactUrl:
          type: string
          title: artifact_url
          description: |-
            Signed URL to download the rendered manifest bundle (tar.gz containing
             ordered Kubernetes YAML manifests). Time-limited.
        artifactChecksum:
          type: string
          title: artifact_checksum
          description: SHA-256 checksum of the artifact bundle for integrity verification.
        namespace:
          type: string
          title: namespace
          description: |-
            The Kubernetes namespace to apply manifests into. Resolved from the
             environment's KubernetesConfig.namespace (or defaults to the environment
             name).
        componentName:
          type: string
          title: component_name
          description: Component name for logging and status tracking.
        version:
          type: string
          title: version
          description: The source version being deployed (e.g., chart version, git ref).
      title: RevisionBundle
      additionalProperties: false
      description: |-
        RevisionBundle contains pre-rendered Kubernetes manifests for a workload
         revision, ready for server-side apply by the K8s agent.
    admiral.api.cluster.v1.RevisionResult:
      type: object
      properties:
        success:
          type: boolean
          title: success
          description: Whether the revision was applied successfully.
        errorMessage:
          type: string
          title: error_message
          description: Error message if the revision failed. Empty on success.
        resourcesApplied:
          type: integer
          title: resources_applied
          format: int32
          description: Number of Kubernetes resources applied.
        resourcesFailed:
          type: integer
          title: resources_failed
          format: int32
          description: Number of Kubernetes resources that failed to apply.
      title: RevisionResult
      additionalProperties: false
      description: |-
        RevisionResult contains the outcome of applying a workload revision,
         reported by the K8s agent.
    admiral.api.cluster.v1.RevokeClusterTokenRequest:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: The cluster the token belongs to (UUID).
        tokenId:
          type: string
          title: token_id
          format: uuid
          description: The unique identifier of the token to revoke (UUID).
      title: RevokeClusterTokenRequest
      additionalProperties: false
      description: RevokeClusterTokenRequest identifies a cluster AGT to revoke.
    admiral.api.cluster.v1.RevokeClusterTokenResponse:
      type: object
      properties:
        accessToken:
          title: access_token
          description: The token metadata with updated status.
          $ref: '#/components/schemas/admiral.common.v1.AccessToken'
      title: RevokeClusterTokenResponse
      additionalProperties: false
      description: RevokeClusterTokenResponse contains the revoked cluster AGT metadata.
    admiral.api.cluster.v1.UpdateClusterRequest:
      type: object
      properties:
        cluster:
          title: cluster
          description: |-
            The cluster with updated fields. The `id` field is required.
             Only fields specified in `update_mask` are updated.
          $ref: '#/components/schemas/admiral.api.cluster.v1.Cluster'
        updateMask:
          title: update_mask
          description: |-
            The set of fields to update. If unset, all mutable fields are updated.
             Supported fields: `name`, `description`, `labels`.
          $ref: '#/components/schemas/google.protobuf.FieldMask'
      title: UpdateClusterRequest
      required:
        - cluster
      additionalProperties: false
      description: UpdateClusterRequest contains the cluster fields to update.
    admiral.api.cluster.v1.UpdateClusterResponse:
      type: object
      properties:
        cluster:
          title: cluster
          description: The updated cluster.
          $ref: '#/components/schemas/admiral.api.cluster.v1.Cluster'
      title: UpdateClusterResponse
      additionalProperties: false
      description: UpdateClusterResponse contains the updated cluster.
    admiral.api.cluster.v1.Workload:
      type: object
      properties:
        id:
          type: string
          title: id
          description: Unique identifier for the workload within Admiral (UUID).
        clusterId:
          type: string
          title: cluster_id
          description: The cluster this workload belongs to (UUID).
        namespace:
          type: string
          title: namespace
          description: Kubernetes namespace.
        name:
          type: string
          title: name
          description: Workload name.
        kind:
          type: string
          title: kind
          description: Kubernetes resource kind (e.g., "Deployment", "StatefulSet", "DaemonSet").
        labels:
          type: object
          title: labels
          additionalProperties:
            type: string
            title: value
          description: Kubernetes labels on the workload.
        healthStatus:
          title: health_status
          description: Derived health status.
          $ref: '#/components/schemas/admiral.api.cluster.v1.WorkloadHealthStatus'
        statusReason:
          type: string
          title: status_reason
          description: Human-readable reason for the current status (e.g., "MinimumReplicasUnavailable").
        replicasDesired:
          type: integer
          title: replicas_desired
          format: int32
          description: Number of desired replicas.
        replicasReady:
          type: integer
          title: replicas_ready
          format: int32
          description: Number of ready replicas.
        replicasAvailable:
          type: integer
          title: replicas_available
          format: int32
          description: Number of available replicas.
        cpuRequestsMillicores:
          type:
            - integer
            - string
          title: cpu_requests_millicores
          format: int64
          description: CPU requests across all containers, in millicores.
        cpuLimitsMillicores:
          type:
            - integer
            - string
          title: cpu_limits_millicores
          format: int64
          description: CPU limits across all containers, in millicores.
        cpuUsedMillicores:
          type:
            - integer
            - string
          title: cpu_used_millicores
          format: int64
          description: Current CPU usage across all containers, in millicores.
        memoryRequestsBytes:
          type:
            - integer
            - string
          title: memory_requests_bytes
          format: int64
          description: Memory requests across all containers, in bytes.
        memoryLimitsBytes:
          type:
            - integer
            - string
          title: memory_limits_bytes
          format: int64
          description: Memory limits across all containers, in bytes.
        memoryUsedBytes:
          type:
            - integer
            - string
          title: memory_used_bytes
          format: int64
          description: Current memory usage across all containers, in bytes.
        containers:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.cluster.v1.ContainerStatus'
          title: containers
          description: Status of individual containers in this workload.
        lastUpdatedAt:
          title: last_updated_at
          description: When this workload's status was last updated.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: Workload
      additionalProperties: false
      description: |-
        Workload represents a Kubernetes workload (Deployment, StatefulSet,
         DaemonSet, etc.) as observed by the agent.
    admiral.api.cluster.v1.Workload.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.cluster.v1.WorkloadEvent:
      type: object
      properties:
        uid:
          type: string
          title: uid
          description: Kubernetes event UID, used for deduplication.
        type:
          type: string
          title: type
          description: 'Event type: "Normal" or "Warning".'
        reason:
          type: string
          title: reason
          description: Short machine-readable reason (e.g., "BackOff", "FailedScheduling").
        regarding:
          title: regarding
          description: The Kubernetes object this event is about.
          $ref: '#/components/schemas/admiral.api.cluster.v1.ObjectReference'
        message:
          type: string
          title: message
          description: Human-readable event message.
        firstSeen:
          title: first_seen
          description: When this event was first observed.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        lastSeen:
          title: last_seen
          description: When this event was most recently observed.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        count:
          type: integer
          title: count
          format: int32
          description: Number of times this event has occurred.
      title: WorkloadEvent
      additionalProperties: false
      description: |-
        WorkloadEvent represents a Kubernetes event related to a workload or its
         child objects (pods, replicasets). Events are deduplicated by their K8s UID.
    admiral.api.cluster.v1.WorkloadHealthStatus:
      type: string
      title: WorkloadHealthStatus
      enum:
        - WORKLOAD_HEALTH_STATUS_UNSPECIFIED
        - WORKLOAD_HEALTH_STATUS_HEALTHY
        - WORKLOAD_HEALTH_STATUS_DEGRADED
        - WORKLOAD_HEALTH_STATUS_ERROR
      description: WorkloadHealthStatus represents the derived health state of a single workload.
    admiral.api.cluster.v1.WorkloadStatus:
      type: object
      properties:
        namespace:
          type: string
          title: namespace
          description: Kubernetes namespace.
        name:
          type: string
          title: name
          description: Workload name.
        kind:
          type: string
          title: kind
          description: Kubernetes resource kind (e.g., "Deployment", "StatefulSet").
        labels:
          type: object
          title: labels
          additionalProperties:
            type: string
            title: value
          description: Kubernetes labels on the workload.
        replicasDesired:
          type: integer
          title: replicas_desired
          format: int32
          description: Number of desired replicas.
        replicasReady:
          type: integer
          title: replicas_ready
          format: int32
          description: Number of ready replicas.
        replicasAvailable:
          type: integer
          title: replicas_available
          format: int32
          description: Number of available replicas.
        cpuRequestsMillicores:
          type:
            - integer
            - string
          title: cpu_requests_millicores
          format: int64
          description: CPU requests across all containers, in millicores.
        cpuLimitsMillicores:
          type:
            - integer
            - string
          title: cpu_limits_millicores
          format: int64
          description: CPU limits across all containers, in millicores.
        cpuUsedMillicores:
          type:
            - integer
            - string
          title: cpu_used_millicores
          format: int64
          description: Current CPU usage across all containers, in millicores.
        memoryRequestsBytes:
          type:
            - integer
            - string
          title: memory_requests_bytes
          format: int64
          description: Memory requests across all containers, in bytes.
        memoryLimitsBytes:
          type:
            - integer
            - string
          title: memory_limits_bytes
          format: int64
          description: Memory limits across all containers, in bytes.
        memoryUsedBytes:
          type:
            - integer
            - string
          title: memory_used_bytes
          format: int64
          description: Current memory usage across all containers, in bytes.
        healthStatus:
          title: health_status
          description: Derived health status.
          $ref: '#/components/schemas/admiral.api.cluster.v1.WorkloadHealthStatus'
        containers:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.cluster.v1.ContainerStatus'
          title: containers
          description: Status of individual containers.
      title: WorkloadStatus
      additionalProperties: false
      description: |-
        WorkloadStatus is the agent-reported status for a single workload within
         a telemetry push payload.
    admiral.api.cluster.v1.WorkloadStatus.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.component.v1.Component:
      type: object
      properties:
        id:
          type: string
          title: id
          format: uuid
          description: Unique identifier for the component (UUID).
        applicationId:
          type: string
          title: application_id
          format: uuid
          description: The application this component belongs to (UUID).
        name:
          type: string
          title: name
          maxLength: 63
          minLength: 1
          pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
          description: |-
            Human-readable name for this component within the application
             (e.g., "vpc", "redis", "api-server"). Unique within the application.
             Lowercase alphanumeric and hyphens only (1-63 chars). This name is used
             in template expressions: `{{ .component.<name>.<output> }}`.
        description:
          type: string
          title: description
          maxLength: 1024
          description: |-
            Optional description of the component's purpose
             (e.g., "Primary VPC for all environments" or "Redis cache layer").
        category:
          title: category
          description: |-
            Whether this is an infrastructure or workload component. Derived from
             the source type when the component is created, but stored explicitly
             for filtering and to determine execution behavior.
          $ref: '#/components/schemas/admiral.api.component.v1.ComponentCategory'
        sourceId:
          type: string
          title: source_id
          format: uuid
          description: |-
            The source artifact this component deploys (UUID). References a Source
             defined via the SourceAPI.
        version:
          type: string
          title: version
          minLength: 1
          description: |-
            Pinned version of the source artifact. For registry sources, a semver
             string (e.g., "1.2.3"). For Git sources, a tag, branch, or commit SHA.
             Required — components always pin a version. Use UpdateComponent to
             change the version (rolling update).
        valuesTemplate:
          type: string
          title: values_template
          maxLength: 65536
          description: |-
            Values template that maps configuration into the source's expected inputs.
             This is a JSON-encoded object where keys are the source input names and
             values are either literal values or template expressions.

             Template expressions can reference:
               - Variables: `{{ .var.DATABASE_URL }}`
               - Component outputs: `{{ .component.vpc.vpc_id }}`
               - Environment metadata: `{{ .env.name }}`

             Example for a Terraform RDS module:
               {
                 "vpc_id": "{{ .component.vpc.vpc_id }}",
                 "subnet_ids": "{{ .component.vpc.private_subnet_ids }}",
                 "instance_class": "{{ .var.RDS_INSTANCE_CLASS }}",
                 "engine_version": "15.4"
               }

             Example for a Helm chart:
               {
                 "replicaCount": "{{ .var.REPLICA_COUNT }}",
                 "image.repository": "myorg/api-server",
                 "image.tag": "{{ .var.IMAGE_TAG }}"
               }

             The rendering engine resolves all expressions at deployment time using
             the environment's variables and the outputs of upstream components.
        dependsOn:
          type: array
          items:
            type: string
            format: uuid
          title: depends_on
          description: |-
            Component IDs that must complete successfully before this component can
             be deployed (UUIDs). Must reference components within the same
             application. The deployment engine uses these, combined with implicit
             dependencies from template expressions, to build the execution DAG.

             Explicit depends_on is useful when there is a deployment-order dependency
             that is not captured by output references (e.g., cert-manager must be
             installed before any workload that uses TLS certificates).
        outputs:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.component.v1.ComponentOutput'
          title: outputs
          description: |-
            Declared outputs for this component. For infrastructure components
             (Terraform), outputs are auto-discovered from the module and this field
             is ignored. For workload components, outputs must be declared here to
             be available for template expressions in other components.

             See ComponentOutput for examples.
        disabled:
          type: boolean
          title: disabled
          description: |-
            Whether this component is disabled in the resolved environment context.
             Always false on the application-level component. Set to true when
             ListComponents is called with an environment_id and the component has
             a disabled override for that environment.
        hasOverride:
          type: boolean
          title: has_override
          description: |-
            Whether any field on this component has been overridden in the resolved
             environment context. Always false when ListComponents is called without
             an environment_id.
        createdBy:
          type: string
          title: created_by
          description: User ID who created this component (UUID, server-populated from token).
        updatedBy:
          type: string
          title: updated_by
          description: User ID who last updated this component (UUID, server-populated from token).
        createdAt:
          title: created_at
          description: When the component was created.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        updatedAt:
          title: updated_at
          description: When the component was last updated.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: Component
      additionalProperties: false
      description: |-
        Component represents a named, deployable unit within an application. It
         binds a source artifact to an application with configuration (values
         template) that maps variables and other component outputs into the source's
         expected inputs.

         Components are the nodes in Admiral's dependency graph. Infrastructure
         components produce auto-discovered outputs (Terraform outputs). Workload
         components declare outputs explicitly. Other components consume these via
         template expressions. The deployment engine resolves this DAG to determine
         execution order.
    admiral.api.component.v1.ComponentCategory:
      type: string
      title: ComponentCategory
      enum:
        - COMPONENT_CATEGORY_UNSPECIFIED
        - COMPONENT_CATEGORY_INFRASTRUCTURE
        - COMPONENT_CATEGORY_WORKLOAD
      description: |-
        ComponentCategory indicates whether the component provisions infrastructure
         or deploys workloads. This is derived from the source type but stored
         explicitly for filtering and to determine rendering and execution behavior.
    admiral.api.component.v1.ComponentOutput:
      type: object
      properties:
        name:
          type: string
          title: name
          maxLength: 63
          minLength: 1
          pattern: ^[a-z][a-z0-9_]{0,62}$
          description: |-
            Output name used in template references. Must be a valid identifier
             (lowercase alphanumeric and underscores, e.g., "service_host",
             "connection_string"). Other components reference this as
             `{{ .component.<component_name>.<output_name> }}`.
        valueTemplate:
          type: string
          title: value_template
          maxLength: 4096
          minLength: 1
          description: |-
            Template expression that resolves to the output value after deployment.
             Can reference environment metadata and the component's own release info.

             Examples:
               "{{ .release.name }}-redis-master.{{ .env.namespace }}.svc.cluster.local"
               "{{ .release.name }}-redis:6379"
               "http://{{ .release.name }}-grafana.{{ .env.namespace }}:3000"
        description:
          type: string
          title: description
          maxLength: 1024
          description: Optional description of the output's purpose.
      title: ComponentOutput
      additionalProperties: false
      description: |-
        ComponentOutput declares a named output value produced by a component.

         For infrastructure components (Terraform), outputs are auto-discovered from
         the module's output blocks and this field is ignored — do not declare
         outputs manually for Terraform components.

         For workload components (Helm, Kustomize, manifests), outputs must be
         declared explicitly here to make them available for template expressions
         in other components (e.g., `{{ .component.cache.service_host }}`).

         Output values are template expressions resolved after the component is
         deployed. They typically reference well-known patterns from the deployed
         resources (e.g., Kubernetes service DNS names, ConfigMap keys).
    admiral.api.component.v1.ComponentOverride:
      type: object
      properties:
        componentId:
          type: string
          title: component_id
          format: uuid
          description: The component this override applies to (UUID).
        environmentId:
          type: string
          title: environment_id
          format: uuid
          description: The environment this override applies to (UUID).
        disabled:
          type: boolean
          title: disabled
          description: |-
            When true, the component is not deployed in this environment.
             All other override fields are ignored when disabled.
        sourceId:
          type:
            - string
            - "null"
          title: source_id
          format: uuid
          description: |-
            Override source for this environment (UUID). When set, this source is
             used instead of the component's default source. This may also change the
             component's effective category (e.g., switching from a Helm source to a
             Terraform source changes the component from workload to infrastructure
             in this environment).
        version:
          type:
            - string
            - "null"
          title: version
          description: |-
            Override version for this environment. When set, this version is used
             instead of the component's default version.
        valuesTemplate:
          type:
            - string
            - "null"
          title: values_template
          description: |-
            Override values template for this environment. When set, this template
             completely replaces the component's default values template — there is
             no merge.
        dependsOn:
          type: array
          items:
            type: string
            format: uuid
          title: depends_on
          description: |-
            Override depends_on for this environment (component UUIDs). When set,
             replaces the component's default depends_on list for this environment.
        outputs:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.component.v1.ComponentOutput'
          title: outputs
          description: |-
            Override outputs for this environment. When set, replaces the component's
             declared outputs. Useful when an override changes the source type
             (e.g., Helm → Terraform) and the output templates need to change.
        createdBy:
          type: string
          title: created_by
          description: User ID who created this override (UUID, server-populated from token).
        updatedBy:
          type: string
          title: updated_by
          description: User ID who last updated this override (UUID, server-populated from token).
        createdAt:
          title: created_at
          description: When the override was created.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        updatedAt:
          title: updated_at
          description: When the override was last updated.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: ComponentOverride
      additionalProperties: false
      description: |-
        ComponentOverride provides environment-level customization for a component.
         When an override exists for a component + environment combination, the
         override fields take precedence over the application-level component
         defaults during deployment.

         This enables patterns like:
           - Different sources per environment (Helm Redis in dev, Terraform
             ElastiCache in prod)
           - Different versions per environment (canary version in staging)
           - Different values per environment (smaller instance in dev)
           - Disabling a component in certain environments
    admiral.api.component.v1.CreateComponentRequest:
      type: object
      properties:
        applicationId:
          type: string
          title: application_id
          format: uuid
          description: The application to add this component to (UUID).
        name:
          type: string
          title: name
          maxLength: 63
          minLength: 1
          pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
          description: |-
            Human-readable name for this component. Must be unique within the
             application. This name is used in template expressions.
        description:
          type: string
          title: description
          maxLength: 1024
          description: Optional description of the component's purpose.
        sourceId:
          type: string
          title: source_id
          format: uuid
          description: The source artifact for this component (UUID).
        version:
          type: string
          title: version
          minLength: 1
          description: Pinned version of the source artifact.
        valuesTemplate:
          type: string
          title: values_template
          maxLength: 65536
          description: |-
            Values template mapping configuration into the source's inputs.
             See Component.values_template for template expression syntax.
        dependsOn:
          type: array
          items:
            type: string
            format: uuid
          title: depends_on
          description: Explicit deployment-order dependencies (component UUIDs).
        outputs:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.component.v1.ComponentOutput'
          title: outputs
          description: |-
            Declared outputs for workload components.
             Ignored for infrastructure components (Terraform outputs are
             auto-discovered).
      title: CreateComponentRequest
      additionalProperties: false
      description: |-
        CreateComponentRequest contains the parameters for adding a component to
         an application.
    admiral.api.component.v1.CreateComponentResponse:
      type: object
      properties:
        component:
          title: component
          description: The created component.
          $ref: '#/components/schemas/admiral.api.component.v1.Component'
      title: CreateComponentResponse
      additionalProperties: false
      description: CreateComponentResponse contains the newly created component.
    admiral.api.component.v1.DeleteComponentOverrideRequest:
      type: object
      properties:
        componentId:
          type: string
          title: component_id
          format: uuid
          description: The component (UUID).
        environmentId:
          type: string
          title: environment_id
          format: uuid
          description: The environment (UUID).
      title: DeleteComponentOverrideRequest
      additionalProperties: false
      description: DeleteComponentOverrideRequest removes an environment-level override.
    admiral.api.component.v1.DeleteComponentOverrideResponse:
      type: object
      title: DeleteComponentOverrideResponse
      additionalProperties: false
      description: DeleteComponentOverrideResponse is empty on success.
    admiral.api.component.v1.DeleteComponentRequest:
      type: object
      properties:
        componentId:
          type: string
          title: component_id
          format: uuid
          description: |-
            The unique identifier of the component to delete (UUID).
             Fails if other components depend on this component (via depends_on
             or output references in values_template).
      title: DeleteComponentRequest
      additionalProperties: false
      description: DeleteComponentRequest identifies a component to delete.
    admiral.api.component.v1.DeleteComponentResponse:
      type: object
      title: DeleteComponentResponse
      additionalProperties: false
      description: DeleteComponentResponse is empty on success.
    admiral.api.component.v1.GetComponentOverrideRequest:
      type: object
      properties:
        componentId:
          type: string
          title: component_id
          format: uuid
          description: The component (UUID).
        environmentId:
          type: string
          title: environment_id
          format: uuid
          description: The environment (UUID).
      title: GetComponentOverrideRequest
      additionalProperties: false
      description: |-
        GetComponentOverrideRequest identifies a specific component + environment
         override.
    admiral.api.component.v1.GetComponentOverrideResponse:
      type: object
      properties:
        override:
          title: override
          description: The override record. Empty/not-found if no override exists.
          $ref: '#/components/schemas/admiral.api.component.v1.ComponentOverride'
      title: GetComponentOverrideResponse
      additionalProperties: false
      description: GetComponentOverrideResponse contains the override record.
    admiral.api.component.v1.GetComponentRequest:
      type: object
      properties:
        componentId:
          type: string
          title: component_id
          format: uuid
          description: The unique identifier of the component (UUID).
      title: GetComponentRequest
      additionalProperties: false
      description: GetComponentRequest identifies a component to retrieve.
    admiral.api.component.v1.GetComponentResponse:
      type: object
      properties:
        component:
          title: component
          description: The component record (application-level defaults).
          $ref: '#/components/schemas/admiral.api.component.v1.Component'
      title: GetComponentResponse
      additionalProperties: false
      description: GetComponentResponse contains the component record.
    admiral.api.component.v1.ListComponentOverridesRequest:
      type: object
      properties:
        componentId:
          type: string
          title: component_id
          format: uuid
          description: The component to list overrides for (UUID).
        pageSize:
          type: integer
          title: page_size
          maximum: 100
          minimum: 0
          format: int32
          description: Maximum number of overrides to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListComponentOverridesRequest
      additionalProperties: false
      description: ListComponentOverridesRequest lists all overrides for a component.
    admiral.api.component.v1.ListComponentOverridesResponse:
      type: object
      properties:
        overrides:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.component.v1.ComponentOverride'
          title: overrides
          description: The list of environment-level overrides for the component.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListComponentOverridesResponse
      additionalProperties: false
      description: ListComponentOverridesResponse contains all overrides for a component.
    admiral.api.component.v1.ListComponentsRequest:
      type: object
      properties:
        filter:
          type: string
          title: filter
          maxLength: 1024
          description: |-
            Filter expression using the PEG filter DSL.

             Common filter fields:
               - `application_id` — scope to an application (required for meaningful
                 results since components always belong to an application).
               - `environment_id` — when present, triggers the resolved view with
                 environment overrides applied to each component.
               - `category` — filter by component category (INFRASTRUCTURE, WORKLOAD).
               - `name` — filter by component name.
        pageSize:
          type: integer
          title: page_size
          maximum: 100
          minimum: 0
          format: int32
          description: Maximum number of components to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListComponentsRequest
      additionalProperties: false
      description: |-
        ListComponentsRequest contains pagination and filter parameters.

         The filter controls both scoping and response behavior:
           - `application_id` in filter: returns application-level component
             definitions (defaults).
           - `application_id` + `environment_id` in filter: returns the resolved
             view with environment overrides applied. Each component reflects its
             effective source, version, values_template, depends_on, and outputs.
             Disabled components are included with `disabled=true`. Components with
             any overridden field have `has_override=true`.
    admiral.api.component.v1.ListComponentsResponse:
      type: object
      properties:
        components:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.component.v1.Component'
          title: components
          description: |-
            The list of components. When `environment_id` is present in the filter,
             each component reflects the resolved view with overrides applied.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListComponentsResponse
      additionalProperties: false
      description: ListComponentsResponse contains a page of components.
    admiral.api.component.v1.SetComponentOverrideRequest:
      type: object
      properties:
        componentId:
          type: string
          title: component_id
          format: uuid
          description: The component to override (UUID).
        environmentId:
          type: string
          title: environment_id
          format: uuid
          description: The environment this override applies to (UUID).
        disabled:
          type: boolean
          title: disabled
          description: When true, the component is not deployed in this environment.
        sourceId:
          type:
            - string
            - "null"
          title: source_id
          format: uuid
          description: Override source (UUID). When set, replaces the component's default source.
        version:
          type:
            - string
            - "null"
          title: version
          description: Override version. When set, replaces the component's default version.
        valuesTemplate:
          type:
            - string
            - "null"
          title: values_template
          maxLength: 65536
          description: |-
            Override values template. When set, completely replaces the component's
             default values template (no merge).
        dependsOn:
          type: array
          items:
            type: string
            format: uuid
          title: depends_on
          description: |-
            Override depends_on (component UUIDs). When set, replaces the component's
             default depends_on.
        outputs:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.component.v1.ComponentOutput'
          title: outputs
          description: Override outputs. When set, replaces the component's declared outputs.
      title: SetComponentOverrideRequest
      additionalProperties: false
      description: SetComponentOverrideRequest creates or replaces an environment-level override.
    admiral.api.component.v1.SetComponentOverrideResponse:
      type: object
      properties:
        override:
          title: override
          description: The created or updated override.
          $ref: '#/components/schemas/admiral.api.component.v1.ComponentOverride'
      title: SetComponentOverrideResponse
      additionalProperties: false
      description: SetComponentOverrideResponse contains the override record.
    admiral.api.component.v1.UpdateComponentRequest:
      type: object
      properties:
        component:
          title: component
          description: |-
            The component with updated fields. The `id` field is required.
             Only fields specified in `update_mask` are updated.
          $ref: '#/components/schemas/admiral.api.component.v1.Component'
        updateMask:
          title: update_mask
          description: |-
            The set of fields to update. If unset, all mutable fields are updated.
             Supported fields: `name`, `description`, `source_id`, `version`,
             `values_template`, `depends_on`, `outputs`.
          $ref: '#/components/schemas/google.protobuf.FieldMask'
      title: UpdateComponentRequest
      required:
        - component
      additionalProperties: false
      description: UpdateComponentRequest contains the component fields to update.
    admiral.api.component.v1.UpdateComponentResponse:
      type: object
      properties:
        component:
          title: component
          description: The updated component.
          $ref: '#/components/schemas/admiral.api.component.v1.Component'
      title: UpdateComponentResponse
      additionalProperties: false
      description: UpdateComponentResponse contains the updated component.
    admiral.api.connection.v1.AWSFederationConfig:
      type: object
      properties:
        roleArn:
          type: string
          title: role_arn
          minLength: 1
          description: The ARN of the IAM Role to assume (e.g., "arn:aws:iam::123456789012:role/admiral-ecr").
        externalId:
          type: string
          title: external_id
          description: Optional external ID for additional assume-role protection.
        region:
          type: string
          title: region
          description: AWS region for regional service endpoints (e.g., "us-east-1").
      title: AWSFederationConfig
      additionalProperties: false
      description: |-
        AWSFederationConfig holds the IAM role configuration for OIDC-based
         authentication to AWS services (ECR, S3, Terraform provider).

         Setup: Create an IAM Role with a trust policy that accepts Admiral's OIDC
         issuer (https://oidc.admiral.io) and conditions on the `tenant_id` claim
         matching your Admiral tenant.
    admiral.api.connection.v1.AWSStaticAuth:
      type: object
      properties:
        accessKeyId:
          type: string
          title: access_key_id
          minLength: 1
          description: AWS access key ID.
        secretAccessKey:
          type: string
          title: secret_access_key
          description: |-
            AWS secret access key.
             Write-only: masked in responses.
        region:
          type: string
          title: region
          description: AWS region for regional service endpoints.
      title: AWSStaticAuth
      additionalProperties: false
      description: |-
        AWSStaticAuth holds static AWS credentials. Prefer AWSFederationConfig
         (OIDC) instead. Static credentials require manual rotation and present a
         security risk if compromised.
    admiral.api.connection.v1.AzureFederationConfig:
      type: object
      properties:
        azureTenantId:
          type: string
          title: azure_tenant_id
          minLength: 1
          description: Azure AD tenant ID (directory ID).
        clientId:
          type: string
          title: client_id
          minLength: 1
          description: Application (client) ID of the Azure AD app registration.
      title: AzureFederationConfig
      additionalProperties: false
      description: |-
        AzureFederationConfig holds the federated credential configuration for
         OIDC-based authentication to Azure services (ACR, Terraform).

         Setup: Create a Federated Identity Credential on your Azure AD app
         registration that trusts Admiral's OIDC issuer with your tenant_id claim.
    admiral.api.connection.v1.AzureStaticAuth:
      type: object
      properties:
        azureTenantId:
          type: string
          title: azure_tenant_id
          minLength: 1
          description: Azure AD tenant ID (directory ID).
        clientId:
          type: string
          title: client_id
          minLength: 1
          description: Application (client) ID.
        clientSecret:
          type: string
          title: client_secret
          description: |-
            Client secret.
             Write-only: masked in responses.
      title: AzureStaticAuth
      additionalProperties: false
      description: |-
        AzureStaticAuth holds static Azure service principal credentials. Prefer
         AzureFederationConfig (Federated Credential) instead.
    admiral.api.connection.v1.BasicAuth:
      type: object
      properties:
        username:
          type: string
          title: username
          minLength: 1
          description: Username for authentication.
        password:
          type: string
          title: password
          description: |-
            Password or token for authentication.
             Write-only: masked in responses.
      title: BasicAuth
      additionalProperties: false
      description: |-
        BasicAuth holds username/password credentials for OCI registries and other
         systems that use basic authentication.
    admiral.api.connection.v1.BearerTokenAuth:
      type: object
      properties:
        token:
          type: string
          title: token
          description: |-
            Bearer token value.
             Write-only: masked in responses.
      title: BearerTokenAuth
      additionalProperties: false
      description: |-
        BearerTokenAuth holds a bearer token for systems that use token-based
         authentication (e.g., private Terraform registries).
    admiral.api.connection.v1.Connection:
      type: object
      allOf:
        - properties:
            id:
              type: string
              title: id
              format: uuid
              description: Unique identifier for the connection (UUID).
            tenantId:
              type: string
              title: tenant_id
              format: uuid
              description: Tenant this connection belongs to (UUID).
            name:
              type: string
              title: name
              maxLength: 63
              minLength: 1
              pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
              description: |-
                URL-safe, human-readable identifier (e.g., "github-org", "ecr-prod").
                 Unique within the tenant. Lowercase alphanumeric and hyphens only, must
                 start with a letter and end with an alphanumeric character (1-63 chars).
            description:
              type: string
              title: description
              maxLength: 1024
              description: |-
                Optional longer-form description of what this connection is for
                 (e.g., "Read-only access to the platform team's GitHub org").
            type:
              title: type
              description: The type of external system and authentication mechanism.
              $ref: '#/components/schemas/admiral.api.connection.v1.ConnectionType'
            status:
              title: status
              description: Current health status of the connection's credentials.
              $ref: '#/components/schemas/admiral.api.connection.v1.ConnectionStatus'
            statusMessage:
              type: string
              title: status_message
              description: |-
                Human-readable message when status is ERROR (e.g., "401 Unauthorized:
                 token expired"). Empty when status is ACTIVE or UNTESTED.
            labels:
              type: object
              title: labels
              maxProperties: 64
              additionalProperties:
                type: string
                title: value
                maxLength: 256
              description: |-
                Arbitrary key-value labels for organizing and filtering connections
                 (e.g., `{"team": "platform", "environment": "prod"}`).
            createdBy:
              type: string
              title: created_by
              description: User ID who created this connection (UUID, server-populated from token).
            updatedBy:
              type: string
              title: updated_by
              description: User ID who last updated this connection (UUID, server-populated from token).
            createdAt:
              title: created_at
              description: When the connection was created.
              $ref: '#/components/schemas/google.protobuf.Timestamp'
            updatedAt:
              title: updated_at
              description: When the connection was last updated.
              $ref: '#/components/schemas/google.protobuf.Timestamp'
            lastTestedAt:
              title: last_tested_at
              description: |-
                When the connection was last tested (via TestConnection or auto-validation).
                 Absent if never tested.
              $ref: '#/components/schemas/google.protobuf.Timestamp'
        - oneOf:
            - properties:
                awsFederation:
                  title: aws_federation
                  description: AWS OIDC federation (for CONNECTION_TYPE_CLOUD_AWS).
                  $ref: '#/components/schemas/admiral.api.connection.v1.AWSFederationConfig'
              title: aws_federation
              required:
                - awsFederation
            - properties:
                awsStatic:
                  title: aws_static
                  description: AWS static credentials (for CONNECTION_TYPE_CLOUD_AWS_STATIC, deprecated).
                  deprecated: true
                  $ref: '#/components/schemas/admiral.api.connection.v1.AWSStaticAuth'
              title: aws_static
              required:
                - awsStatic
            - properties:
                azureFederation:
                  title: azure_federation
                  description: Azure Federated Credential (for CONNECTION_TYPE_CLOUD_AZURE).
                  $ref: '#/components/schemas/admiral.api.connection.v1.AzureFederationConfig'
              title: azure_federation
              required:
                - azureFederation
            - properties:
                azureStatic:
                  title: azure_static
                  description: Azure static credentials (for CONNECTION_TYPE_CLOUD_AZURE_STATIC, deprecated).
                  deprecated: true
                  $ref: '#/components/schemas/admiral.api.connection.v1.AzureStaticAuth'
              title: azure_static
              required:
                - azureStatic
            - properties:
                bearerToken:
                  title: bearer_token
                  description: Bearer token (for CONNECTION_TYPE_TERRAFORM_REGISTRY).
                  $ref: '#/components/schemas/admiral.api.connection.v1.BearerTokenAuth'
              title: bearer_token
              required:
                - bearerToken
            - properties:
                gcpFederation:
                  title: gcp_federation
                  description: GCP Workload Identity (for CONNECTION_TYPE_CLOUD_GCP).
                  $ref: '#/components/schemas/admiral.api.connection.v1.GCPFederationConfig'
              title: gcp_federation
              required:
                - gcpFederation
            - properties:
                gcpStatic:
                  title: gcp_static
                  description: GCP static credentials (for CONNECTION_TYPE_CLOUD_GCP_STATIC, deprecated).
                  deprecated: true
                  $ref: '#/components/schemas/admiral.api.connection.v1.GCPStaticAuth'
              title: gcp_static
              required:
                - gcpStatic
            - properties:
                gitGithubApp:
                  title: git_github_app
                  description: GitHub App credentials (for CONNECTION_TYPE_GIT_GITHUB_APP).
                  $ref: '#/components/schemas/admiral.api.connection.v1.GitHubAppAuth'
              title: git_github_app
              required:
                - gitGithubApp
            - properties:
                gitSsh:
                  title: git_ssh
                  description: Git SSH key (for CONNECTION_TYPE_GIT_SSH).
                  $ref: '#/components/schemas/admiral.api.connection.v1.GitSSHAuth'
              title: git_ssh
              required:
                - gitSsh
            - properties:
                gitToken:
                  title: git_token
                  description: Git HTTPS token (for CONNECTION_TYPE_GIT_TOKEN).
                  $ref: '#/components/schemas/admiral.api.connection.v1.GitTokenAuth'
              title: git_token
              required:
                - gitToken
            - properties:
                helmHttp:
                  title: helm_http
                  description: Helm HTTP basic auth (for CONNECTION_TYPE_HELM_HTTP).
                  $ref: '#/components/schemas/admiral.api.connection.v1.HelmHTTPAuth'
              title: helm_http
              required:
                - helmHttp
            - properties:
                ociBasic:
                  title: oci_basic
                  description: OCI registry basic auth (for CONNECTION_TYPE_OCI_BASIC).
                  $ref: '#/components/schemas/admiral.api.connection.v1.BasicAuth'
              title: oci_basic
              required:
                - ociBasic
      title: Connection
      additionalProperties: false
      description: |-
        Connection represents stored credentials for accessing an external system.
         Connections are tenant-scoped and referenced by sources when fetching artifacts.

         Sensitive fields within auth_config are write-only — they are accepted on
         create and update but never returned in API responses.
    admiral.api.connection.v1.Connection.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.connection.v1.ConnectionStatus:
      type: string
      title: ConnectionStatus
      enum:
        - CONNECTION_STATUS_UNSPECIFIED
        - CONNECTION_STATUS_ACTIVE
        - CONNECTION_STATUS_ERROR
        - CONNECTION_STATUS_UNTESTED
      description: ConnectionStatus represents the health state of a connection's credentials.
    admiral.api.connection.v1.ConnectionType:
      type: string
      title: ConnectionType
      enum:
        - CONNECTION_TYPE_UNSPECIFIED
        - CONNECTION_TYPE_GIT_TOKEN
        - CONNECTION_TYPE_GIT_SSH
        - CONNECTION_TYPE_GIT_GITHUB_APP
        - CONNECTION_TYPE_HELM_HTTP
        - CONNECTION_TYPE_OCI_BASIC
        - CONNECTION_TYPE_CLOUD_AWS
        - CONNECTION_TYPE_CLOUD_GCP
        - CONNECTION_TYPE_CLOUD_AZURE
        - CONNECTION_TYPE_CLOUD_AWS_STATIC
        - CONNECTION_TYPE_CLOUD_GCP_STATIC
        - CONNECTION_TYPE_CLOUD_AZURE_STATIC
        - CONNECTION_TYPE_TERRAFORM_REGISTRY
        - CONNECTION_TYPE_S3
        - CONNECTION_TYPE_GCS
      description: |-
        ConnectionType identifies the kind of external system and authentication
         mechanism a connection uses.
    admiral.api.connection.v1.CreateConnectionRequest:
      type: object
      allOf:
        - properties:
            name:
              type: string
              title: name
              maxLength: 63
              minLength: 1
              pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
              description: |-
                URL-safe, human-readable identifier (e.g., "github-org", "ecr-prod").
                 Must be unique within the tenant.
            description:
              type: string
              title: description
              maxLength: 1024
              description: Optional description of the connection's purpose.
            type:
              not:
                enum:
                  - CONNECTION_TYPE_UNSPECIFIED
              title: type
              description: The type of external system and authentication mechanism.
              $ref: '#/components/schemas/admiral.api.connection.v1.ConnectionType'
            labels:
              type: object
              title: labels
              maxProperties: 64
              additionalProperties:
                type: string
                title: value
                maxLength: 256
              description: Arbitrary key-value labels for organizing and filtering connections.
        - oneOf:
            - properties:
                awsFederation:
                  title: aws_federation
                  $ref: '#/components/schemas/admiral.api.connection.v1.AWSFederationConfig'
              title: aws_federation
              required:
                - awsFederation
            - properties:
                awsStatic:
                  title: aws_static
                  deprecated: true
                  $ref: '#/components/schemas/admiral.api.connection.v1.AWSStaticAuth'
              title: aws_static
              required:
                - awsStatic
            - properties:
                azureFederation:
                  title: azure_federation
                  $ref: '#/components/schemas/admiral.api.connection.v1.AzureFederationConfig'
              title: azure_federation
              required:
                - azureFederation
            - properties:
                azureStatic:
                  title: azure_static
                  deprecated: true
                  $ref: '#/components/schemas/admiral.api.connection.v1.AzureStaticAuth'
              title: azure_static
              required:
                - azureStatic
            - properties:
                bearerToken:
                  title: bearer_token
                  $ref: '#/components/schemas/admiral.api.connection.v1.BearerTokenAuth'
              title: bearer_token
              required:
                - bearerToken
            - properties:
                gcpFederation:
                  title: gcp_federation
                  $ref: '#/components/schemas/admiral.api.connection.v1.GCPFederationConfig'
              title: gcp_federation
              required:
                - gcpFederation
            - properties:
                gcpStatic:
                  title: gcp_static
                  deprecated: true
                  $ref: '#/components/schemas/admiral.api.connection.v1.GCPStaticAuth'
              title: gcp_static
              required:
                - gcpStatic
            - properties:
                gitGithubApp:
                  title: git_github_app
                  $ref: '#/components/schemas/admiral.api.connection.v1.GitHubAppAuth'
              title: git_github_app
              required:
                - gitGithubApp
            - properties:
                gitSsh:
                  title: git_ssh
                  $ref: '#/components/schemas/admiral.api.connection.v1.GitSSHAuth'
              title: git_ssh
              required:
                - gitSsh
            - properties:
                gitToken:
                  title: git_token
                  $ref: '#/components/schemas/admiral.api.connection.v1.GitTokenAuth'
              title: git_token
              required:
                - gitToken
            - properties:
                helmHttp:
                  title: helm_http
                  $ref: '#/components/schemas/admiral.api.connection.v1.HelmHTTPAuth'
              title: helm_http
              required:
                - helmHttp
            - properties:
                ociBasic:
                  title: oci_basic
                  $ref: '#/components/schemas/admiral.api.connection.v1.BasicAuth'
              title: oci_basic
              required:
                - ociBasic
      title: CreateConnectionRequest
      additionalProperties: false
      description: CreateConnectionRequest contains the parameters for creating a new connection.
    admiral.api.connection.v1.CreateConnectionRequest.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.connection.v1.CreateConnectionResponse:
      type: object
      properties:
        connection:
          title: connection
          description: The created connection. Auth config sensitive fields are masked.
          $ref: '#/components/schemas/admiral.api.connection.v1.Connection'
      title: CreateConnectionResponse
      additionalProperties: false
      description: CreateConnectionResponse contains the newly created connection.
    admiral.api.connection.v1.DeleteConnectionRequest:
      type: object
      properties:
        connectionId:
          type: string
          title: connection_id
          format: uuid
          description: |-
            The unique identifier of the connection to delete (UUID).
             Fails if any sources still reference this connection.
      title: DeleteConnectionRequest
      additionalProperties: false
      description: DeleteConnectionRequest identifies a connection to delete.
    admiral.api.connection.v1.DeleteConnectionResponse:
      type: object
      title: DeleteConnectionResponse
      additionalProperties: false
      description: DeleteConnectionResponse is empty on success.
    admiral.api.connection.v1.GCPFederationConfig:
      type: object
      properties:
        projectNumber:
          type: string
          title: project_number
          minLength: 1
          description: GCP project number (numeric, not project ID).
        poolId:
          type: string
          title: pool_id
          minLength: 1
          description: Workload Identity Pool ID.
        providerId:
          type: string
          title: provider_id
          minLength: 1
          description: Workload Identity Provider ID within the pool.
        serviceAccountEmail:
          type: string
          title: service_account_email
          minLength: 1
          description: Email of the GCP service account to impersonate.
      title: GCPFederationConfig
      additionalProperties: false
      description: |-
        GCPFederationConfig holds the Workload Identity Federation configuration for
         OIDC-based authentication to GCP services (Artifact Registry, GCS, Terraform).

         Setup: Create a Workload Identity Pool and Provider that trusts Admiral's
         OIDC issuer, then grant the service account access to the required resources.
    admiral.api.connection.v1.GCPStaticAuth:
      type: object
      properties:
        serviceAccountJson:
          type: string
          title: service_account_json
          description: |-
            JSON-encoded service account key.
             Write-only: masked in responses.
      title: GCPStaticAuth
      additionalProperties: false
      description: |-
        GCPStaticAuth holds a static GCP service account key. Prefer
         GCPFederationConfig (Workload Identity) instead.
    admiral.api.connection.v1.GetConnectionRequest:
      type: object
      properties:
        connectionId:
          type: string
          title: connection_id
          format: uuid
          description: The unique identifier of the connection (UUID).
      title: GetConnectionRequest
      additionalProperties: false
      description: GetConnectionRequest identifies a connection to retrieve.
    admiral.api.connection.v1.GetConnectionResponse:
      type: object
      properties:
        connection:
          title: connection
          description: The connection record. Sensitive credential fields are masked.
          $ref: '#/components/schemas/admiral.api.connection.v1.Connection'
      title: GetConnectionResponse
      additionalProperties: false
      description: GetConnectionResponse contains the connection record.
    admiral.api.connection.v1.GitHubAppAuth:
      type: object
      properties:
        appId:
          type: string
          title: app_id
          minLength: 1
          description: The GitHub App's numeric ID.
        installationId:
          type: string
          title: installation_id
          minLength: 1
          description: The installation ID for the target organization or repository.
        privateKey:
          type: string
          title: private_key
          description: |-
            PEM-encoded private key for the GitHub App.
             Write-only: masked in responses.
      title: GitHubAppAuth
      additionalProperties: false
      description: |-
        GitHubAppAuth holds GitHub App credentials for Git operations.
         Preferred over personal tokens for organizations — provides granular
         repository permissions and a better audit trail.
    admiral.api.connection.v1.GitSSHAuth:
      type: object
      properties:
        privateKey:
          type: string
          title: private_key
          description: |-
            PEM-encoded SSH private key.
             Write-only: masked in responses.
        passphrase:
          type: string
          title: passphrase
          description: |-
            Optional passphrase for the private key.
             Write-only: masked in responses.
      title: GitSSHAuth
      additionalProperties: false
      description: GitSSHAuth holds SSH key credentials for Git operations.
    admiral.api.connection.v1.GitTokenAuth:
      type: object
      properties:
        token:
          type: string
          title: token
          description: |-
            Personal access token, OAuth token, or bot token.
             Write-only: masked in responses.
      title: GitTokenAuth
      additionalProperties: false
      description: GitTokenAuth holds HTTPS token credentials for Git operations.
    admiral.api.connection.v1.HelmHTTPAuth:
      type: object
      properties:
        username:
          type: string
          title: username
          minLength: 1
          description: Username for basic authentication.
        password:
          type: string
          title: password
          description: |-
            Password for basic authentication.
             Write-only: masked in responses.
      title: HelmHTTPAuth
      additionalProperties: false
      description: HelmHTTPAuth holds basic auth credentials for classic Helm HTTP repositories.
    admiral.api.connection.v1.ListConnectionsRequest:
      type: object
      properties:
        filter:
          type: string
          title: filter
          maxLength: 1024
          description: Filter expression using the PEG filter DSL.
        pageSize:
          type: integer
          title: page_size
          maximum: 100
          minimum: 0
          format: int32
          description: Maximum number of connections to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListConnectionsRequest
      additionalProperties: false
      description: ListConnectionsRequest contains pagination and filter parameters.
    admiral.api.connection.v1.ListConnectionsResponse:
      type: object
      properties:
        connections:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.connection.v1.Connection'
          title: connections
          description: The list of connections. Sensitive credential fields are masked.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListConnectionsResponse
      additionalProperties: false
      description: ListConnectionsResponse contains a page of connections.
    admiral.api.connection.v1.TestConnectionRequest:
      type: object
      properties:
        connectionId:
          type: string
          title: connection_id
          format: uuid
          description: The unique identifier of the connection to test (UUID).
      title: TestConnectionRequest
      additionalProperties: false
      description: TestConnectionRequest identifies a connection to validate.
    admiral.api.connection.v1.TestConnectionResponse:
      type: object
      properties:
        connection:
          title: connection
          description: The updated connection with refreshed status and last_tested_at.
          $ref: '#/components/schemas/admiral.api.connection.v1.Connection'
        success:
          type: boolean
          title: success
          description: Whether the test succeeded.
        message:
          type: string
          title: message
          description: |-
            Human-readable message describing the test result. On failure, includes
             the error details (e.g., "401 Unauthorized: token expired").
      title: TestConnectionResponse
      additionalProperties: false
      description: TestConnectionResponse contains the result of the connectivity test.
    admiral.api.connection.v1.UpdateConnectionRequest:
      type: object
      properties:
        connection:
          title: connection
          description: |-
            The connection with updated fields. The `id` field is required.
             Only fields specified in `update_mask` are updated.

             When updating auth_config, the entire auth config is replaced.
             Omitting auth_config from the update_mask leaves credentials unchanged.
          $ref: '#/components/schemas/admiral.api.connection.v1.Connection'
        updateMask:
          title: update_mask
          description: |-
            The set of fields to update. If unset, all mutable fields are updated.
             Supported fields: `name`, `description`, `auth_config`, `labels`.
          $ref: '#/components/schemas/google.protobuf.FieldMask'
      title: UpdateConnectionRequest
      required:
        - connection
      additionalProperties: false
      description: UpdateConnectionRequest contains the connection fields to update.
    admiral.api.connection.v1.UpdateConnectionResponse:
      type: object
      properties:
        connection:
          title: connection
          description: The updated connection. Sensitive credential fields are masked.
          $ref: '#/components/schemas/admiral.api.connection.v1.Connection'
      title: UpdateConnectionResponse
      additionalProperties: false
      description: UpdateConnectionResponse contains the updated connection.
    admiral.api.deployment.v1.CancelDeploymentRequest:
      type: object
      properties:
        deploymentId:
          type: string
          title: deployment_id
          format: uuid
          description: The deployment to cancel (UUID).
        reason:
          type: string
          title: reason
          maxLength: 1024
          description: Optional reason for cancellation.
      title: CancelDeploymentRequest
      additionalProperties: false
      description: CancelDeploymentRequest cancels an in-progress deployment.
    admiral.api.deployment.v1.CancelDeploymentResponse:
      type: object
      properties:
        deployment:
          title: deployment
          description: The cancelled deployment.
          $ref: '#/components/schemas/admiral.api.deployment.v1.Deployment'
      title: CancelDeploymentResponse
      additionalProperties: false
      description: CancelDeploymentResponse contains the updated deployment.
    admiral.api.deployment.v1.CreateDeploymentRequest:
      type: object
      properties:
        applicationId:
          type: string
          title: application_id
          format: uuid
          description: The application to deploy (UUID).
        environmentId:
          type: string
          title: environment_id
          format: uuid
          description: The target environment (UUID).
        message:
          type: string
          title: message
          maxLength: 1024
          description: Optional message describing this deployment.
        destroy:
          type: boolean
          title: destroy
          description: |-
            Destroy all resources in the environment. Runs Terraform destroy for
             infra components and deletes workload resources from the cluster, in
             reverse dependency order. Required before deleting an environment that
             has active resources.
      title: CreateDeploymentRequest
      additionalProperties: false
      description: CreateDeploymentRequest triggers a new deployment.
    admiral.api.deployment.v1.CreateDeploymentResponse:
      type: object
      properties:
        deployment:
          title: deployment
          description: The created deployment. Status will be PENDING initially.
          $ref: '#/components/schemas/admiral.api.deployment.v1.Deployment'
      title: CreateDeploymentResponse
      additionalProperties: false
      description: CreateDeploymentResponse contains the newly created deployment.
    admiral.api.deployment.v1.Deployment:
      type: object
      properties:
        id:
          type: string
          title: id
          format: uuid
          description: Unique identifier for the deployment (UUID).
        applicationId:
          type: string
          title: application_id
          format: uuid
          description: The application being deployed (UUID).
        environmentId:
          type: string
          title: environment_id
          format: uuid
          description: The target environment (UUID).
        status:
          title: status
          description: Composite status derived from all component revisions.
          $ref: '#/components/schemas/admiral.api.deployment.v1.DeploymentStatus'
        triggerType:
          title: trigger_type
          description: What triggered this deployment.
          $ref: '#/components/schemas/admiral.api.deployment.v1.DeploymentTriggerType'
        triggeredBy:
          type: string
          title: triggered_by
          format: uuid
          description: UUID of the user that triggered the deployment.
        message:
          type: string
          title: message
          maxLength: 1024
          description: |-
            Optional message describing the deployment (e.g., "Deploying v2.1.0
             with new caching layer" or "Rolling back to stable after API errors").
        destroy:
          type: boolean
          title: destroy
          description: |-
            Whether this is a destroy deployment. Destroy deployments tear down all
             resources in the environment: Terraform destroy for infra components,
             resource deletion for workload components. Executed in reverse dependency
             order. Required before an environment with active resources can be deleted.
        revisionSummary:
          title: revision_summary
          description: Summary counts for quick status display.
          $ref: '#/components/schemas/admiral.api.deployment.v1.RevisionSummary'
        createdAt:
          title: created_at
          description: When the deployment was created.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        completedAt:
          title: completed_at
          description: |-
            When the deployment finished (all revisions completed, failed, or
             cancelled). Absent while the deployment is in progress.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: Deployment
      additionalProperties: false
      description: |-
        Deployment represents a single deployment of an application to an
         environment. Each deployment produces one Revision per component. The
         deployment tracks the composite status across all revisions and provides
         the audit trail for what was deployed, when, and by whom.
    admiral.api.deployment.v1.DeploymentStatus:
      type: string
      title: DeploymentStatus
      enum:
        - DEPLOYMENT_STATUS_UNSPECIFIED
        - DEPLOYMENT_STATUS_PENDING
        - DEPLOYMENT_STATUS_QUEUED
        - DEPLOYMENT_STATUS_RUNNING
        - DEPLOYMENT_STATUS_SUCCEEDED
        - DEPLOYMENT_STATUS_PARTIALLY_FAILED
        - DEPLOYMENT_STATUS_FAILED
        - DEPLOYMENT_STATUS_CANCELLED
      description: |-
        DeploymentStatus represents the composite status of a deployment, derived
         from the statuses of all its component revisions.
    admiral.api.deployment.v1.DeploymentTriggerType:
      type: string
      title: DeploymentTriggerType
      enum:
        - DEPLOYMENT_TRIGGER_TYPE_UNSPECIFIED
        - DEPLOYMENT_TRIGGER_TYPE_MANUAL
        - DEPLOYMENT_TRIGGER_TYPE_CI
        - DEPLOYMENT_TRIGGER_TYPE_DESTROY
      description: DeploymentTriggerType indicates what initiated the deployment.
    admiral.api.deployment.v1.GetDeploymentRequest:
      type: object
      properties:
        deploymentId:
          type: string
          title: deployment_id
          format: uuid
          description: The unique identifier of the deployment (UUID).
      title: GetDeploymentRequest
      additionalProperties: false
      description: GetDeploymentRequest identifies a deployment to retrieve.
    admiral.api.deployment.v1.GetDeploymentResponse:
      type: object
      properties:
        deployment:
          title: deployment
          description: The deployment record with current status.
          $ref: '#/components/schemas/admiral.api.deployment.v1.Deployment'
      title: GetDeploymentResponse
      additionalProperties: false
      description: GetDeploymentResponse contains the deployment record.
    admiral.api.deployment.v1.GetRevisionRequest:
      type: object
      properties:
        deploymentId:
          type: string
          title: deployment_id
          format: uuid
          description: The deployment (UUID).
        revisionId:
          type: string
          title: revision_id
          format: uuid
          description: The revision (UUID).
      title: GetRevisionRequest
      additionalProperties: false
      description: GetRevisionRequest identifies a revision within a deployment.
    admiral.api.deployment.v1.GetRevisionResponse:
      type: object
      properties:
        revision:
          title: revision
          description: The revision record with current status and artifacts.
          $ref: '#/components/schemas/admiral.api.deployment.v1.Revision'
      title: GetRevisionResponse
      additionalProperties: false
      description: GetRevisionResponse contains the revision record.
    admiral.api.deployment.v1.ListDeploymentsRequest:
      type: object
      properties:
        filter:
          type: string
          title: filter
          maxLength: 1024
          description: |-
            Filter expression using the PEG filter DSL.

             Common filter fields:
               - `application_id` — deployments for a specific application.
               - `environment_id` — deployments to a specific environment.
               - `status` — filter by deployment status.
               - `trigger_type` — filter by trigger type (MANUAL, CI, DESTROY).
        pageSize:
          type: integer
          title: page_size
          maximum: 100
          minimum: 0
          format: int32
          description: Maximum number of deployments to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListDeploymentsRequest
      additionalProperties: false
      description: ListDeploymentsRequest contains pagination and filter parameters.
    admiral.api.deployment.v1.ListDeploymentsResponse:
      type: object
      properties:
        deployments:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.deployment.v1.Deployment'
          title: deployments
          description: The list of deployments, ordered from newest to oldest.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListDeploymentsResponse
      additionalProperties: false
      description: ListDeploymentsResponse contains a page of deployments.
    admiral.api.deployment.v1.ListRevisionsRequest:
      type: object
      properties:
        deploymentId:
          type: string
          title: deployment_id
          format: uuid
          description: The deployment to list revisions for (UUID).
        pageSize:
          type: integer
          title: page_size
          maximum: 100
          minimum: 0
          format: int32
          description: Maximum number of revisions to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListRevisionsRequest
      additionalProperties: false
      description: ListRevisionsRequest lists all revisions for a deployment.
    admiral.api.deployment.v1.ListRevisionsResponse:
      type: object
      properties:
        revisions:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.deployment.v1.Revision'
          title: revisions
          description: The list of revisions, ordered by dependency graph (upstream first).
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListRevisionsResponse
      additionalProperties: false
      description: ListRevisionsResponse contains all revisions for a deployment.
    admiral.api.deployment.v1.RetryRevisionRequest:
      type: object
      properties:
        deploymentId:
          type: string
          title: deployment_id
          format: uuid
          description: The deployment (UUID).
        revisionId:
          type: string
          title: revision_id
          format: uuid
          description: The revision to retry (UUID). Must be in FAILED status.
      title: RetryRevisionRequest
      additionalProperties: false
      description: RetryRevisionRequest retries a failed revision.
    admiral.api.deployment.v1.RetryRevisionResponse:
      type: object
      properties:
        revision:
          title: revision
          description: |-
            The retried revision. Status resets and retry_count is incremented.
             Downstream revisions that were BLOCKED will automatically unblock
             if this revision succeeds.
          $ref: '#/components/schemas/admiral.api.deployment.v1.Revision'
      title: RetryRevisionResponse
      additionalProperties: false
      description: RetryRevisionResponse contains the updated revision.
    admiral.api.deployment.v1.Revision:
      type: object
      properties:
        id:
          type: string
          title: id
          format: uuid
          description: Unique identifier for the revision (UUID).
        deploymentId:
          type: string
          title: deployment_id
          format: uuid
          description: The deployment this revision belongs to (UUID).
        componentId:
          type: string
          title: component_id
          format: uuid
          description: The component this revision is for (UUID).
        componentName:
          type: string
          title: component_name
          description: Component name at the time of deployment (denormalized for display).
        category:
          title: category
          description: Component category at the time of deployment (after override resolution).
          $ref: '#/components/schemas/admiral.api.deployment.v1.RevisionCategory'
        status:
          title: status
          description: Lifecycle status of this revision.
          $ref: '#/components/schemas/admiral.api.deployment.v1.RevisionStatus'
        sourceId:
          type: string
          title: source_id
          description: The source used for this revision (UUID, after override resolution).
        version:
          type: string
          title: version
          description: The version deployed (after override resolution).
        resolvedValues:
          type: string
          title: resolved_values
          description: |-
            The resolved values template snapshot — the values_template with all
             variable references and component output references fully resolved.
             Stored for audit: shows exactly what inputs were used. Sensitive
             variable values are masked in API responses.
        dependsOn:
          type: array
          items:
            type: string
          title: depends_on
          description: |-
            Component IDs that this revision depends on. Populated from the resolved
             depends_on list plus implicit dependencies from template expressions.
        blockedBy:
          type: array
          items:
            type: string
          title: blocked_by
          description: |-
            Component IDs that are blocking this revision. Only populated when
             status is BLOCKED — indicates which upstream components failed.
        artifactChecksum:
          type: string
          title: artifact_checksum
          description: SHA-256 checksum of the rendered artifact bundle (tar.gz).
        artifactUrl:
          type: string
          title: artifact_url
          description: |-
            Storage location of the rendered artifact bundle. Internal reference
             used by agents/runners to fetch the bundle.
        planOutput:
          type: string
          title: plan_output
          description: |-
            (Infrastructure only) The Terraform plan output in human-readable format.
             Populated after planning completes. Used for visibility and audit.
        planSummary:
          title: plan_summary
          description: |-
            (Infrastructure only) The number of resources Terraform plans to add,
             change, and destroy. Populated after planning completes.
          $ref: '#/components/schemas/admiral.api.deployment.v1.TerraformPlanSummary'
        errorMessage:
          type: string
          title: error_message
          description: Error message if the revision failed. Empty on success.
        retryCount:
          type: integer
          title: retry_count
          format: int32
          description: Number of retry attempts. Starts at 0 for the initial attempt.
        createdAt:
          title: created_at
          description: When the revision was created (same as deployment created_at).
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        startedAt:
          title: started_at
          description: When the revision started execution (transitioned from PENDING/QUEUED).
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        completedAt:
          title: completed_at
          description: When the revision finished (succeeded, failed, or cancelled).
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: Revision
      additionalProperties: false
      description: |-
        Revision represents an immutable, rendered artifact for a single component
         within a deployment. Each revision tracks the full lifecycle from rendering
         through execution, and stores references to the produced artifacts
         (rendered manifests, Terraform plan files, etc.).

         For infrastructure components (Terraform):
           - Rendering produces .tf files and .tfvars with resolved variable values.
           - `terraform plan` and `terraform apply` are executed by the assigned runner.
           - The plan output is stored for visibility.
           - Each component has its own Terraform state.

         For workload components (Helm, Kustomize, manifests):
           - Rendering produces Kubernetes manifests (via helm template, kustomize
             build, or raw file collection).
           - Manifests are ordered (CRDs before resources, namespaces first).
           - The rendered bundle is sent to the K8s agent for application.
    admiral.api.deployment.v1.RevisionCategory:
      type: string
      title: RevisionCategory
      enum:
        - REVISION_CATEGORY_UNSPECIFIED
        - REVISION_CATEGORY_INFRASTRUCTURE
        - REVISION_CATEGORY_WORKLOAD
      description: |-
        RevisionCategory mirrors ComponentCategory but is stored on the revision
         to capture the effective category at deployment time (may differ from
         the component default if an environment override changed the source type).
    admiral.api.deployment.v1.RevisionStatus:
      type: string
      title: RevisionStatus
      enum:
        - REVISION_STATUS_UNSPECIFIED
        - REVISION_STATUS_PENDING
        - REVISION_STATUS_QUEUED
        - REVISION_STATUS_PLANNING
        - REVISION_STATUS_APPLYING
        - REVISION_STATUS_SUCCEEDED
        - REVISION_STATUS_FAILED
        - REVISION_STATUS_BLOCKED
        - REVISION_STATUS_CANCELLED
      description: |-
        RevisionStatus represents the lifecycle status of a single component
         revision within a deployment.
    admiral.api.deployment.v1.RevisionSummary:
      type: object
      properties:
        total:
          type: integer
          title: total
          format: int32
          description: Total number of component revisions in this deployment.
        succeeded:
          type: integer
          title: succeeded
          format: int32
          description: Number of revisions that completed successfully.
        failed:
          type: integer
          title: failed
          format: int32
          description: Number of revisions that failed.
        blocked:
          type: integer
          title: blocked
          format: int32
          description: Number of revisions that are blocked by upstream failures.
        running:
          type: integer
          title: running
          format: int32
          description: Number of revisions currently running (planning or applying).
        cancelled:
          type: integer
          title: cancelled
          format: int32
          description: Number of revisions that were cancelled.
        pending:
          type: integer
          title: pending
          format: int32
          description: Number of revisions that have not started yet.
      title: RevisionSummary
      additionalProperties: false
      description: |-
        RevisionSummary provides aggregate counts of revision statuses within a
         deployment, enabling quick status display without loading all revisions.
    admiral.api.deployment.v1.TerraformPlanSummary:
      type: object
      properties:
        additions:
          type: integer
          title: additions
          format: int32
          description: Number of resources to be created.
        changes:
          type: integer
          title: changes
          format: int32
          description: Number of resources to be updated in place.
        destructions:
          type: integer
          title: destructions
          format: int32
          description: Number of resources to be destroyed.
      title: TerraformPlanSummary
      additionalProperties: false
      description: TerraformPlanSummary provides resource change counts from a Terraform plan.
    admiral.api.environment.v1.CreateEnvironmentRequest:
      type: object
      allOf:
        - properties:
            applicationId:
              type: string
              title: application_id
              format: uuid
              description: The application to create this environment for (UUID).
            name:
              type: string
              title: name
              maxLength: 63
              minLength: 1
              pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
              description: |-
                URL-safe, human-readable identifier (e.g., "prod", "staging-us-east").
                 Must be unique within the application. Lowercase alphanumeric and hyphens only.
            description:
              type: string
              title: description
              maxLength: 1024
              description: Optional longer-form description of the environment's purpose.
            runtimeType:
              title: runtime_type
              description: |-
                The kind of runtime this environment targets. Optional — can be assigned
                 later via UpdateEnvironment.
              $ref: '#/components/schemas/admiral.api.environment.v1.RuntimeType'
            labels:
              type: object
              title: labels
              maxProperties: 64
              additionalProperties:
                type: string
                title: value
                maxLength: 256
              description: Arbitrary key-value labels for organizing and filtering environments.
            infrastructure:
              title: infrastructure
              description: Infrastructure execution settings (runner assignment).
              $ref: '#/components/schemas/admiral.api.environment.v1.InfrastructureConfig'
        - oneOf:
            - properties:
                kubernetes:
                  title: kubernetes
                  description: Kubernetes-specific settings (cluster, namespace).
                  $ref: '#/components/schemas/admiral.api.environment.v1.KubernetesConfig'
              title: kubernetes
              required:
                - kubernetes
      title: CreateEnvironmentRequest
      additionalProperties: false
      description: CreateEnvironmentRequest contains the parameters for creating a new environment.
    admiral.api.environment.v1.CreateEnvironmentRequest.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.environment.v1.CreateEnvironmentResponse:
      type: object
      properties:
        environment:
          title: environment
          description: The created environment.
          $ref: '#/components/schemas/admiral.api.environment.v1.Environment'
      title: CreateEnvironmentResponse
      additionalProperties: false
      description: CreateEnvironmentResponse contains the newly created environment.
    admiral.api.environment.v1.DeleteEnvironmentRequest:
      type: object
      properties:
        environmentId:
          type: string
          title: environment_id
          format: uuid
          description: The unique identifier of the environment to delete (UUID).
      title: DeleteEnvironmentRequest
      additionalProperties: false
      description: DeleteEnvironmentRequest identifies an environment to delete.
    admiral.api.environment.v1.DeleteEnvironmentResponse:
      type: object
      title: DeleteEnvironmentResponse
      additionalProperties: false
      description: DeleteEnvironmentResponse is empty on success.
    admiral.api.environment.v1.Environment:
      type: object
      allOf:
        - properties:
            id:
              type: string
              title: id
              format: uuid
              description: Unique identifier for the environment (UUID).
            applicationId:
              type: string
              title: application_id
              format: uuid
              description: The application this environment belongs to (UUID).
            name:
              type: string
              title: name
              maxLength: 63
              minLength: 1
              pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
              description: |-
                URL-safe, human-readable identifier (e.g., "prod", "staging-us-east").
                 Unique within the application. Lowercase alphanumeric and hyphens only,
                 must start with a letter and end with an alphanumeric character (1-63 chars).
            description:
              type: string
              title: description
              maxLength: 1024
              description: |-
                Optional longer-form description of the environment's purpose
                 (e.g., "US East production serving live traffic" or
                 "Shared staging for QA validation before prod promotion").
            runtimeType:
              title: runtime_type
              description: |-
                The kind of runtime this environment targets. Optional — can be assigned
                 after creation.
              $ref: '#/components/schemas/admiral.api.environment.v1.RuntimeType'
            labels:
              type: object
              title: labels
              maxProperties: 64
              additionalProperties:
                type: string
                title: value
                maxLength: 256
              description: |-
                Arbitrary key-value labels for organizing and filtering environments
                 (e.g., `{"region": "us-east-1", "tier": "production"}`).
            infrastructure:
              title: infrastructure
              description: |-
                Infrastructure execution settings (runner assignment). If unset,
                 infrastructure components in this environment cannot be deployed.
              $ref: '#/components/schemas/admiral.api.environment.v1.InfrastructureConfig'
            hasPendingChanges:
              type: boolean
              title: has_pending_changes
              description: |-
                Whether the environment has configuration changes that have not yet been
                 deployed. Server-derived by comparing current resolved config (variables,
                 component settings, overrides, source versions) against the last
                 successful deployment's snapshot. False if no successful deployment
                 exists yet (a fresh environment with no deployments returns false —
                 use `last_deployed_at` to distinguish "clean" from "never deployed").
            lastDeployedAt:
              title: last_deployed_at
              description: |-
                When the last successful deployment to this environment completed.
                 Absent if no successful deployment has occurred yet.
              $ref: '#/components/schemas/google.protobuf.Timestamp'
            createdBy:
              type: string
              title: created_by
              description: User ID who created this environment (UUID, server-populated from token).
            updatedBy:
              type: string
              title: updated_by
              description: User ID who last updated this environment (UUID, server-populated from token).
            createdAt:
              title: created_at
              description: When the environment was created.
              $ref: '#/components/schemas/google.protobuf.Timestamp'
            updatedAt:
              title: updated_at
              description: When the environment was last updated.
              $ref: '#/components/schemas/google.protobuf.Timestamp'
        - oneOf:
            - properties:
                kubernetes:
                  title: kubernetes
                  description: Kubernetes-specific settings (cluster, namespace).
                  $ref: '#/components/schemas/admiral.api.environment.v1.KubernetesConfig'
              title: kubernetes
              required:
                - kubernetes
      title: Environment
      additionalProperties: false
      description: |-
        Environment represents a named deployment target for an application. Each
         environment binds an application to a runtime where its workloads are deployed.
    admiral.api.environment.v1.Environment.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.environment.v1.GetEnvironmentRequest:
      type: object
      properties:
        environmentId:
          type: string
          title: environment_id
          format: uuid
          description: The unique identifier of the environment (UUID).
      title: GetEnvironmentRequest
      additionalProperties: false
      description: GetEnvironmentRequest identifies an environment to retrieve.
    admiral.api.environment.v1.GetEnvironmentResponse:
      type: object
      properties:
        environment:
          title: environment
          description: The environment record.
          $ref: '#/components/schemas/admiral.api.environment.v1.Environment'
      title: GetEnvironmentResponse
      additionalProperties: false
      description: GetEnvironmentResponse contains the environment record.
    admiral.api.environment.v1.InfrastructureConfig:
      type: object
      properties:
        runnerId:
          type: string
          title: runner_id
          format: uuid
          description: |-
            The runner that executes infrastructure operations for this environment (UUID).
             If unset, infrastructure components in this environment cannot be deployed.
      title: InfrastructureConfig
      additionalProperties: false
      description: |-
        InfrastructureConfig contains settings for infrastructure operations
         (Terraform plan/apply) within this environment.
    admiral.api.environment.v1.KubernetesConfig:
      type: object
      properties:
        clusterId:
          type: string
          title: cluster_id
          format: uuid
          description: The cluster this environment deploys to (UUID).
        namespace:
          type:
            - string
            - "null"
          title: namespace
          description: |-
            The Kubernetes namespace for this environment's workloads.
             Defaults to the environment name if not specified at deploy time.
      title: KubernetesConfig
      additionalProperties: false
      description: KubernetesConfig contains Kubernetes-specific settings for an environment.
    admiral.api.environment.v1.ListEnvironmentsRequest:
      type: object
      properties:
        filter:
          type: string
          title: filter
          maxLength: 1024
          description: Filter expression using the PEG filter DSL.
        pageSize:
          type: integer
          title: page_size
          maximum: 100
          minimum: 0
          format: int32
          description: Maximum number of environments to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListEnvironmentsRequest
      additionalProperties: false
      description: ListEnvironmentsRequest contains pagination and filter parameters.
    admiral.api.environment.v1.ListEnvironmentsResponse:
      type: object
      properties:
        environments:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.environment.v1.Environment'
          title: environments
          description: The list of environments.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListEnvironmentsResponse
      additionalProperties: false
      description: ListEnvironmentsResponse contains a page of environments.
    admiral.api.environment.v1.RuntimeType:
      type: string
      title: RuntimeType
      enum:
        - RUNTIME_TYPE_UNSPECIFIED
        - RUNTIME_TYPE_KUBERNETES
      description: RuntimeType identifies the kind of runtime an environment targets.
    admiral.api.environment.v1.UpdateEnvironmentRequest:
      type: object
      properties:
        environment:
          title: environment
          description: |-
            The environment with updated fields. The `id` field is required.
             Only fields specified in `update_mask` are updated.
          $ref: '#/components/schemas/admiral.api.environment.v1.Environment'
        updateMask:
          title: update_mask
          description: |-
            The set of fields to update. If unset, all mutable fields are updated.
             Supported fields: `name`, `description`, `runtime_type`, `kubernetes`,
             `labels`, `infrastructure`.
          $ref: '#/components/schemas/google.protobuf.FieldMask'
      title: UpdateEnvironmentRequest
      required:
        - environment
      additionalProperties: false
      description: UpdateEnvironmentRequest contains the environment fields to update.
    admiral.api.environment.v1.UpdateEnvironmentResponse:
      type: object
      properties:
        environment:
          title: environment
          description: The updated environment.
          $ref: '#/components/schemas/admiral.api.environment.v1.Environment'
      title: UpdateEnvironmentResponse
      additionalProperties: false
      description: UpdateEnvironmentResponse contains the updated environment.
    admiral.api.healthcheck.v1.HealthcheckRequest:
      type: object
      title: HealthcheckRequest
      additionalProperties: false
      description: |-
        HealthcheckRequest is the request message for Healthcheck.
         No parameters are required.
    admiral.api.healthcheck.v1.HealthcheckResponse:
      type: object
      title: HealthcheckResponse
      additionalProperties: false
      description: |-
        HealthcheckResponse is returned when the service is healthy.
         An empty response indicates the service is operating normally.
    admiral.api.runner.v1.ActiveJobInfo:
      type: object
      properties:
        jobId:
          type: string
          title: job_id
          format: uuid
          description: The job being executed (UUID).
        phase:
          title: phase
          description: Current execution phase reported by the worker thread.
          $ref: '#/components/schemas/admiral.api.runner.v1.JobPhase'
        startedAt:
          title: started_at
          description: When execution of this job started (when the runner claimed it).
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: ActiveJobInfo
      additionalProperties: false
      description: |-
        ActiveJobInfo summarizes a job currently being executed by a runner instance.
         Included in RunnerStatus to provide real-time job progress via heartbeat.
    admiral.api.runner.v1.ClaimJobRequest:
      type: object
      title: ClaimJobRequest
      additionalProperties: false
      description: |-
        ClaimJobRequest is sent by the runner to poll for available work.
         The runner is identified by the AGT's binding — no runner_id is required.
    admiral.api.runner.v1.ClaimJobResponse:
      type: object
      properties:
        job:
          title: job
          description: |-
            The job to execute. Absent if no work is available — the runner should
             wait and poll again after its configured interval.
          $ref: '#/components/schemas/admiral.api.runner.v1.Job'
      title: ClaimJobResponse
      additionalProperties: false
      description: ClaimJobResponse contains the next job to execute, if any.
    admiral.api.runner.v1.CreateRunnerRequest:
      type: object
      properties:
        name:
          type: string
          title: name
          maxLength: 63
          minLength: 1
          pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
          description: |-
            URL-safe, human-readable identifier (e.g., "prod-terraform-runner").
             Must be unique within the tenant. Lowercase alphanumeric and hyphens only.
        description:
          type: string
          title: description
          maxLength: 1024
          description: Optional longer-form description of the runner's purpose.
        kind:
          title: kind
          description: The type of operations this runner executes.
          $ref: '#/components/schemas/admiral.api.runner.v1.RunnerKind'
        labels:
          type: object
          title: labels
          maxProperties: 64
          additionalProperties:
            type: string
            title: value
            maxLength: 256
          description: Arbitrary key-value labels for organizing and filtering runners.
      title: CreateRunnerRequest
      additionalProperties: false
      description: CreateRunnerRequest contains the parameters for creating a new runner.
    admiral.api.runner.v1.CreateRunnerRequest.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.runner.v1.CreateRunnerResponse:
      type: object
      properties:
        runner:
          title: runner
          description: |-
            The created runner. Health status will be PENDING until the runner
             begins heartbeating.
          $ref: '#/components/schemas/admiral.api.runner.v1.Runner'
        plainTextToken:
          type: string
          title: plain_text_token
          description: |-
            The raw Agent Token secret (e.g., "adm_agt_pL2mN5oQ8rS1..."). This value
             is shown exactly once and cannot be retrieved again. Deploy this token to
             the runner binary for authentication.

             To create additional tokens (e.g., for rotation), use
             CreateRunnerToken (POST /v1/runners/{runner_id}/tokens).
      title: CreateRunnerResponse
      additionalProperties: false
      description: |-
        CreateRunnerResponse contains the newly created runner and its initial
         Agent Token (AGT).
    admiral.api.runner.v1.CreateRunnerTokenRequest:
      type: object
      properties:
        runnerId:
          type: string
          title: runner_id
          format: uuid
          description: The runner to bind this token to (UUID).
        name:
          type: string
          title: name
          maxLength: 63
          minLength: 1
          pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
          description: |-
            URL-safe, human-readable identifier for the token (e.g., "prod-runner-key").
             Must be unique within the runner's tokens. Lowercase alphanumeric and
             hyphens only.
        expiresAt:
          title: expires_at
          description: Optional expiration time. If unset, the token does not expire.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: CreateRunnerTokenRequest
      additionalProperties: false
      description: |-
        CreateRunnerTokenRequest contains the parameters for creating a new AGT
         bound to a runner.
    admiral.api.runner.v1.CreateRunnerTokenResponse:
      type: object
      properties:
        accessToken:
          title: access_token
          description: The created token metadata. Scopes are auto-assigned for runner AGTs.
          $ref: '#/components/schemas/admiral.common.v1.AccessToken'
        plainTextToken:
          type: string
          title: plain_text_token
          description: |-
            The raw token secret (e.g., "adm_agt_pL2mN5oQ8rS1..."). This value is
             shown exactly once and cannot be retrieved again. Store it securely.
      title: CreateRunnerTokenResponse
      additionalProperties: false
      description: CreateRunnerTokenResponse contains the newly created AGT.
    admiral.api.runner.v1.DeleteRunnerRequest:
      type: object
      properties:
        runnerId:
          type: string
          title: runner_id
          format: uuid
          description: |-
            The unique identifier of the runner to delete (UUID).
             All associated agent tokens will be revoked.
      title: DeleteRunnerRequest
      additionalProperties: false
      description: DeleteRunnerRequest identifies a runner to delete.
    admiral.api.runner.v1.DeleteRunnerResponse:
      type: object
      title: DeleteRunnerResponse
      additionalProperties: false
      description: DeleteRunnerResponse is empty on success.
    admiral.api.runner.v1.GetJobBundleRequest:
      type: object
      properties:
        jobId:
          type: string
          title: job_id
          format: uuid
          description: The job to fetch the bundle for (UUID).
      title: GetJobBundleRequest
      additionalProperties: false
      description: GetJobBundleRequest identifies a job whose artifact bundle to fetch.
    admiral.api.runner.v1.GetJobBundleResponse:
      type: object
      properties:
        bundle:
          title: bundle
          description: The artifact bundle with everything needed to execute the TF operation.
          $ref: '#/components/schemas/admiral.api.runner.v1.JobBundle'
      title: GetJobBundleResponse
      additionalProperties: false
      description: GetJobBundleResponse contains the rendered artifacts for execution.
    admiral.api.runner.v1.GetRunnerRequest:
      type: object
      properties:
        runnerId:
          type: string
          title: runner_id
          format: uuid
          description: The unique identifier of the runner (UUID).
      title: GetRunnerRequest
      additionalProperties: false
      description: GetRunnerRequest identifies a runner to retrieve.
    admiral.api.runner.v1.GetRunnerResponse:
      type: object
      properties:
        runner:
          title: runner
          description: The runner record, including server-derived health_status.
          $ref: '#/components/schemas/admiral.api.runner.v1.Runner'
      title: GetRunnerResponse
      additionalProperties: false
      description: GetRunnerResponse contains the runner record.
    admiral.api.runner.v1.GetRunnerStatusRequest:
      type: object
      properties:
        runnerId:
          type: string
          title: runner_id
          format: uuid
          description: The unique identifier of the runner (UUID).
      title: GetRunnerStatusRequest
      additionalProperties: false
      description: GetRunnerStatusRequest identifies a runner whose status to retrieve.
    admiral.api.runner.v1.GetRunnerStatusResponse:
      type: object
      properties:
        healthStatus:
          title: health_status
          description: Server-derived health status based on heartbeat recency and capacity.
          $ref: '#/components/schemas/admiral.api.runner.v1.RunnerHealthStatus'
        status:
          title: status
          description: |-
            Latest capacity snapshot from the runner. Absent if no heartbeat has
             been received yet.
          $ref: '#/components/schemas/admiral.api.runner.v1.RunnerStatus'
        reportedAt:
          title: reported_at
          description: When the latest heartbeat was received.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: GetRunnerStatusResponse
      additionalProperties: false
      description: |-
        GetRunnerStatusResponse contains the server-derived health status and the
         latest capacity snapshot. If no heartbeat has been received yet, the
         health_status will be PENDING and status will be absent.
    admiral.api.runner.v1.GetRunnerTokenRequest:
      type: object
      properties:
        runnerId:
          type: string
          title: runner_id
          format: uuid
          description: The runner the token belongs to (UUID).
        tokenId:
          type: string
          title: token_id
          format: uuid
          description: The unique identifier of the token (UUID).
      title: GetRunnerTokenRequest
      additionalProperties: false
      description: GetRunnerTokenRequest identifies a runner AGT to retrieve.
    admiral.api.runner.v1.GetRunnerTokenResponse:
      type: object
      properties:
        accessToken:
          title: access_token
          description: The token metadata. The token secret is never included.
          $ref: '#/components/schemas/admiral.common.v1.AccessToken'
      title: GetRunnerTokenResponse
      additionalProperties: false
      description: GetRunnerTokenResponse contains the requested runner AGT metadata.
    admiral.api.runner.v1.HeartbeatRequest:
      type: object
      properties:
        status:
          title: status
          description: Current capacity and telemetry metrics.
          $ref: '#/components/schemas/admiral.api.runner.v1.RunnerStatus'
        instanceId:
          type: string
          title: instance_id
          format: uuid
          description: |-
            Random UUID generated at process startup to distinguish multiple runner
             instances sharing the same AGT. The server uses this to track heartbeats
             per instance and aggregate capacity metrics across all instances of the
             same runner. A new instance_id is generated each time the runner process
             starts — it is not persisted across restarts.
      title: HeartbeatRequest
      required:
        - status
      additionalProperties: false
      description: |-
        HeartbeatRequest contains the runner's alive signal and current capacity.
         The runner is identified by the AGT's binding — no runner_id is required.
    admiral.api.runner.v1.HeartbeatResponse:
      type: object
      properties:
        ack:
          type: boolean
          title: ack
          description: Whether the heartbeat was accepted.
        nextHeartbeatSeconds:
          type: integer
          title: next_heartbeat_seconds
          format: int32
          description: |-
            Server-controlled interval (in seconds) before the runner should send
             its next heartbeat. Allows the server to adjust frequency dynamically.
      title: HeartbeatResponse
      additionalProperties: false
      description: HeartbeatResponse acknowledges the heartbeat.
    admiral.api.runner.v1.Job:
      type: object
      properties:
        id:
          type: string
          title: id
          format: uuid
          description: Unique identifier for the job (UUID).
        runnerId:
          type: string
          title: runner_id
          format: uuid
          description: The runner this job is assigned to (UUID).
        revisionId:
          type: string
          title: revision_id
          format: uuid
          description: The revision this job belongs to (UUID).
        deploymentId:
          type: string
          title: deployment_id
          format: uuid
          description: The deployment this job belongs to (UUID). Denormalized for convenience.
        jobType:
          title: job_type
          description: The type of Terraform operation to execute.
          $ref: '#/components/schemas/admiral.api.runner.v1.JobType'
        status:
          title: status
          description: Current lifecycle status of the job.
          $ref: '#/components/schemas/admiral.api.runner.v1.JobStatus'
        createdAt:
          title: created_at
          description: When the job was created.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        startedAt:
          title: started_at
          description: When the runner started executing the job.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        completedAt:
          title: completed_at
          description: When the job finished (succeeded, failed, or cancelled).
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: Job
      additionalProperties: false
      description: |-
        Job represents an infrastructure execution job assigned to a runner.
         Jobs bridge the Deployment/Revision system and the Runner execution plane.
    admiral.api.runner.v1.JobBundle:
      type: object
      properties:
        artifactUrl:
          type: string
          title: artifact_url
          description: |-
            Signed URL to download the rendered artifact bundle (tar.gz containing
             .tf files, .tfvars, etc.). Time-limited.
        artifactChecksum:
          type: string
          title: artifact_checksum
          description: SHA-256 checksum of the artifact bundle for integrity verification.
        variables:
          type: object
          title: variables
          additionalProperties:
            type: string
            title: value
          description: |-
            Resolved variable values to inject as TF_VAR_* environment variables.
             Sensitive values are included (runner is a trusted execution context).
        providerConfigs:
          type: object
          title: provider_configs
          additionalProperties:
            type: string
            title: value
          description: |-
            Provider configuration blocks (JSON-encoded). Keys are provider names
             (e.g., "aws", "google"), values are JSON objects with provider config.
        backendConfig:
          type: string
          title: backend_config
          description: |-
            Terraform backend configuration (JSON-encoded). Contains the backend
             type and its configuration for state storage.
        terraformVersion:
          type: string
          title: terraform_version
          description: The Terraform version to use for this operation (e.g., "1.7.5").
      title: JobBundle
      additionalProperties: false
      description: |-
        JobBundle contains everything a runner needs to execute a Terraform operation.
         Fetched separately from ClaimJob to keep the claim response lightweight.
    admiral.api.runner.v1.JobBundle.ProviderConfigsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: ProviderConfigsEntry
      additionalProperties: false
    admiral.api.runner.v1.JobBundle.VariablesEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: VariablesEntry
      additionalProperties: false
    admiral.api.runner.v1.JobPhase:
      type: string
      title: JobPhase
      enum:
        - JOB_PHASE_UNSPECIFIED
        - JOB_PHASE_INITIALIZING
        - JOB_PHASE_PLANNING
        - JOB_PHASE_APPLYING
        - JOB_PHASE_FINALIZING
      description: |-
        JobPhase represents the current execution phase of a job as reported by the
         runner's worker thread. Used in heartbeat payloads to give the server
         visibility into job progress between ClaimJob and ReportJobResult.
    admiral.api.runner.v1.JobResult:
      type: object
      properties:
        status:
          title: status
          description: The final status of the job (SUCCEEDED or FAILED).
          $ref: '#/components/schemas/admiral.api.runner.v1.JobStatus'
        planOutput:
          type: string
          title: plan_output
          description: (Plan jobs only) The Terraform plan output in human-readable format.
        planSummary:
          title: plan_summary
          description: (Plan jobs only) Summary of resource changes from the plan.
          $ref: '#/components/schemas/admiral.api.deployment.v1.TerraformPlanSummary'
        errorMessage:
          type: string
          title: error_message
          description: Error message if the job failed. Empty on success.
        logsUrl:
          type: string
          title: logs_url
          description: URL to the full execution logs in external storage.
        duration:
          title: duration
          description: How long the Terraform operation took to execute.
          $ref: '#/components/schemas/google.protobuf.Duration'
      title: JobResult
      additionalProperties: false
      description: JobResult contains the outcome of a completed job, reported by the runner.
    admiral.api.runner.v1.JobStatus:
      type: string
      title: JobStatus
      enum:
        - JOB_STATUS_UNSPECIFIED
        - JOB_STATUS_PENDING
        - JOB_STATUS_ASSIGNED
        - JOB_STATUS_RUNNING
        - JOB_STATUS_SUCCEEDED
        - JOB_STATUS_FAILED
        - JOB_STATUS_CANCELLED
      description: JobStatus represents the lifecycle state of a runner job.
    admiral.api.runner.v1.JobType:
      type: string
      title: JobType
      enum:
        - JOB_TYPE_UNSPECIFIED
        - JOB_TYPE_PLAN
        - JOB_TYPE_APPLY
        - JOB_TYPE_DESTROY_PLAN
        - JOB_TYPE_DESTROY_APPLY
      description: JobType identifies the kind of Terraform operation a job executes.
    admiral.api.runner.v1.ListRunnerJobsRequest:
      type: object
      properties:
        runnerId:
          type: string
          title: runner_id
          format: uuid
          description: The runner whose jobs to list (UUID).
        filter:
          type: string
          title: filter
          maxLength: 1024
          description: |-
            Filter expression using the PEG filter DSL.

             Common filter fields:
               - `status` — filter by job status.
               - `job_type` — filter by job type (PLAN, APPLY, etc.).
               - `deployment_id` — jobs for a specific deployment.
        pageSize:
          type: integer
          title: page_size
          maximum: 100
          minimum: 0
          format: int32
          description: Maximum number of jobs to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListRunnerJobsRequest
      additionalProperties: false
      description: |-
        ListRunnerJobsRequest contains pagination and filter parameters for listing
         jobs assigned to a specific runner.
    admiral.api.runner.v1.ListRunnerJobsResponse:
      type: object
      properties:
        jobs:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.runner.v1.Job'
          title: jobs
          description: The list of jobs, ordered from newest to oldest.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListRunnerJobsResponse
      additionalProperties: false
      description: ListRunnerJobsResponse contains a page of jobs.
    admiral.api.runner.v1.ListRunnerTokensRequest:
      type: object
      properties:
        runnerId:
          type: string
          title: runner_id
          format: uuid
          description: The runner to list tokens for (UUID).
        filter:
          type: string
          title: filter
          maxLength: 1024
          description: Filter expression using the PEG filter DSL.
        pageSize:
          type: integer
          title: page_size
          maximum: 100
          minimum: 0
          format: int32
          description: Maximum number of tokens to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListRunnerTokensRequest
      additionalProperties: false
      description: ListRunnerTokensRequest contains pagination and filter parameters.
    admiral.api.runner.v1.ListRunnerTokensResponse:
      type: object
      properties:
        accessTokens:
          type: array
          items:
            $ref: '#/components/schemas/admiral.common.v1.AccessToken'
          title: access_tokens
          description: The list of tokens. Token secrets are never included.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListRunnerTokensResponse
      additionalProperties: false
      description: ListRunnerTokensResponse contains a page of runner AGT metadata.
    admiral.api.runner.v1.ListRunnersRequest:
      type: object
      properties:
        filter:
          type: string
          title: filter
          maxLength: 1024
          description: Filter expression using the PEG filter DSL.
        pageSize:
          type: integer
          title: page_size
          maximum: 100
          minimum: 0
          format: int32
          description: Maximum number of runners to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListRunnersRequest
      additionalProperties: false
      description: ListRunnersRequest contains pagination and filter parameters.
    admiral.api.runner.v1.ListRunnersResponse:
      type: object
      properties:
        runners:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.runner.v1.Runner'
          title: runners
          description: The list of runners.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListRunnersResponse
      additionalProperties: false
      description: ListRunnersResponse contains a page of runners.
    admiral.api.runner.v1.ReportJobResultRequest:
      type: object
      properties:
        jobId:
          type: string
          title: job_id
          format: uuid
          description: The job being reported on (UUID).
        result:
          title: result
          description: The job result with status, outputs, and error information.
          $ref: '#/components/schemas/admiral.api.runner.v1.JobResult'
      title: ReportJobResultRequest
      required:
        - result
      additionalProperties: false
      description: ReportJobResultRequest contains the outcome of a completed job.
    admiral.api.runner.v1.ReportJobResultResponse:
      type: object
      properties:
        ack:
          type: boolean
          title: ack
          description: Whether the result was accepted.
      title: ReportJobResultResponse
      additionalProperties: false
      description: ReportJobResultResponse acknowledges the result.
    admiral.api.runner.v1.RevokeRunnerTokenRequest:
      type: object
      properties:
        runnerId:
          type: string
          title: runner_id
          format: uuid
          description: The runner the token belongs to (UUID).
        tokenId:
          type: string
          title: token_id
          format: uuid
          description: The unique identifier of the token to revoke (UUID).
      title: RevokeRunnerTokenRequest
      additionalProperties: false
      description: RevokeRunnerTokenRequest identifies a runner AGT to revoke.
    admiral.api.runner.v1.RevokeRunnerTokenResponse:
      type: object
      properties:
        accessToken:
          title: access_token
          description: The token metadata with updated status.
          $ref: '#/components/schemas/admiral.common.v1.AccessToken'
      title: RevokeRunnerTokenResponse
      additionalProperties: false
      description: RevokeRunnerTokenResponse contains the revoked runner AGT metadata.
    admiral.api.runner.v1.Runner:
      type: object
      properties:
        id:
          type: string
          title: id
          format: uuid
          description: Unique identifier for the runner (UUID).
        tenantId:
          type: string
          title: tenant_id
          format: uuid
          description: Tenant this runner belongs to (UUID).
        name:
          type: string
          title: name
          maxLength: 63
          minLength: 1
          pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
          description: |-
            URL-safe, human-readable identifier (e.g., "prod-terraform-runner").
             Unique within the tenant. Lowercase alphanumeric and hyphens only,
             must start with a letter and end with an alphanumeric character (1-63 chars).
        description:
          type: string
          title: description
          maxLength: 1024
          description: |-
            Optional longer-form description of the runner's purpose
             (e.g., "Terraform runner for production AWS infrastructure").
        kind:
          title: kind
          description: The type of operations this runner executes.
          $ref: '#/components/schemas/admiral.api.runner.v1.RunnerKind'
        labels:
          type: object
          title: labels
          maxProperties: 64
          additionalProperties:
            type: string
            title: value
            maxLength: 256
          description: |-
            Arbitrary key-value labels for organizing and filtering runners
             (e.g., `{"cloud": "aws", "team": "platform"}`).
        healthStatus:
          title: health_status
          description: Derived health status based on heartbeat recency and capacity.
          $ref: '#/components/schemas/admiral.api.runner.v1.RunnerHealthStatus'
        createdBy:
          type: string
          title: created_by
          description: User ID who created this runner (UUID, server-populated from token).
        updatedBy:
          type: string
          title: updated_by
          description: User ID who last updated this runner (UUID, server-populated from token).
        createdAt:
          title: created_at
          description: When the runner record was created.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        updatedAt:
          title: updated_at
          description: When the runner record was last updated.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: Runner
      additionalProperties: false
      description: |-
        Runner represents a registered infrastructure execution runner within a
         tenant. Runners claim and execute Terraform operations (plan, apply, destroy)
         dispatched by the deployment engine.
    admiral.api.runner.v1.Runner.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.runner.v1.RunnerHealthStatus:
      type: string
      title: RunnerHealthStatus
      enum:
        - RUNNER_HEALTH_STATUS_UNSPECIFIED
        - RUNNER_HEALTH_STATUS_PENDING
        - RUNNER_HEALTH_STATUS_HEALTHY
        - RUNNER_HEALTH_STATUS_DEGRADED
        - RUNNER_HEALTH_STATUS_UNREACHABLE
      description: |-
        RunnerHealthStatus represents the derived health state of a runner.
         The status is computed from heartbeat recency and capacity metrics.
    admiral.api.runner.v1.RunnerKind:
      type: string
      title: RunnerKind
      enum:
        - RUNNER_KIND_UNSPECIFIED
        - RUNNER_KIND_TERRAFORM
        - RUNNER_KIND_WORKFLOW
      description: RunnerKind identifies the type of operations a runner executes.
    admiral.api.runner.v1.RunnerStatus:
      type: object
      properties:
        version:
          type: string
          title: version
          description: The runner binary version (e.g., "1.2.0").
        activeJobs:
          type: integer
          title: active_jobs
          format: int32
          description: Number of jobs currently being executed by this runner.
        maxConcurrentJobs:
          type: integer
          title: max_concurrent_jobs
          format: int32
          description: Maximum number of concurrent jobs this runner supports.
        availableProviders:
          type: array
          items:
            type: string
          title: available_providers
          description: Terraform providers available on this runner (e.g., ["aws", "google", "azurerm"]).
        toolVersions:
          type: object
          title: tool_versions
          maxProperties: 32
          additionalProperties:
            type: string
            title: value
            maxLength: 32
            minLength: 1
          description: |-
            CLI tool versions installed on this runner, detected at startup and
             reported on every heartbeat. Visible to admins via GetRunnerStatus.
             The server uses tool_versions to match jobs to capable runners (e.g.,
             a job requiring Terraform 1.9.x will only be assigned to a runner
             reporting a compatible version).
             Keys are tool names (e.g., "terraform", "tofu", "helm", "kustomize", "kubectl").
             Values are semantic versions (e.g., "1.7.5", "1.9.0").
        activeJobDetails:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.runner.v1.ActiveJobInfo'
          title: active_job_details
          description: |-
            Details of jobs currently being executed by this runner instance. The
             worker thread updates job phase in shared memory; the heartbeat thread
             reads and includes it on each tick. Gives the server visibility into
             job progress for stuck-job detection and admin dashboards.
      title: RunnerStatus
      additionalProperties: false
      description: |-
        RunnerStatus contains capacity and telemetry metrics for a runner, as
         reported via Heartbeat. This message is used in both the push payload
         (HeartbeatRequest) and the read response (GetRunnerStatusResponse).

         Server-derived fields (health_status) are NOT included here — they live
         on the Runner record and are returned alongside this message in
         GetRunnerStatusResponse.
    admiral.api.runner.v1.RunnerStatus.ToolVersionsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: ToolVersionsEntry
      additionalProperties: false
    admiral.api.runner.v1.UpdateRunnerRequest:
      type: object
      properties:
        runner:
          title: runner
          description: |-
            The runner with updated fields. The `id` field is required.
             Only fields specified in `update_mask` are updated.
          $ref: '#/components/schemas/admiral.api.runner.v1.Runner'
        updateMask:
          title: update_mask
          description: |-
            The set of fields to update. If unset, all mutable fields are updated.
             Supported fields: `name`, `description`, `labels`.
          $ref: '#/components/schemas/google.protobuf.FieldMask'
      title: UpdateRunnerRequest
      required:
        - runner
      additionalProperties: false
      description: UpdateRunnerRequest contains the runner fields to update.
    admiral.api.runner.v1.UpdateRunnerResponse:
      type: object
      properties:
        runner:
          title: runner
          description: The updated runner.
          $ref: '#/components/schemas/admiral.api.runner.v1.Runner'
      title: UpdateRunnerResponse
      additionalProperties: false
      description: UpdateRunnerResponse contains the updated runner.
    admiral.api.source.v1.ArchiveConfig:
      type: object
      properties:
        path:
          type: string
          title: path
          description: Subdirectory within the extracted archive to use. Empty means archive root.
        checksum:
          type: string
          title: checksum
          description: |-
            Expected checksum for integrity verification (e.g., "sha256:abc123...").
             When set, the fetched archive is verified against this checksum before
             extraction.
      title: ArchiveConfig
      additionalProperties: false
      description: |-
        ArchiveConfig provides additional parameters for archive sources
         (tar.gz, zip) fetched via HTTP, S3, or GCS.
    admiral.api.source.v1.CreateSourceRequest:
      type: object
      allOf:
        - properties:
            name:
              type: string
              title: name
              maxLength: 63
              minLength: 1
              pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
              description: URL-safe, human-readable identifier. Must be unique within the tenant.
            description:
              type: string
              title: description
              maxLength: 1024
              description: Optional description of the source's purpose.
            type:
              not:
                enum:
                  - SOURCE_TYPE_UNSPECIFIED
              title: type
              description: The kind of artifact and fetch protocol.
              $ref: '#/components/schemas/admiral.api.source.v1.SourceType'
            url:
              type: string
              title: url
              minLength: 1
              description: Base URL for the source (see Source.url for per-type semantics).
            connectionId:
              type:
                - string
                - "null"
              title: connection_id
              format: uuid
              description: |-
                Reference to the connection providing credentials (UUID). Optional for
                 public sources.
            catalog:
              type: boolean
              title: catalog
              description: Whether this is a curated catalog entry.
            labels:
              type: object
              title: labels
              maxProperties: 64
              additionalProperties:
                type: string
                title: value
                maxLength: 256
              description: Arbitrary key-value labels.
        - oneOf:
            - properties:
                archive:
                  title: archive
                  $ref: '#/components/schemas/admiral.api.source.v1.ArchiveConfig'
              title: archive
              required:
                - archive
            - properties:
                helmGit:
                  title: helm_git
                  $ref: '#/components/schemas/admiral.api.source.v1.HelmGitConfig'
              title: helm_git
              required:
                - helmGit
            - properties:
                helmOci:
                  title: helm_oci
                  $ref: '#/components/schemas/admiral.api.source.v1.HelmOCIConfig'
              title: helm_oci
              required:
                - helmOci
            - properties:
                helmRepository:
                  title: helm_repository
                  $ref: '#/components/schemas/admiral.api.source.v1.HelmRepositoryConfig'
              title: helm_repository
              required:
                - helmRepository
            - properties:
                kustomizeGit:
                  title: kustomize_git
                  $ref: '#/components/schemas/admiral.api.source.v1.KustomizeGitConfig'
              title: kustomize_git
              required:
                - kustomizeGit
            - properties:
                manifestGit:
                  title: manifest_git
                  $ref: '#/components/schemas/admiral.api.source.v1.ManifestGitConfig'
              title: manifest_git
              required:
                - manifestGit
            - properties:
                terraformGit:
                  title: terraform_git
                  $ref: '#/components/schemas/admiral.api.source.v1.TerraformGitConfig'
              title: terraform_git
              required:
                - terraformGit
            - properties:
                terraformRegistry:
                  title: terraform_registry
                  $ref: '#/components/schemas/admiral.api.source.v1.TerraformRegistryConfig'
              title: terraform_registry
              required:
                - terraformRegistry
      title: CreateSourceRequest
      additionalProperties: false
      description: CreateSourceRequest contains the parameters for creating a new source.
    admiral.api.source.v1.CreateSourceRequest.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.source.v1.CreateSourceResponse:
      type: object
      properties:
        source:
          title: source
          description: The created source.
          $ref: '#/components/schemas/admiral.api.source.v1.Source'
      title: CreateSourceResponse
      additionalProperties: false
      description: CreateSourceResponse contains the newly created source.
    admiral.api.source.v1.DeleteSourceRequest:
      type: object
      properties:
        sourceId:
          type: string
          title: source_id
          format: uuid
          description: |-
            The unique identifier of the source to delete (UUID).
             Fails if any application components still reference this source.
      title: DeleteSourceRequest
      additionalProperties: false
      description: DeleteSourceRequest identifies a source to delete.
    admiral.api.source.v1.DeleteSourceResponse:
      type: object
      title: DeleteSourceResponse
      additionalProperties: false
      description: DeleteSourceResponse is empty on success.
    admiral.api.source.v1.GetSourceInputsRequest:
      type: object
      properties:
        sourceId:
          type: string
          title: source_id
          format: uuid
          description: The source to inspect (UUID).
        version:
          type: string
          title: version
          minLength: 1
          description: |-
            The version to inspect. For registry sources, a semver string. For Git
             sources, a tag, branch, or commit SHA. Required.
      title: GetSourceInputsRequest
      additionalProperties: false
      description: |-
        GetSourceInputsRequest fetches discoverable inputs for a source at a
         specific version.
    admiral.api.source.v1.GetSourceInputsResponse:
      type: object
      properties:
        inputs:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.source.v1.SourceInput'
          title: inputs
          description: |-
            Discovered input parameters. Empty for source types that do not support
             input discovery (Kustomize, raw manifests).
        resolvedVersion:
          type: string
          title: resolved_version
          description: |-
            The version that was actually inspected (resolved from the requested
             version — e.g., a branch name resolved to a commit SHA).
      title: GetSourceInputsResponse
      additionalProperties: false
      description: |-
        GetSourceInputsResponse contains the discovered inputs for the source at
         the requested version.
    admiral.api.source.v1.GetSourceOutputsRequest:
      type: object
      properties:
        sourceId:
          type: string
          title: source_id
          format: uuid
          description: The source to inspect (UUID).
        version:
          type: string
          title: version
          minLength: 1
          description: The version to inspect. Required.
      title: GetSourceOutputsRequest
      additionalProperties: false
      description: |-
        GetSourceOutputsRequest fetches discoverable outputs for a source at a
         specific version.
    admiral.api.source.v1.GetSourceOutputsResponse:
      type: object
      properties:
        outputs:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.source.v1.SourceOutput'
          title: outputs
          description: |-
            Discovered output definitions. Only populated for Terraform module sources.
             Workload sources (Helm, Kustomize, manifests) do not have formal outputs —
             workload component outputs are user-declared at the component level.
        resolvedVersion:
          type: string
          title: resolved_version
          description: The version that was actually inspected.
      title: GetSourceOutputsResponse
      additionalProperties: false
      description: |-
        GetSourceOutputsResponse contains the discovered outputs for the source at
         the requested version.
    admiral.api.source.v1.GetSourceRequest:
      type: object
      properties:
        sourceId:
          type: string
          title: source_id
          format: uuid
          description: The unique identifier of the source (UUID).
      title: GetSourceRequest
      additionalProperties: false
      description: GetSourceRequest identifies a source to retrieve.
    admiral.api.source.v1.GetSourceResponse:
      type: object
      properties:
        source:
          title: source
          description: The source record.
          $ref: '#/components/schemas/admiral.api.source.v1.Source'
      title: GetSourceResponse
      additionalProperties: false
      description: GetSourceResponse contains the source record.
    admiral.api.source.v1.HelmGitConfig:
      type: object
      properties:
        path:
          type: string
          title: path
          minLength: 1
          description: Path within the repository to the chart directory (must contain Chart.yaml).
        defaultRef:
          type: string
          title: default_ref
          description: Default Git ref (branch, tag, or commit SHA).
      title: HelmGitConfig
      additionalProperties: false
      description: |-
        HelmGitConfig provides additional parameters for Helm charts sourced from
         Git repositories.
    admiral.api.source.v1.HelmOCIConfig:
      type: object
      properties:
        repository:
          type: string
          title: repository
          minLength: 1
          description: |-
            The full OCI repository path (e.g., "ghcr.io/myorg/charts/my-app").
             The url field on the Source message holds the registry host, while this
             field holds the full repository path.
      title: HelmOCIConfig
      additionalProperties: false
      description: |-
        HelmOCIConfig provides additional parameters for Helm charts stored in
         OCI registries.
    admiral.api.source.v1.HelmRepositoryConfig:
      type: object
      properties:
        chartName:
          type: string
          title: chart_name
          minLength: 1
          description: The chart name within the repository (e.g., "nginx-ingress", "redis").
      title: HelmRepositoryConfig
      additionalProperties: false
      description: |-
        HelmRepositoryConfig provides additional parameters for Helm charts from
         classic HTTP/S chart repositories.
    admiral.api.source.v1.KustomizeGitConfig:
      type: object
      properties:
        path:
          type: string
          title: path
          minLength: 1
          description: |-
            Path within the repository to the overlay directory (must contain
             kustomization.yaml).
        defaultRef:
          type: string
          title: default_ref
          description: Default Git ref (branch, tag, or commit SHA).
      title: KustomizeGitConfig
      additionalProperties: false
      description: |-
        KustomizeGitConfig provides additional parameters for Kustomize overlays
         sourced from Git repositories.
    admiral.api.source.v1.ListSourceVersionsRequest:
      type: object
      properties:
        sourceId:
          type: string
          title: source_id
          format: uuid
          description: The source to query versions for (UUID).
        pageSize:
          type: integer
          title: page_size
          maximum: 100
          minimum: 0
          format: int32
          description: Maximum number of versions to return. Defaults to 50.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token for fetching additional versions.
      title: ListSourceVersionsRequest
      additionalProperties: false
      description: ListSourceVersionsRequest queries available versions for a source.
    admiral.api.source.v1.ListSourceVersionsResponse:
      type: object
      properties:
        versions:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.source.v1.SourceVersion'
          title: versions
          description: Available versions, ordered from newest to oldest.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListSourceVersionsResponse
      additionalProperties: false
      description: ListSourceVersionsResponse contains available versions from the external system.
    admiral.api.source.v1.ListSourcesRequest:
      type: object
      properties:
        filter:
          type: string
          title: filter
          maxLength: 1024
          description: Filter expression using the PEG filter DSL.
        pageSize:
          type: integer
          title: page_size
          maximum: 100
          minimum: 0
          format: int32
          description: Maximum number of sources to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListSourcesRequest
      additionalProperties: false
      description: ListSourcesRequest contains pagination and filter parameters.
    admiral.api.source.v1.ListSourcesResponse:
      type: object
      properties:
        sources:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.source.v1.Source'
          title: sources
          description: The list of sources.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListSourcesResponse
      additionalProperties: false
      description: ListSourcesResponse contains a page of sources.
    admiral.api.source.v1.ManifestGitConfig:
      type: object
      properties:
        path:
          type: string
          title: path
          minLength: 1
          description: |-
            Path within the repository to the directory containing manifest files.
             All .yaml, .yml, and .json files in this directory are collected.
        recursive:
          type: boolean
          title: recursive
          description: Whether to recursively include files from subdirectories.
        defaultRef:
          type: string
          title: default_ref
          description: Default Git ref (branch, tag, or commit SHA).
      title: ManifestGitConfig
      additionalProperties: false
      description: |-
        ManifestGitConfig provides additional parameters for raw Kubernetes manifests
         sourced from Git repositories.
    admiral.api.source.v1.Source:
      type: object
      allOf:
        - properties:
            id:
              type: string
              title: id
              format: uuid
              description: Unique identifier for the source (UUID).
            tenantId:
              type: string
              title: tenant_id
              format: uuid
              description: Tenant this source belongs to (UUID).
            name:
              type: string
              title: name
              maxLength: 63
              minLength: 1
              pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
              description: |-
                URL-safe, human-readable identifier (e.g., "corporate-rds", "nginx-chart").
                 Unique within the tenant. Lowercase alphanumeric and hyphens only, must
                 start with a letter and end with an alphanumeric character (1-63 chars).
            description:
              type: string
              title: description
              maxLength: 1024
              description: |-
                Optional longer-form description of the source's purpose
                 (e.g., "Corporate-approved RDS module with encryption and backups").
            type:
              title: type
              description: The kind of artifact and fetch protocol.
              $ref: '#/components/schemas/admiral.api.source.v1.SourceType'
            url:
              type: string
              title: url
              minLength: 1
              description: |-
                Base URL for the source. The meaning varies by source type:
                   - TERRAFORM_REGISTRY: registry hostname (e.g., "registry.terraform.io")
                   - TERRAFORM_GIT, HELM_GIT, KUSTOMIZE_GIT, MANIFEST_GIT: Git repo URL
                   - HELM_REPOSITORY: Helm repo URL (e.g., "https://charts.bitnami.com/bitnami")
                   - HELM_OCI: OCI registry URL (e.g., "oci://ghcr.io")
                   - ARCHIVE: HTTP/S3/GCS URL to the archive
            connectionId:
              type:
                - string
                - "null"
              title: connection_id
              format: uuid
              description: |-
                Reference to the connection providing credentials for this source (UUID).
                 Optional — null for public sources that require no authentication
                 (e.g., public Terraform registry, public Helm repos).
            catalog:
              type: boolean
              title: catalog
              description: |-
                Whether this source is a curated catalog entry. Catalog sources are managed
                 by platform engineers and may be the only sources available to developers
                 if the organization enforces catalog-only policy.
            labels:
              type: object
              title: labels
              maxProperties: 64
              additionalProperties:
                type: string
                title: value
                maxLength: 256
              description: |-
                Arbitrary key-value labels for organizing and filtering sources
                 (e.g., `{"team": "platform", "category": "database"}`).
            createdBy:
              type: string
              title: created_by
              description: User ID who created this source (UUID, server-populated from token).
            updatedBy:
              type: string
              title: updated_by
              description: User ID who last updated this source (UUID, server-populated from token).
            lastSyncedAt:
              title: last_synced_at
              description: |-
                When the source metadata was last synced from the external system
                 (registry, Git, Helm repo). Updated by SyncSource and by automatic
                 background refresh when discovery RPCs encounter stale cached data.
                 Absent if no sync has occurred yet.
              $ref: '#/components/schemas/google.protobuf.Timestamp'
            createdAt:
              title: created_at
              description: When the source was created.
              $ref: '#/components/schemas/google.protobuf.Timestamp'
            updatedAt:
              title: updated_at
              description: When the source was last updated.
              $ref: '#/components/schemas/google.protobuf.Timestamp'
        - oneOf:
            - properties:
                archive:
                  title: archive
                  description: Archive config (for SOURCE_TYPE_ARCHIVE).
                  $ref: '#/components/schemas/admiral.api.source.v1.ArchiveConfig'
              title: archive
              required:
                - archive
            - properties:
                helmGit:
                  title: helm_git
                  description: Helm Git config (for SOURCE_TYPE_HELM_GIT).
                  $ref: '#/components/schemas/admiral.api.source.v1.HelmGitConfig'
              title: helm_git
              required:
                - helmGit
            - properties:
                helmOci:
                  title: helm_oci
                  description: Helm OCI config (for SOURCE_TYPE_HELM_OCI).
                  $ref: '#/components/schemas/admiral.api.source.v1.HelmOCIConfig'
              title: helm_oci
              required:
                - helmOci
            - properties:
                helmRepository:
                  title: helm_repository
                  description: Helm HTTP repository config (for SOURCE_TYPE_HELM_REPOSITORY).
                  $ref: '#/components/schemas/admiral.api.source.v1.HelmRepositoryConfig'
              title: helm_repository
              required:
                - helmRepository
            - properties:
                kustomizeGit:
                  title: kustomize_git
                  description: Kustomize Git config (for SOURCE_TYPE_KUSTOMIZE_GIT).
                  $ref: '#/components/schemas/admiral.api.source.v1.KustomizeGitConfig'
              title: kustomize_git
              required:
                - kustomizeGit
            - properties:
                manifestGit:
                  title: manifest_git
                  description: Raw manifest Git config (for SOURCE_TYPE_MANIFEST_GIT).
                  $ref: '#/components/schemas/admiral.api.source.v1.ManifestGitConfig'
              title: manifest_git
              required:
                - manifestGit
            - properties:
                terraformGit:
                  title: terraform_git
                  description: Terraform Git module config (for SOURCE_TYPE_TERRAFORM_GIT).
                  $ref: '#/components/schemas/admiral.api.source.v1.TerraformGitConfig'
              title: terraform_git
              required:
                - terraformGit
            - properties:
                terraformRegistry:
                  title: terraform_registry
                  description: Terraform Registry Protocol config (for SOURCE_TYPE_TERRAFORM_REGISTRY).
                  $ref: '#/components/schemas/admiral.api.source.v1.TerraformRegistryConfig'
              title: terraform_registry
              required:
                - terraformRegistry
      title: Source
      additionalProperties: false
      description: |-
        Source represents a fetchable artifact definition — a pointer to an external
         module, chart, or manifest set that Admiral can fetch, inspect, and render
         into deployment snapshots.

         Sources are tenant-scoped and optionally marked as catalog entries (curated,
         pre-approved artifacts managed by platform engineers).
    admiral.api.source.v1.Source.LabelsEntry:
      type: object
      properties:
        key:
          type: string
          title: key
        value:
          type: string
          title: value
      title: LabelsEntry
      additionalProperties: false
    admiral.api.source.v1.SourceInput:
      type: object
      properties:
        name:
          type: string
          title: name
          description: Parameter name (e.g., "instance_class", "replicaCount").
        type:
          type: string
          title: type
          description: |-
            Type constraint as a string. For Terraform: HCL type expression
             (e.g., "string", "number", "list(string)", "object({name=string})").
             For Helm: JSON Schema type (e.g., "string", "integer", "object").
             Empty if type cannot be determined.
        description:
          type: string
          title: description
          description: |-
            Human-readable description of the parameter. From Terraform variable
             description or Helm values.schema.json description field.
        defaultValue:
          type:
            - string
            - "null"
          title: default_value
          description: |-
            JSON-encoded default value. Null/absent means no default (parameter is
             required). For Terraform, this is the default from the variable block.
             For Helm, this is the value from values.yaml.
        required:
          type: boolean
          title: required
          description: |-
            Whether this parameter is required (no default value provided).
             For Terraform: true when the variable has no default.
             For Helm: true when values.schema.json marks it as required.
        sensitive:
          type: boolean
          title: sensitive
          description: |-
            Whether this parameter is sensitive (should be masked in logs and UI).
             For Terraform: from the variable's sensitive attribute.
             For Helm: not typically available.
      title: SourceInput
      additionalProperties: false
      description: |-
        SourceInput represents a configurable parameter discovered from the source
         artifact. For Terraform modules, these are variable blocks. For Helm charts,
         these are entries from values.yaml (with optional type info from
         values.schema.json).
    admiral.api.source.v1.SourceOutput:
      type: object
      properties:
        name:
          type: string
          title: name
          description: Output name (e.g., "endpoint", "db_arn", "connection_string").
        type:
          type: string
          title: type
          description: Type of the output value, if declared (e.g., "string", "list(string)").
        description:
          type: string
          title: description
          description: Human-readable description of the output.
        sensitive:
          type: boolean
          title: sensitive
          description: Whether this output is sensitive (masked in logs and CLI output).
      title: SourceOutput
      additionalProperties: false
      description: |-
        SourceOutput represents a value produced by the source after apply. Only
         meaningful for Terraform modules, which declare formal output blocks.
         Workload sources (Helm, Kustomize, manifests) do not have formal outputs —
         workload component outputs are user-declared at the component level, not
         discovered from the source.
    admiral.api.source.v1.SourceType:
      type: string
      title: SourceType
      enum:
        - SOURCE_TYPE_UNSPECIFIED
        - SOURCE_TYPE_TERRAFORM_REGISTRY
        - SOURCE_TYPE_TERRAFORM_GIT
        - SOURCE_TYPE_HELM_REPOSITORY
        - SOURCE_TYPE_HELM_OCI
        - SOURCE_TYPE_HELM_GIT
        - SOURCE_TYPE_KUSTOMIZE_GIT
        - SOURCE_TYPE_MANIFEST_GIT
        - SOURCE_TYPE_ARCHIVE
      description: SourceType identifies the kind of artifact and the protocol used to fetch it.
    admiral.api.source.v1.SourceVersion:
      type: object
      properties:
        version:
          type: string
          title: version
          description: |-
            Version identifier. For registry sources, this is a semver string
             (e.g., "1.2.3"). For Git sources, this is a tag name (e.g., "v1.2.3").
             For OCI, this is a tag.
        publishedAt:
          title: published_at
          description: |-
            When this version was published or tagged. May not be available for all
             source types.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        description:
          type: string
          title: description
          description: |-
            Optional description or release notes for this version. Typically only
             available from registry sources.
      title: SourceVersion
      additionalProperties: false
      description: |-
        SourceVersion represents an available version of a source artifact, as
         reported by the external system (registry, repository, Git tags).
    admiral.api.source.v1.SyncSourceRequest:
      type: object
      properties:
        sourceId:
          type: string
          title: source_id
          format: uuid
          description: The source to sync (UUID).
      title: SyncSourceRequest
      additionalProperties: false
      description: SyncSourceRequest triggers a metadata refresh for a source.
    admiral.api.source.v1.SyncSourceResponse:
      type: object
      properties:
        source:
          title: source
          description: The source with refreshed metadata.
          $ref: '#/components/schemas/admiral.api.source.v1.Source'
      title: SyncSourceResponse
      additionalProperties: false
      description: SyncSourceResponse confirms the sync was triggered.
    admiral.api.source.v1.TerraformGitConfig:
      type: object
      properties:
        path:
          type: string
          title: path
          description: |-
            Subdirectory within the repository containing the module root.
             Uses double-slash convention (e.g., "modules/vpc"). Empty means repo root.
        defaultRef:
          type: string
          title: default_ref
          description: |-
            Default Git ref (branch, tag, or commit SHA) to use when no version is
             specified. Typically a branch name like "main" or a tag like "v1.0.0".
      title: TerraformGitConfig
      additionalProperties: false
      description: |-
        TerraformGitConfig provides additional parameters for Terraform modules
         sourced from Git repositories.
    admiral.api.source.v1.TerraformRegistryConfig:
      type: object
      properties:
        namespace:
          type: string
          title: namespace
          minLength: 1
          description: Module namespace in the registry (e.g., "hashicorp", "myorg").
        moduleName:
          type: string
          title: module_name
          minLength: 1
          description: Module name in the registry (e.g., "consul", "rds").
        system:
          type: string
          title: system
          minLength: 1
          description: Target system / provider (e.g., "aws", "azurerm", "google").
      title: TerraformRegistryConfig
      additionalProperties: false
      description: |-
        TerraformRegistryConfig provides additional parameters for Terraform module
         registry sources.
    admiral.api.source.v1.UpdateSourceRequest:
      type: object
      properties:
        source:
          title: source
          description: |-
            The source with updated fields. The `id` field is required.
             Only fields specified in `update_mask` are updated.
          $ref: '#/components/schemas/admiral.api.source.v1.Source'
        updateMask:
          title: update_mask
          description: |-
            The set of fields to update. If unset, all mutable fields are updated.
             Supported fields: `name`, `description`, `url`, `connection_id`, `catalog`,
             `source_config`, `labels`.
          $ref: '#/components/schemas/google.protobuf.FieldMask'
      title: UpdateSourceRequest
      required:
        - source
      additionalProperties: false
      description: UpdateSourceRequest contains the source fields to update.
    admiral.api.source.v1.UpdateSourceResponse:
      type: object
      properties:
        source:
          title: source
          description: The updated source.
          $ref: '#/components/schemas/admiral.api.source.v1.Source'
      title: UpdateSourceResponse
      additionalProperties: false
      description: UpdateSourceResponse contains the updated source.
    admiral.api.state.v1.DeleteStateRequest:
      type: object
      properties:
        stateId:
          type: string
          title: state_id
          format: uuid
          description: |-
            The unique identifier of the state record to delete (UUID).
             Fails if the state is currently locked — force-unlock first.
      title: DeleteStateRequest
      additionalProperties: false
      description: DeleteStateRequest identifies a state record to permanently delete.
    admiral.api.state.v1.DeleteStateResponse:
      type: object
      title: DeleteStateResponse
      additionalProperties: false
      description: DeleteStateResponse is empty on success.
    admiral.api.state.v1.ForceUnlockStateRequest:
      type: object
      properties:
        stateId:
          type: string
          title: state_id
          format: uuid
          description: The state record to force-unlock (UUID).
        reason:
          type: string
          title: reason
          maxLength: 1024
          description: |-
            Reason for force-unlocking (audited). Recommended to provide context
             for why the lock is being broken (e.g., "runner crashed during apply").
      title: ForceUnlockStateRequest
      additionalProperties: false
      description: ForceUnlockStateRequest identifies a state to force-unlock.
    admiral.api.state.v1.ForceUnlockStateResponse:
      type: object
      title: ForceUnlockStateResponse
      additionalProperties: false
      description: ForceUnlockStateResponse confirms the lock was forcefully released.
    admiral.api.state.v1.GetCurrentStateRequest:
      type: object
      properties:
        stateId:
          type: string
          title: state_id
          format: uuid
          description: The unique identifier of the state record (UUID).
      title: GetCurrentStateRequest
      additionalProperties: false
      description: GetCurrentStateRequest identifies a state record to retrieve.
    admiral.api.state.v1.GetCurrentStateResponse:
      type: object
      properties:
        state:
          title: state
          description: The state record including current data and any active lock.
          $ref: '#/components/schemas/admiral.api.state.v1.State'
      title: GetCurrentStateResponse
      additionalProperties: false
      description: |-
        GetCurrentStateResponse contains the state record with current data and
         lock info.
    admiral.api.state.v1.GetStateRequest:
      type: object
      properties:
        jobId:
          type: string
          title: job_id
          format: uuid
          description: |-
            The job to fetch state for (UUID). The server resolves the component
             and environment from the job's binding.
      title: GetStateRequest
      additionalProperties: false
      description: GetStateRequest fetches the current state for a job.
    admiral.api.state.v1.GetStateResponse:
      type: object
      properties:
        data:
          type: string
          title: data
          format: byte
          description: |-
            The raw Terraform state data (JSON-encoded). Empty if no state exists
             yet (fresh init — Terraform handles this gracefully).
      title: GetStateResponse
      additionalProperties: false
      description: GetStateResponse contains the current state data.
    admiral.api.state.v1.GetStateVersionRequest:
      type: object
      properties:
        stateId:
          type: string
          title: state_id
          format: uuid
          description: The state record (UUID).
        serial:
          type:
            - integer
            - string
          title: serial
          format: int64
          description: The serial number of the version to retrieve.
      title: GetStateVersionRequest
      additionalProperties: false
      description: GetStateVersionRequest identifies a specific historical state version.
    admiral.api.state.v1.GetStateVersionResponse:
      type: object
      properties:
        version:
          title: version
          description: The state version metadata.
          $ref: '#/components/schemas/admiral.api.state.v1.StateVersion'
        data:
          type: string
          title: data
          format: byte
          description: The raw Terraform state data (JSON-encoded) at this serial.
      title: GetStateVersionResponse
      additionalProperties: false
      description: |-
        GetStateVersionResponse contains the full state data at a historical serial.
         Returns both the version metadata and the raw data separately — the
         StateVersion message intentionally omits data to keep ListStateVersions
         lightweight.
    admiral.api.state.v1.ListStateVersionsRequest:
      type: object
      properties:
        stateId:
          type: string
          title: state_id
          format: uuid
          description: The state record to list versions for (UUID).
        pageSize:
          type: integer
          title: page_size
          maximum: 100
          minimum: 0
          format: int32
          description: Maximum number of versions to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListStateVersionsRequest
      additionalProperties: false
      description: ListStateVersionsRequest contains pagination parameters for version history.
    admiral.api.state.v1.ListStateVersionsResponse:
      type: object
      properties:
        versions:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.state.v1.StateVersion'
          title: versions
          description: The list of state versions, ordered from newest to oldest.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListStateVersionsResponse
      additionalProperties: false
      description: ListStateVersionsResponse contains a page of state version metadata.
    admiral.api.state.v1.ListStatesRequest:
      type: object
      properties:
        filter:
          type: string
          title: filter
          maxLength: 1024
          description: |-
            Filter expression using the PEG filter DSL.

             Common filter fields:
               - `component_id` — states for a specific component (UUID).
               - `environment_id` — states for a specific environment (UUID).
               - `application_id` — states for all components belonging to an
                 application (UUID). The server resolves the application's components
                 and returns states for all of them. Can be combined with
                 `environment_id`.
        pageSize:
          type: integer
          title: page_size
          maximum: 100
          minimum: 0
          format: int32
          description: Maximum number of states to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListStatesRequest
      additionalProperties: false
      description: ListStatesRequest contains pagination and filter parameters.
    admiral.api.state.v1.ListStatesResponse:
      type: object
      properties:
        states:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.state.v1.StateSummary'
          title: states
          description: |-
            The list of state summaries (metadata only, no state data blob).
             Use GetCurrentState to fetch full data for a specific record.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListStatesResponse
      additionalProperties: false
      description: ListStatesResponse contains a page of state metadata.
    admiral.api.state.v1.LockStateRequest:
      type: object
      properties:
        jobId:
          type: string
          title: job_id
          format: uuid
          description: The job requesting the lock (UUID).
        lockId:
          type: string
          title: lock_id
          format: uuid
          description: Terraform-generated lock ID (UUID).
        operation:
          type: string
          title: operation
          description: The Terraform operation requesting the lock.
        who:
          type: string
          title: who
          description: Identifier of who is requesting the lock.
        version:
          type: string
          title: version
          description: Terraform/OpenTofu version of the client requesting the lock.
      title: LockStateRequest
      additionalProperties: false
      description: LockStateRequest acquires an exclusive lock on the job's state.
    admiral.api.state.v1.LockStateResponse:
      type: object
      title: LockStateResponse
      additionalProperties: false
      description: LockStateResponse confirms the lock was acquired.
    admiral.api.state.v1.PushStateRequest:
      type: object
      properties:
        jobId:
          type: string
          title: job_id
          format: uuid
          description: The job pushing state (UUID).
        data:
          type: string
          title: data
          maxLength: 67108864
          minLength: 1
          format: byte
          description: The raw Terraform state data (JSON-encoded). Maximum 64 MiB.
        md5:
          type: string
          title: md5
          minLength: 1
          description: MD5 hash of the state data.
        serial:
          type:
            - integer
            - string
          title: serial
          format: int64
          description: Terraform state serial number. Must be greater than the current serial.
        lineage:
          type: string
          title: lineage
          minLength: 1
          description: |-
            Terraform state lineage. Must match the existing lineage if the state
             record already exists.
      title: PushStateRequest
      additionalProperties: false
      description: PushStateRequest stores a new state version.
    admiral.api.state.v1.PushStateResponse:
      type: object
      title: PushStateResponse
      additionalProperties: false
      description: PushStateResponse acknowledges the state was stored.
    admiral.api.state.v1.State:
      type: object
      properties:
        id:
          type: string
          title: id
          format: uuid
          description: Unique identifier for the state record (UUID, server-generated).
        componentId:
          type: string
          title: component_id
          format: uuid
          description: The infrastructure component this state belongs to (UUID).
        environmentId:
          type: string
          title: environment_id
          format: uuid
          description: The environment this state is scoped to (UUID).
        serial:
          type:
            - integer
            - string
          title: serial
          format: int64
          description: |-
            Terraform state serial number. Monotonically increasing with each
             successful apply. Used for optimistic concurrency control.
        data:
          type: string
          title: data
          format: byte
          description: |-
            The raw Terraform state data (JSON-encoded). This is the opaque
             `.tfstate` blob managed by Terraform. Can be several megabytes for
             large workspaces.
        md5:
          type: string
          title: md5
          description: |-
            MD5 hash of the state data. Used by Terraform for integrity checks
             and conditional updates.
        lineage:
          type: string
          title: lineage
          description: |-
            Terraform state lineage — a UUID generated on first init. All
             subsequent writes must match this lineage to prevent cross-state
             contamination.
        lock:
          title: lock
          description: Active lock on this state, if any. Absent when the state is unlocked.
          $ref: '#/components/schemas/admiral.api.state.v1.StateLock'
        createdAt:
          title: created_at
          description: When the state record was first created.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        updatedAt:
          title: updated_at
          description: When the state data was last updated (last successful PushState).
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: State
      additionalProperties: false
      description: |-
        State represents the full Terraform state for an infrastructure component
         in a specific environment, including the raw state data blob. Each
         component + environment combination has at most one state record. The
         server creates the record on first PushState.

         This message is returned by GetCurrentState. For list operations, see
         StateSummary which omits the data blob.
    admiral.api.state.v1.StateLock:
      type: object
      properties:
        lockId:
          type: string
          title: lock_id
          format: uuid
          description: Unique identifier for the lock (UUID, generated by Terraform/OpenTofu).
        operation:
          type: string
          title: operation
          description: |-
            The Terraform operation holding the lock. Common values:
               - "OperationTypePlan"
               - "OperationTypeApply"
             This value is set by the Terraform client and is informational only.
        who:
          type: string
          title: who
          description: |-
            Identifier of who holds the lock. Populated by Terraform — typically
             the format "username@hostname" (e.g., "deploy@prod-runner-01").
             This field is informational only; its format is controlled by Terraform.
        version:
          type: string
          title: version
          description: |-
            Terraform/OpenTofu version string of the client holding the lock
             (e.g., "1.7.5").
        acquiredAt:
          title: acquired_at
          description: When the lock was acquired.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: StateLock
      additionalProperties: false
      description: |-
        StateLock represents an exclusive lock on a state record. Terraform acquires
         locks before plan/apply to prevent concurrent modifications. The lock_id is
         generated by Terraform (as a UUID) and included in all lock/unlock requests.
    admiral.api.state.v1.StateSummary:
      type: object
      properties:
        id:
          type: string
          title: id
          format: uuid
          description: Unique identifier for the state record (UUID).
        componentId:
          type: string
          title: component_id
          format: uuid
          description: The infrastructure component this state belongs to (UUID).
        environmentId:
          type: string
          title: environment_id
          format: uuid
          description: The environment this state is scoped to (UUID).
        serial:
          type:
            - integer
            - string
          title: serial
          format: int64
          description: Terraform state serial number.
        md5:
          type: string
          title: md5
          description: MD5 hash of the current state data.
        lineage:
          type: string
          title: lineage
          description: Terraform state lineage.
        sizeBytes:
          type:
            - integer
            - string
          title: size_bytes
          format: int64
          description: Size of the current state data in bytes.
        lock:
          title: lock
          description: Active lock on this state, if any. Absent when the state is unlocked.
          $ref: '#/components/schemas/admiral.api.state.v1.StateLock'
        createdAt:
          title: created_at
          description: When the state record was first created.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        updatedAt:
          title: updated_at
          description: When the state data was last updated (last successful PushState).
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: StateSummary
      additionalProperties: false
      description: |-
        StateSummary contains state metadata without the raw data blob. Used in
         ListStates to keep list responses lightweight. Use GetCurrentState to
         fetch the full state data for a specific record.
    admiral.api.state.v1.StateVersion:
      type: object
      properties:
        serial:
          type:
            - integer
            - string
          title: serial
          format: int64
          description: Terraform state serial number for this version.
        md5:
          type: string
          title: md5
          description: MD5 hash of the state data at this version.
        lineage:
          type: string
          title: lineage
          description: Terraform state lineage.
        sizeBytes:
          type:
            - integer
            - string
          title: size_bytes
          format: int64
          description: Size of the state data in bytes.
        jobId:
          type:
            - string
            - "null"
          title: job_id
          format: uuid
          description: |-
            The job that produced this state version (UUID). Absent for state that
             was written outside the normal job lifecycle — for example, state
             uploaded directly via an admin migration tool, or state that existed
             before Admiral began managing the component.
        createdAt:
          title: created_at
          description: When this state version was created.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: StateVersion
      additionalProperties: false
      description: |-
        StateVersion contains metadata about a historical state version. Used in
         ListStateVersions to provide version history without the full state data
         blob.
    admiral.api.state.v1.UnlockStateRequest:
      type: object
      properties:
        jobId:
          type: string
          title: job_id
          format: uuid
          description: The job releasing the lock (UUID).
        lockId:
          type: string
          title: lock_id
          format: uuid
          description: The lock_id to release (UUID). Must match the currently held lock.
      title: UnlockStateRequest
      additionalProperties: false
      description: UnlockStateRequest releases the lock on the job's state.
    admiral.api.state.v1.UnlockStateResponse:
      type: object
      title: UnlockStateResponse
      additionalProperties: false
      description: UnlockStateResponse confirms the lock was released.
    admiral.api.user.v1.CreatePersonalAccessTokenRequest:
      type: object
      properties:
        name:
          type: string
          title: name
          maxLength: 63
          minLength: 1
          pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
          description: |-
            URL-safe, human-readable identifier for the token (e.g., "postman-testing").
             Must be unique per user within the tenant. Lowercase alphanumeric and
             hyphens only.
        scopes:
          type: array
          items:
            type: string
            maxLength: 64
            minLength: 1
          title: scopes
          maxItems: 255
          description: |-
            The scopes to grant this token. Must be valid scopes allowed for PATs.
             The server enforces that issued scopes are a subset of the caller's own
             scopes — a token cannot grant more access than the user holds.
        expiresAt:
          title: expires_at
          description: |-
            Optional expiration time. If unset, the token does not expire.
             Tenant policies may enforce a maximum lifetime.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: CreatePersonalAccessTokenRequest
      additionalProperties: false
      description: CreatePersonalAccessTokenRequest contains the parameters for creating a new PAT.
    admiral.api.user.v1.CreatePersonalAccessTokenResponse:
      type: object
      properties:
        accessToken:
          title: access_token
          description: The created token metadata.
          $ref: '#/components/schemas/admiral.common.v1.AccessToken'
        plainTextToken:
          type: string
          title: plain_text_token
          description: |-
            The raw token secret (e.g., "adm_pat_7kH3mNqR2xFb..."). This value is
             shown exactly once and cannot be retrieved again. Store it securely.
      title: CreatePersonalAccessTokenResponse
      additionalProperties: false
      description: CreatePersonalAccessTokenResponse contains the newly created PAT.
    admiral.api.user.v1.GetPersonalAccessTokenRequest:
      type: object
      properties:
        tokenId:
          type: string
          title: token_id
          format: uuid
          description: The unique identifier of the token (UUID).
      title: GetPersonalAccessTokenRequest
      additionalProperties: false
      description: GetPersonalAccessTokenRequest identifies a PAT to retrieve.
    admiral.api.user.v1.GetPersonalAccessTokenResponse:
      type: object
      properties:
        accessToken:
          title: access_token
          description: The token metadata. The token secret is never included.
          $ref: '#/components/schemas/admiral.common.v1.AccessToken'
      title: GetPersonalAccessTokenResponse
      additionalProperties: false
      description: GetPersonalAccessTokenResponse contains the requested PAT metadata.
    admiral.api.user.v1.GetUserRequest:
      type: object
      title: GetUserRequest
      additionalProperties: false
      description: |-
        GetUserRequest is the request message for GetUser.
         No parameters are required as the user is identified by the auth token.
    admiral.api.user.v1.GetUserResponse:
      type: object
      properties:
        user:
          title: user
          description: The user profile.
          $ref: '#/components/schemas/admiral.api.user.v1.User'
      title: GetUserResponse
      additionalProperties: false
      description: GetUserResponse contains the authenticated user's profile.
    admiral.api.user.v1.ListPersonalAccessTokensRequest:
      type: object
      properties:
        filter:
          type: string
          title: filter
          maxLength: 1024
          description: |-
            Filter expression using the PEG filter DSL
             (e.g., `status == "active"` or `name == "ci-*"`).
        pageSize:
          type: integer
          title: page_size
          maximum: 100
          minimum: 0
          format: int32
          description: Maximum number of tokens to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListPersonalAccessTokensRequest
      additionalProperties: false
      description: ListPersonalAccessTokensRequest contains pagination and filter parameters.
    admiral.api.user.v1.ListPersonalAccessTokensResponse:
      type: object
      properties:
        accessTokens:
          type: array
          items:
            $ref: '#/components/schemas/admiral.common.v1.AccessToken'
          title: access_tokens
          description: The list of tokens. Token secrets are never included.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListPersonalAccessTokensResponse
      additionalProperties: false
      description: ListPersonalAccessTokensResponse contains a page of PAT metadata.
    admiral.api.user.v1.RevokePersonalAccessTokenRequest:
      type: object
      properties:
        tokenId:
          type: string
          title: token_id
          format: uuid
          description: The unique identifier of the token to revoke (UUID).
      title: RevokePersonalAccessTokenRequest
      additionalProperties: false
      description: RevokePersonalAccessTokenRequest identifies a PAT to revoke.
    admiral.api.user.v1.RevokePersonalAccessTokenResponse:
      type: object
      properties:
        accessToken:
          title: access_token
          description: The token metadata with updated status.
          $ref: '#/components/schemas/admiral.common.v1.AccessToken'
      title: RevokePersonalAccessTokenResponse
      additionalProperties: false
      description: RevokePersonalAccessTokenResponse contains the revoked PAT metadata.
    admiral.api.user.v1.User:
      type: object
      properties:
        id:
          type: string
          title: id
          format: uuid
          description: Unique identifier for the user (UUID).
        tenantId:
          type: string
          title: tenant_id
          format: uuid
          description: The tenant this user belongs to (UUID).
        email:
          type: string
          title: email
          description: User's email address.
        displayName:
          type:
            - string
            - "null"
          title: display_name
          description: User's display name for UI purposes.
        givenName:
          type:
            - string
            - "null"
          title: given_name
          description: User's given (first) name.
        familyName:
          type:
            - string
            - "null"
          title: family_name
          description: User's family (last) name.
        avatarUrl:
          type:
            - string
            - "null"
          title: avatar_url
          description: URL to the user's avatar image.
        createdAt:
          title: created_at
          description: When the user was created.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        updatedAt:
          title: updated_at
          description: When the user was last updated.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: User
      additionalProperties: false
      description: User represents the authenticated user's profile information.
    admiral.api.variable.v1.CreateVariableRequest:
      type: object
      properties:
        key:
          type: string
          title: key
          maxLength: 63
          minLength: 1
          pattern: ^[A-Za-z_][A-Za-z0-9_]{0,62}$
          description: |-
            The variable name. Must be a valid environment variable identifier
             (e.g., "DATABASE_URL", "API_KEY").
        value:
          type: string
          title: value
          minLength: 1
          description: The variable value. For COMPLEX type, must be valid JSON.
        sensitive:
          type: boolean
          title: sensitive
          description: |-
            Whether the variable value should be encrypted at rest and masked in
             API responses.
        type:
          title: type
          description: How the value should be interpreted. Defaults to STRING if not specified.
          $ref: '#/components/schemas/admiral.api.variable.v1.VariableType'
        description:
          type: string
          title: description
          maxLength: 1024
          description: Optional description of the variable's purpose.
        applicationId:
          type:
            - string
            - "null"
          title: application_id
          format: uuid
          description: |-
            The application to scope this variable to (UUID). When set without
             environment_id, the variable applies to all environments in the app.
        environmentId:
          type:
            - string
            - "null"
          title: environment_id
          format: uuid
          description: |-
            The environment to scope this variable to (UUID). Requires application_id.
             When set, the variable applies only to this specific environment.
      title: CreateVariableRequest
      additionalProperties: false
      description: |-
        CreateVariableRequest contains the parameters for creating a new variable.
         The variable's scope is derived from the presence of application_id and
         environment_id: neither means global, application_id only means app-scoped,
         both means environment-scoped.
    admiral.api.variable.v1.CreateVariableResponse:
      type: object
      properties:
        variable:
          title: variable
          description: The created variable.
          $ref: '#/components/schemas/admiral.api.variable.v1.Variable'
      title: CreateVariableResponse
      additionalProperties: false
      description: CreateVariableResponse contains the newly created variable.
    admiral.api.variable.v1.DeleteVariableRequest:
      type: object
      properties:
        variableId:
          type: string
          title: variable_id
          format: uuid
          description: The unique identifier of the variable to delete (UUID).
      title: DeleteVariableRequest
      additionalProperties: false
      description: DeleteVariableRequest identifies a variable to delete.
    admiral.api.variable.v1.DeleteVariableResponse:
      type: object
      title: DeleteVariableResponse
      additionalProperties: false
      description: DeleteVariableResponse is empty on success.
    admiral.api.variable.v1.GetVariableRequest:
      type: object
      properties:
        variableId:
          type: string
          title: variable_id
          format: uuid
          description: The unique identifier of the variable (UUID).
      title: GetVariableRequest
      additionalProperties: false
      description: GetVariableRequest identifies a variable to retrieve.
    admiral.api.variable.v1.GetVariableResponse:
      type: object
      properties:
        variable:
          title: variable
          description: The variable record. Sensitive variable values are masked.
          $ref: '#/components/schemas/admiral.api.variable.v1.Variable'
      title: GetVariableResponse
      additionalProperties: false
      description: GetVariableResponse contains the variable record.
    admiral.api.variable.v1.ListVariablesRequest:
      type: object
      properties:
        filter:
          type: string
          title: filter
          maxLength: 1024
          description: |-
            Filter expression using the PEG filter DSL.

             Common filter fields:
               - `application_id` — scope to an application (triggers merge with
                 app-level variables alongside global variables).
               - `environment_id` — scope to an environment (requires application_id;
                 triggers merge with environment-level variables).
               - `sensitive` — filter by sensitivity.
               - `type` — filter by variable type.
               - `key` — filter by variable key (supports prefix matching).
        pageSize:
          type: integer
          title: page_size
          maximum: 100
          minimum: 0
          format: int32
          description: Maximum number of variables to return per page.
        pageToken:
          type: string
          title: page_token
          description: Opaque pagination token from a previous response.
      title: ListVariablesRequest
      additionalProperties: false
      description: |-
        ListVariablesRequest contains filters and pagination parameters.

         The filter determines which variables are included in the merged view
         based on the presence of `application_id` and `environment_id` fields:
           - Neither field in filter: global variables only.
           - `application_id` in filter: global + app-level variables merged.
           - `application_id` + `environment_id` in filter: global + app + environment
             variables merged.

         When variables with the same key exist at multiple levels, all are returned
         so clients can determine precedence.
    admiral.api.variable.v1.ListVariablesResponse:
      type: object
      properties:
        variables:
          type: array
          items:
            $ref: '#/components/schemas/admiral.api.variable.v1.Variable'
          title: variables
          description: The list of variables from all applicable levels.
        nextPageToken:
          type: string
          title: next_page_token
          description: Pagination token for the next page. Empty when there are no more results.
      title: ListVariablesResponse
      additionalProperties: false
      description: ListVariablesResponse contains a page of variables.
    admiral.api.variable.v1.UpdateVariableRequest:
      type: object
      properties:
        variable:
          title: variable
          description: |-
            The variable with updated fields. The `id` field is required.
             Only fields specified in `update_mask` are updated.
          $ref: '#/components/schemas/admiral.api.variable.v1.Variable'
        updateMask:
          title: update_mask
          description: |-
            The set of fields to update. If unset, all mutable fields are updated.
             Supported fields: `value`, `sensitive`, `type`, `description`.
          $ref: '#/components/schemas/google.protobuf.FieldMask'
      title: UpdateVariableRequest
      required:
        - variable
      additionalProperties: false
      description: UpdateVariableRequest contains the variable fields to update.
    admiral.api.variable.v1.UpdateVariableResponse:
      type: object
      properties:
        variable:
          title: variable
          description: The updated variable.
          $ref: '#/components/schemas/admiral.api.variable.v1.Variable'
      title: UpdateVariableResponse
      additionalProperties: false
      description: UpdateVariableResponse contains the updated variable.
    admiral.api.variable.v1.Variable:
      type: object
      properties:
        id:
          type: string
          title: id
          format: uuid
          description: Unique identifier for the variable (UUID).
        tenantId:
          type: string
          title: tenant_id
          format: uuid
          description: Tenant this variable belongs to (UUID).
        key:
          type: string
          title: key
          maxLength: 63
          minLength: 1
          pattern: ^[A-Za-z_][A-Za-z0-9_]{0,62}$
          description: |-
            The variable name. Must be a valid environment variable identifier
             (e.g., "DATABASE_URL", "API_KEY"). Alphanumeric and underscores
             (uppercase conventional but lowercase accepted), must start with a letter
             or underscore (max 255 chars).
        value:
          type: string
          title: value
          description: |-
            The variable value. Always stored as a string — use `type` to indicate
             how to interpret it. Masked or empty for sensitive variables in responses.

             For COMPLEX type, this is a JSON-encoded string (e.g., '["a","b"]' or
             '{"key":"value"}'). The rendering engine converts it to the target format
             (HCL for Terraform, YAML for Helm).
        sensitive:
          type: boolean
          title: sensitive
          description: Whether the variable value is encrypted at rest and masked in API responses.
        type:
          title: type
          description: |-
            How the value should be interpreted by the rendering engine and displayed
             in the UI. Defaults to STRING if not specified.
          $ref: '#/components/schemas/admiral.api.variable.v1.VariableType'
        description:
          type: string
          title: description
          maxLength: 1024
          description: |-
            Optional description of the variable's purpose (e.g., "Maximum replica
             count for production scaling" or "RDS instance class per environment").
        applicationId:
          type:
            - string
            - "null"
          title: application_id
          format: uuid
          description: |-
            The application this variable is scoped to (UUID). When set, the variable
             is scoped to this application. When both application_id and environment_id
             are set, the variable is scoped to that specific environment.
             Absent means the variable is global (tenant-wide).
        environmentId:
          type:
            - string
            - "null"
          title: environment_id
          format: uuid
          description: |-
            The environment this variable is scoped to (UUID). Requires application_id.
             When set alongside application_id, the variable applies only to this
             specific environment within the application.
        createdBy:
          type: string
          title: created_by
          description: User ID who created this variable (UUID, server-populated from token).
        updatedBy:
          type: string
          title: updated_by
          description: User ID who last updated this variable (UUID, server-populated from token).
        createdAt:
          title: created_at
          description: When the variable was created.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        updatedAt:
          title: updated_at
          description: When the variable was last updated.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: Variable
      additionalProperties: false
      description: |-
        Variable represents a configuration key-value pair scoped to a tenant,
         application, or application+environment. Variables are resolved at deployment
         time into immutable deployment snapshots.

         Variables are user-managed configuration values, distinct from component
         outputs which are system-managed values produced by apply (e.g., Terraform
         outputs). Component outputs are resolved at render time and referenced via
         a separate namespace ({{ .component.<name>.<output> }}).
    admiral.api.variable.v1.VariableType:
      type: string
      title: VariableType
      enum:
        - VARIABLE_TYPE_UNSPECIFIED
        - VARIABLE_TYPE_STRING
        - VARIABLE_TYPE_NUMBER
        - VARIABLE_TYPE_BOOLEAN
        - VARIABLE_TYPE_COMPLEX
      description: |-
        VariableType indicates how the variable value should be interpreted by the
         rendering engine and displayed in the UI. The value is always stored as a
         string regardless of type.
    admiral.common.v1.AccessToken:
      type: object
      properties:
        id:
          type: string
          title: id
          format: uuid
          description: Unique identifier for the token (UUID).
        tenantId:
          type: string
          title: tenant_id
          format: uuid
          description: Tenant this token belongs to (UUID).
        name:
          type: string
          title: name
          maxLength: 63
          minLength: 1
          pattern: ^[a-z]([a-z0-9-]{0,61}[a-z0-9])?$
          description: |-
            URL-safe, human-readable identifier for the token (e.g., "ci-deploy-key").
             Unique within the parent resource. Lowercase alphanumeric and hyphens only,
             must start with a letter and end with an alphanumeric character (1-63 chars).
        tokenType:
          title: token_type
          description: The category of this token.
          $ref: '#/components/schemas/admiral.common.v1.TokenType'
        scopes:
          type: array
          items:
            type: string
          title: scopes
          description: |-
            The scopes granted to this token. For PATs, these are user-selected.
             For AGTs, these are auto-assigned based on the resource type.
        status:
          title: status
          description: Current lifecycle status of the token.
          $ref: '#/components/schemas/admiral.common.v1.AccessTokenStatus'
        bindingType:
          title: binding_type
          description: The kind of resource this token is bound to.
          $ref: '#/components/schemas/admiral.common.v1.BindingType'
        bindingId:
          type: string
          title: binding_id
          description: The ID of the resource this token is bound to (UUID).
        createdBy:
          type: string
          title: created_by
          description: |-
            The user who created this token (UUID). For PATs, this is the token owner.
             For AGTs, this is the administrator who issued the token.
        expiresAt:
          title: expires_at
          description: When the token expires. If unset, the token does not expire.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        lastUsedAt:
          title: last_used_at
          description: When the token was last used to authenticate an API request.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        createdAt:
          title: created_at
          description: When the token was created.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
        revokedAt:
          title: revoked_at
          description: When the token was revoked. Only set when status is REVOKED.
          $ref: '#/components/schemas/google.protobuf.Timestamp'
      title: AccessToken
      additionalProperties: false
      description: |-
        AccessToken contains token metadata common to all token types (PAT, AGT).
         The raw token secret is never included in this message — it is only returned
         once at creation time via the `plain_text_token` field in Create responses.

         Token CRUD is managed by each parent resource's API:
           - PATs:         UserAPI    (/v1/user/tokens)
           - Cluster AGTs: ClusterAPI (/v1/clusters/{id}/tokens)
           - Runner AGTs:  RunnerAPI  (/v1/runners/{id}/tokens)
    admiral.common.v1.AccessTokenStatus:
      type: string
      title: AccessTokenStatus
      enum:
        - ACCESS_TOKEN_STATUS_UNSPECIFIED
        - ACCESS_TOKEN_STATUS_ACTIVE
        - ACCESS_TOKEN_STATUS_REVOKED
        - ACCESS_TOKEN_STATUS_ROTATING
      description: AccessTokenStatus represents the lifecycle state of an access token.
    admiral.common.v1.BindingType:
      type: string
      title: BindingType
      enum:
        - BINDING_TYPE_UNSPECIFIED
        - BINDING_TYPE_USER
        - BINDING_TYPE_CLUSTER
        - BINDING_TYPE_RUNNER
      description: BindingType identifies the kind of resource an access token is bound to.
    admiral.common.v1.TokenType:
      type: string
      title: TokenType
      enum:
        - TOKEN_TYPE_UNSPECIFIED
        - TOKEN_TYPE_PAT
        - TOKEN_TYPE_AGT
      description: |-
        TokenType identifies the category of an access token issued by Admiral's token system.
         IDP-issued JWTs (OAuth2/OIDC sessions) are NOT represented here — they are
         resolved by separate middleware and can be referenced as "session" in
         AuthRule.allowed_token_types when needed.
    google.protobuf.Duration:
      type: string
      format: duration
      description: |-
        A Duration represents a signed, fixed-length span of time represented
         as a count of seconds and fractions of seconds at nanosecond
         resolution. It is independent of any calendar and concepts like "day"
         or "month". It is related to Timestamp in that the difference between
         two Timestamp values is a Duration and it can be added or subtracted
         from a Timestamp. Range is approximately +-10,000 years.

         # Examples

         Example 1: Compute Duration from two Timestamps in pseudo code.

             Timestamp start = ...;
             Timestamp end = ...;
             Duration duration = ...;

             duration.seconds = end.seconds - start.seconds;
             duration.nanos = end.nanos - start.nanos;

             if (duration.seconds < 0 && duration.nanos > 0) {
               duration.seconds += 1;
               duration.nanos -= 1000000000;
             } else if (duration.seconds > 0 && duration.nanos < 0) {
               duration.seconds -= 1;
               duration.nanos += 1000000000;
             }

         Example 2: Compute Timestamp from Timestamp + Duration in pseudo code.

             Timestamp start = ...;
             Duration duration = ...;
             Timestamp end = ...;

             end.seconds = start.seconds + duration.seconds;
             end.nanos = start.nanos + duration.nanos;

             if (end.nanos < 0) {
               end.seconds -= 1;
               end.nanos += 1000000000;
             } else if (end.nanos >= 1000000000) {
               end.seconds += 1;
               end.nanos -= 1000000000;
             }

         Example 3: Compute Duration from datetime.timedelta in Python.

             td = datetime.timedelta(days=3, minutes=10)
             duration = Duration()
             duration.FromTimedelta(td)

         # JSON Mapping

         In JSON format, the Duration type is encoded as a string rather than an
         object, where the string ends in the suffix "s" (indicating seconds) and
         is preceded by the number of seconds, with nanoseconds expressed as
         fractional seconds. For example, 3 seconds with 0 nanoseconds should be
         encoded in JSON format as "3s", while 3 seconds and 1 nanosecond should
         be expressed in JSON format as "3.000000001s", and 3 seconds and 1
         microsecond should be expressed in JSON format as "3.000001s".
    google.protobuf.FieldMask:
      type: string
      description: |-
        `FieldMask` represents a set of symbolic field paths, for example:

             paths: "f.a"
             paths: "f.b.d"

         Here `f` represents a field in some root message, `a` and `b`
         fields in the message found in `f`, and `d` a field found in the
         message in `f.b`.

         Field masks are used to specify a subset of fields that should be
         returned by a get operation or modified by an update operation.
         Field masks also have a custom JSON encoding (see below).

         # Field Masks in Projections

         When used in the context of a projection, a response message or
         sub-message is filtered by the API to only contain those fields as
         specified in the mask. For example, if the mask in the previous
         example is applied to a response message as follows:

             f {
               a : 22
               b {
                 d : 1
                 x : 2
               }
               y : 13
             }
             z: 8

         The result will not contain specific values for fields x,y and z
         (their value will be set to the default, and omitted in proto text
         output):


             f {
               a : 22
               b {
                 d : 1
               }
             }

         A repeated field is not allowed except at the last position of a
         paths string.

         If a FieldMask object is not present in a get operation, the
         operation applies to all fields (as if a FieldMask of all fields
         had been specified).

         Note that a field mask does not necessarily apply to the
         top-level response message. In case of a REST get operation, the
         field mask applies directly to the response, but in case of a REST
         list operation, the mask instead applies to each individual message
         in the returned resource list. In case of a REST custom method,
         other definitions may be used. Where the mask applies will be
         clearly documented together with its declaration in the API.  In
         any case, the effect on the returned resource/resources is required
         behavior for APIs.

         # Field Masks in Update Operations

         A field mask in update operations specifies which fields of the
         targeted resource are going to be updated. The API is required
         to only change the values of the fields as specified in the mask
         and leave the others untouched. If a resource is passed in to
         describe the updated values, the API ignores the values of all
         fields not covered by the mask.

         If a repeated field is specified for an update operation, new values will
         be appended to the existing repeated field in the target resource. Note that
         a repeated field is only allowed in the last position of a `paths` string.

         If a sub-message is specified in the last position of the field mask for an
         update operation, then new value will be merged into the existing sub-message
         in the target resource.

         For example, given the target message:

             f {
               b {
                 d: 1
                 x: 2
               }
               c: [1]
             }

         And an update message:

             f {
               b {
                 d: 10
               }
               c: [2]
             }

         then if the field mask is:

          paths: ["f.b", "f.c"]

         then the result will be:

             f {
               b {
                 d: 10
                 x: 2
               }
               c: [1, 2]
             }

         An implementation may provide options to override this default behavior for
         repeated and message fields.

         In order to reset a field's value to the default, the field must
         be in the mask and set to the default value in the provided resource.
         Hence, in order to reset all fields of a resource, provide a default
         instance of the resource and set all fields in the mask, or do
         not provide a mask as described below.

         If a field mask is not present on update, the operation applies to
         all fields (as if a field mask of all fields has been specified).
         Note that in the presence of schema evolution, this may mean that
         fields the client does not know and has therefore not filled into
         the request will be reset to their default. If this is unwanted
         behavior, a specific service may require a client to always specify
         a field mask, producing an error if not.

         As with get operations, the location of the resource which
         describes the updated values in the request message depends on the
         operation kind. In any case, the effect of the field mask is
         required to be honored by the API.

         ## Considerations for HTTP REST

         The HTTP kind of an update operation which uses a field mask must
         be set to PATCH instead of PUT in order to satisfy HTTP semantics
         (PUT must only be used for full updates).

         # JSON Encoding of Field Masks

         In JSON, a field mask is encoded as a single string where paths are
         separated by a comma. Fields name in each path are converted
         to/from lower-camel naming conventions.

         As an example, consider the following message declarations:

             message Profile {
               User user = 1;
               Photo photo = 2;
             }
             message User {
               string display_name = 1;
               string address = 2;
             }

         In proto a field mask for `Profile` may look as such:

             mask {
               paths: "user.display_name"
               paths: "photo"
             }

         In JSON, the same mask is represented as below:

             {
               mask: "user.displayName,photo"
             }

         # Field Masks and Oneof Fields

         Field masks treat fields in oneofs just as regular fields. Consider the
         following message:

             message SampleMessage {
               oneof test_oneof {
                 string name = 4;
                 SubMessage sub_message = 9;
               }
             }

         The field mask can be:

             mask {
               paths: "name"
             }

         Or:

             mask {
               paths: "sub_message"
             }

         Note that oneof type names ("test_oneof" in this case) cannot be used in
         paths.

         ## Field Mask Verification

         The implementation of any API method which has a FieldMask type field in the
         request should verify the included field paths, and return an
         `INVALID_ARGUMENT` error if any path is unmappable.
    google.protobuf.Timestamp:
      type: string
      examples:
        - "2023-01-15T01:30:15.01Z"
        - "2024-12-25T12:00:00Z"
      format: date-time
      description: |-
        A Timestamp represents a point in time independent of any time zone or local
         calendar, encoded as a count of seconds and fractions of seconds at
         nanosecond resolution. The count is relative to an epoch at UTC midnight on
         January 1, 1970, in the proleptic Gregorian calendar which extends the
         Gregorian calendar backwards to year one.

         All minutes are 60 seconds long. Leap seconds are "smeared" so that no leap
         second table is needed for interpretation, using a [24-hour linear
         smear](https://developers.google.com/time/smear).

         The range is from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59.999999999Z. By
         restricting to that range, we ensure that we can convert to and from [RFC
         3339](https://www.ietf.org/rfc/rfc3339.txt) date strings.

         # Examples

         Example 1: Compute Timestamp from POSIX `time()`.

             Timestamp timestamp;
             timestamp.set_seconds(time(NULL));
             timestamp.set_nanos(0);

         Example 2: Compute Timestamp from POSIX `gettimeofday()`.

             struct timeval tv;
             gettimeofday(&tv, NULL);

             Timestamp timestamp;
             timestamp.set_seconds(tv.tv_sec);
             timestamp.set_nanos(tv.tv_usec * 1000);

         Example 3: Compute Timestamp from Win32 `GetSystemTimeAsFileTime()`.

             FILETIME ft;
             GetSystemTimeAsFileTime(&ft);
             UINT64 ticks = (((UINT64)ft.dwHighDateTime) << 32) | ft.dwLowDateTime;

             // A Windows tick is 100 nanoseconds. Windows epoch 1601-01-01T00:00:00Z
             // is 11644473600 seconds before Unix epoch 1970-01-01T00:00:00Z.
             Timestamp timestamp;
             timestamp.set_seconds((INT64) ((ticks / 10000000) - 11644473600LL));
             timestamp.set_nanos((INT32) ((ticks % 10000000) * 100));

         Example 4: Compute Timestamp from Java `System.currentTimeMillis()`.

             long millis = System.currentTimeMillis();

             Timestamp timestamp = Timestamp.newBuilder().setSeconds(millis / 1000)
                 .setNanos((int) ((millis % 1000) * 1000000)).build();

         Example 5: Compute Timestamp from Java `Instant.now()`.

             Instant now = Instant.now();

             Timestamp timestamp =
                 Timestamp.newBuilder().setSeconds(now.getEpochSecond())
                     .setNanos(now.getNano()).build();

         Example 6: Compute Timestamp from current time in Python.

             timestamp = Timestamp()
             timestamp.GetCurrentTime()

         # JSON Mapping

         In JSON format, the Timestamp type is encoded as a string in the
         [RFC 3339](https://www.ietf.org/rfc/rfc3339.txt) format. That is, the
         format is "{year}-{month}-{day}T{hour}:{min}:{sec}[.{frac_sec}]Z"
         where {year} is always expressed using four digits while {month}, {day},
         {hour}, {min}, and {sec} are zero-padded to two digits each. The fractional
         seconds, which can go up to 9 digits (i.e. up to 1 nanosecond resolution),
         are optional. The "Z" suffix indicates the timezone ("UTC"); the timezone
         is required. A proto3 JSON serializer should always use UTC (as indicated by
         "Z") when printing the Timestamp type and a proto3 JSON parser should be
         able to accept both UTC and other timezones (as indicated by an offset).

         For example, "2017-01-15T01:30:15.01Z" encodes 15.01 seconds past
         01:30 UTC on January 15, 2017.

         In JavaScript, one can convert a Date object to this format using the
         standard
         [toISOString()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString)
         method. In Python, a standard `datetime.datetime` object can be converted
         to this format using
         [`strftime`](https://docs.python.org/2/library/time.html#time.strftime) with
         the time format spec '%Y-%m-%dT%H:%M:%S.%fZ'. Likewise, in Java, one can use
         the Joda Time's [`ISODateTimeFormat.dateTime()`](
         http://joda-time.sourceforge.net/apidocs/org/joda/time/format/ISODateTimeFormat.html#dateTime()
         ) to obtain a formatter capable of generating timestamps in this format.
security: []
tags:
  - name: admiral.api.application.v1.ApplicationAPI
    description: |-
      ApplicationAPI manages applications within a tenant.

       An application is the fundamental unit in Admiral. It groups deployment
       manifests, infrastructure dependencies, environment configuration, and
       relationships into a single entity that can be deployed across multiple
       environments. Applications are defined once and promoted explicitly between
       environments.
  - name: admiral.api.cluster.v1.ClusterAPI
    description: |-
      ClusterAPI manages Kubernetes clusters and their workload telemetry.

       Administrators create clusters via CreateCluster, which returns an Agent
       Token (AGT) for deploying the K8s agent. Once the agent boots and calls
       AgentAPI.RegisterAgent, the cluster transitions from PENDING to HEALTHY
       and begins receiving telemetry.

       The telemetry model has three tiers: current snapshot (upserted per push),
       time-series metrics (rolling 48-hour window), and events (rolling 7-day window).

       All operations delegate to the platform ClusterAPI. The facade resolves the
       caller's identity (user JWT or AGT → cluster_id) and forwards.
  - name: admiral.api.component.v1.ComponentAPI
    description: |-
      ComponentAPI manages components within an application.

       A component binds an application to a source — it defines what artifact
       (Terraform module, Helm chart, Kustomize overlay, etc.) to deploy and how
       to configure it. Each component has a name (unique within the application),
       a source reference, a pinned version, and a values template that maps
       variables and component outputs into the source's expected inputs.

       Components are defined at the application level and apply to all
       environments by default. Environments can override a component's source,
       version, values, or disable it entirely via ComponentOverride.

       Components form a dependency graph: infrastructure components produce
       outputs that are auto-discovered from the source (e.g., Terraform outputs).
       Workload components declare their outputs explicitly. Other components
       consume these outputs via template expressions
       (e.g., `{{ .component.vpc.vpc_id }}`). Admiral resolves this DAG at
       deployment time to determine execution order.
  - name: admiral.api.connection.v1.ConnectionAPI
    description: |-
      ConnectionAPI manages credentials for accessing external systems.

       A connection stores the authentication configuration needed to reach a remote
       system — a Git host, Helm repository, OCI registry, Terraform registry, or
       cloud provider. Connections are tenant-scoped and referenced by sources when
       fetching artifacts.

       Sensitive credential fields (tokens, keys, secrets) are write-only: they are
       accepted on create/update but never returned in API responses. GET and List
       operations return connection metadata and status only.

       For cloud registries (ECR, GAR, ACR), OIDC workload identity federation is
       the recommended approach. Admiral acts as an OIDC identity provider — the
       customer configures their cloud IAM to trust Admiral's issuer with their
       tenant_id claim. No long-lived secrets are stored in Admiral. Static cloud
       credentials are supported for legacy or airgapped environments but are
       discouraged and may be restricted via tenant-level policy in the future.
  - name: admiral.api.deployment.v1.DeploymentAPI
    description: |-
      DeploymentAPI manages deployments and their component revisions.

       A deployment represents a single act of deploying an application to an
       environment. When triggered, Admiral resolves all components for the
       application+environment combination (applying overrides), builds a
       dependency graph, and renders each component into an immutable revision.

       Infrastructure revisions (Terraform) follow a plan → apply lifecycle.
       Workload revisions (Helm, Kustomize, manifests) are applied directly to
       the target cluster. The deployment engine executes the dependency graph
       in order: independent components run in parallel, dependent components
       wait for their upstream to succeed.

       There is no special rollback mechanism — to revert a change, update the
       configuration (variables, component settings) and create a new deployment.
       Every deployment is always rendered against the current state, ensuring
       consistency between infrastructure outputs and workload inputs.
  - name: admiral.api.environment.v1.EnvironmentAPI
    description: |-
      EnvironmentAPI manages environments within an application.

       An environment is a named deployment target (e.g., dev, staging, prod) that
       binds an application to a runtime where its workloads are deployed. Each
       environment carries its own configuration, credentials, and compute targets.
       Promotion between environments is explicit — Admiral never auto-promotes.
  - name: admiral.api.healthcheck.v1.HealthcheckAPI
    description: HealthcheckAPI provides health check operations for monitoring service availability.
  - name: admiral.api.runner.v1.RunnerAPI
    description: |-
      RunnerAPI manages infrastructure execution runners and their jobs.

       Runners are the execution plane for infrastructure operations (Terraform
       plan, apply, destroy). Administrators create runners via CreateRunner,
       which returns an Agent Token (AGT) for deploying the runner binary.
       Once the runner boots and begins heartbeating, the server transitions
       its health from PENDING to HEALTHY and the runner can start claiming jobs.

       The job lifecycle bridges Deployments and Runners:
         1. CreateDeployment resolves components and creates Revisions.
         2. For infrastructure revisions, the server creates a Job and assigns it
            to the environment's configured runner.
         3. The runner calls ClaimJob → GetJobBundle → executes TF → ReportJobResult.
         4. ReportJobResult transitions the parent Revision status.

       Admin routes follow /v1/runners/... (plural, with IDs).
       Runner-facing routes use /v1/runner/... (singular, no ID — derived from
       the AGT binding), matching the cluster agent pattern.

       All operations delegate to the platform RunnerAPI. The facade resolves the
       caller's identity (user JWT or AGT → runner_id) and forwards. ---------------------------------------------------------------------------
       Admin CRUD
       ---------------------------------------------------------------------------
  - name: admiral.api.source.v1.SourceAPI
    description: |-
      SourceAPI manages source definitions — pointers to external artifacts that
       Admiral fetches, inspects, and renders into immutable deployment snapshots.

       A source represents a fetchable artifact at a specific location: a Terraform
       module in a registry, a Helm chart in an OCI registry, Kubernetes manifests
       in a Git repository, etc. Sources reference a connection for credentials and
       are referenced by application components for deployment.

       Sources can be marked as catalog entries by platform engineers. Catalog
       sources are curated, pre-approved artifacts (e.g., a corporate-standard RDS
       module with backups and encryption pre-configured). Organizations can
       optionally restrict applications to catalog-only sources.

       The API includes discovery operations (ListSourceVersions, GetSourceInputs,
       GetSourceOutputs) that query external systems in real time. These are
       primarily used by the UI for interactive workflows (version dropdowns, input
       forms) but are exposed in the public API for CLI and automation use. The
       facade delegates discovery to the platform SourceAPI, which handles
       credential resolution and external fetching centrally.
  - name: admiral.api.state.v1.StateAPI
    description: |-
      StateAPI manages Terraform state for infrastructure components within a
       tenant.

       State is scoped to **component + environment** — each infrastructure
       component (e.g., "rds", "vpc") has exactly one state record per
       environment (e.g., dev, staging, prod). This state persists for the
       entire lifetime of that component in that environment, spanning many
       deployments and jobs. Locks protect the state record itself, not any
       individual job — if a job crashes while holding a lock, the lock remains
       on the state until released or force-unlocked.

       Admiral acts as the state backend for all Terraform-backed components.
       You do not need to configure a separate backend (S3, GCS, etc.) —
       Admiral stores and versions state automatically.

       Most callers only need the admin-facing RPCs: GetCurrentState, ListStates,
       ListStateVersions, GetStateVersion, ForceUnlockState, and DeleteState.
       These provide full visibility into and control over state without needing
       to understand the Terraform HTTP backend protocol.

       Runner-facing RPCs (GetState, PushState, LockState, UnlockState) are
       called by Admiral's runner binary during job execution. These endpoints
       use job_id as an access path — the server resolves the job's component
       and environment to locate the underlying state record. The runner
       configures Terraform's HTTP backend with per-job state URLs and injects
       its AGT as a bearer token. These endpoints are not intended for direct
       use by external developers.

       Execution flow:
         ClaimJob → GetJobBundle → LockState → GetState → terraform apply →
         PushState → UnlockState → ReportJobResult

       Admin routes use /v1/states/... (plural, with state_id).
       Runner-facing routes use /v1/runner/jobs/{job_id}/state (job-scoped —
       the server resolves the component and environment from the job).

       All operations delegate to the platform StateAPI. The facade resolves the
       caller's identity and calls ResolveJobState for runner-facing RPCs to map
       job_id → state_id before forwarding state operations. ---------------------------------------------------------------------------
       Runner-facing (AGT-only)
       ---------------------------------------------------------------------------
  - name: admiral.api.user.v1.UserAPI
    description: |-
      UserAPI provides operations for the currently authenticated user, including
       profile retrieval and Personal Access Token (PAT) management.

       PATs allow users to authenticate with the Admiral API from scripts, CI
       pipelines, and other programmatic contexts. Each PAT has user-selected
       scopes and an optional expiration.
  - name: admiral.api.variable.v1.VariableAPI
    description: |-
      VariableAPI manages configuration variables within a tenant.

       Variables provide key-value configuration at three levels: global
       (tenant-wide), per application, or per application+environment. When listing
       variables for a specific application and environment, Admiral merges variables
       from all applicable levels, with narrower levels taking precedence.

       Sensitive variables have their values encrypted at rest and masked in API
       responses. The actual value is only resolved at deployment time into the
       immutable deployment snapshot.
